var n=function(n){n.preventDefault()};function e(e){var l=jQuery(".llms-complete-lesson-form"),o=jQuery('.llms-complete-lesson-form button[type="submit"]'),t=jQuery("#llms_start_quiz, #llms-start-assignment");!0===e?(l.off("submit",n),o.removeAttr("disabled"),t.removeClass("llms-av-disabled").off("click",n)):(l.on("submit",n),o.attr("disabled","disabled"),t.addClass("llms-av-disabled").on("click",n))}var l=function(n){return{ts:n.currentTime,duration:n.duration,url:n.source,provider:n.provider,id:n.config.id}},o=function(n,e){llms.tracking.addEvent("video."+n,{meta:e})};var t=function(n){var e=l(n.detail.plyr);o("paused",e)},i=function(n){var e=l(n.detail.plyr);o(e.ts<1?"started":"played",e)},s=function(n,t,i){var s=l(n.detail.plyr);o("ended",s),function(n,e){LLMS.Ajax.call({data:{action:"llms_av_video_ended",id:e.post_id,nonce:e.nonce},beforeSend:function(){LLMS.Spinner.start(n)},error:function(e,l,o){LLMS.Spinner.stop(n),console.error(e.responseText+" ("+o+" "+l+")"),console.log(e)},success:function(e){LLMS.Spinner.stop(n),null!=e&&e.html&&(n.append(e.html),function(n){var e,l=n.find(".llms-av-pv--seconds");setInterval((function(){1==(e=1*l.text()-1)&&l.closest("a")[0].click(),e>=0&&l.text(e)}),1e3)}(n))}})}(t,i),e(!0)};function u(n){var l,o,u={},a=(null===(l=llms)||void 0===l||null===(o=l.tracking)||void 0===o?void 0:o.getSettings())||null;null!=a&&a.av&&(u=a.av),u.require_video_completion&&!u.video_completed&&e(!1);var r=jQuery(".presto-block-video");n.on("pause",t),n.on("playing",i),n.on("ended",(function(n){return s(n,r,u)}))}export default u;export{s as onEndedVideo,t as onPauseVideo,i as onPlayingVideo}