/*!
 * 
 * Presto Player
 * 
 * @author Presto Made, Inc
 * @version 0.1.0
 * @link undefined
 * @license GPL
 * 
 * Copyright (c) 2022 Presto Made, Inc
 * 
 * This software is released under the GPL License
 * https://opensource.org/licenses/GPL
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprestoPlayerblocksJsonp=window.wpackioprestoPlayerblocksJsonp||[]).push([[0],[,,,function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wp.components},,,,,function(e,t,r){"use strict";r.d(t,"f",(function(){return l})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return p})),r.d(t,"a",(function(){return u}));var n=wp.element,a=n.useRef,o=n.useEffect;function l(e){var t=a();return o((function(){t.current=e})),t.current}function c(e){var t=e.status,r=void 0===t?"success":t,n=e.message;wp.data.dispatch("core/notices").createNotice(r,n,{type:"snackbar"})}function i(e){var t,r=e.split(":");return r.length>1&&(t=60*parseInt(r[0])),parseInt(r[1])+parseInt(t)}function s(e){var t=parseInt(e,10),r=Math.floor(t/60);return t<10&&(t="0"+t),r+":"+t}function p(e){var t=e;if(!(t=t.replace(/[^\d\d:\d\d.-]/g,"")).includes(":"))return"".concat(t,":00");0===t.substr(0,t.indexOf(":")).length&&(t="0".concat(t));var r=t.indexOf(":");return t=t.substring(0,r+3)}function u(e){if(e){if(e.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/))return"youtube";if(e.match(/(https?:\/\/)?(www\.)?(player\.)?vimeo\.com\/([a-z]*\/)*([‌​0-9]{6,11})[?]?.*/))return"vimeo";if(e.indexOf("https://vz-")>-1&&e.indexOf("b-cdn.net")>-1)return"bunny";if(e.indexOf(".mp3")>-1)return"audio"}return"self-hosted"}},function(e,t,r){"use strict";var n=wp.i18n.__;t.a=function(){return React.createElement("div",{className:"presto-player__pro-badge"},n("Pro","presto-player"))}},,function(e,t,r){"use strict";var n=r(1),a=r(0),o=wp.components,l=o.ColorPicker,c=o.ColorIndicator,i=o.Popover,s=o.Button,p=(o.Flex,wp.element),u=p.useState,d=p.useEffect,b=wp.i18n.__;t.a=function(e){var t=e.color,r=e.setColor,o=e.onFocus,p=u(!1),m=Object(n.a)(p,2),y=m[0],v=m[1],f=u(t),h=Object(n.a)(f,2),O=h[0],g=h[1];return d((function(){y&&t&&g(t)}),[y]),Object(a.b)("span",null,Object(a.b)(c,{css:{width:"25px",height:"25px",borderRadius:"9999px"},colorValue:t,onClick:function(){v(!y),o&&o()}}),!!y&&Object(a.b)(i,{position:"bottom left",focusOnMount:!0,onFocusOutside:function(e){v(!1)}},Object(a.b)(l,{color:t||"",onChangeComplete:function(e){return(null==e?void 0:e.hex)&&r(e)},disableAlpha:!0}),Object(a.b)("div",{css:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px"}},Object(a.b)(s,{css:{margin:"0 5px"},isTertiary:!0,onClick:function(){r({hex:null}),v(!1)}},b("Reset","presto-player")),Object(a.b)("div",{css:{display:"flex",justifyContent:"flex-end",padding:"10px"}},Object(a.b)(s,{css:{margin:"0 5px"},isTertiary:!0,onClick:function(){r({hex:O}),v(!1)}},b("Cancel","presto-player")),Object(a.b)(s,{isPrimary:!0,onClick:function(){return v(!1)}},b("Apply","presto-player"))))))}},function(e,t){e.exports=window.wp.element},function(e,t,r){"use strict";var n=r(5),a=r(23),o=r(9);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i=wp.data.useSelect;t.a=function(e){var t,r,n,l=e.src,s=e.classes,p=e.preset,u=e.branding,d=e.attributes,b=e.adminPreview,m=e.currentTime,y=e.preload,v=void 0===y?"metadata":y,f=e.overlays,h=e.type,O=d.chapters,g=d.mutedOverlay,j=d.mutedPreview,w=i((function(e){var t;return null===(t=e("presto-player/player"))||void 0===t?void 0:t.youtube()})),_=i((function(e){var t;return null===(t=e("presto-player/player"))||void 0===t?void 0:t.playerCSS()}));return React.createElement("div",{className:"wp-block-video presto-block-video",style:"audio"===h?c(c(c({"--presto-player-border-radius":"".concat(null==p?void 0:p.border_radius,"px")},null!=p&&p.background_color?{"--plyr-audio-controls-background":p.background_color}:{"--plyr-audio-controls-background":null==u?void 0:u.color}),null!=p&&p.control_color?{"--plyr-audio-control-color":p.control_color,"--plyr-range-thumb-background":p.control_color,"--plyr-range-fill-background":p.control_color,"--plyr-audio-progress-buffered-background":function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=e.replace("#","");3===r.length&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]);var n=parseInt(r.substring(0,2),16),a=parseInt(r.substring(2,4),16),o=parseInt(r.substring(4,6),16);return t>1&&t<=100&&(t/=100),"rgba("+n+","+a+","+o+","+t+")"}(p.control_color||(null==u?void 0:u.color)||"#00b3ff",.5)}:{"--plyr-audio-control-color":"#ffffff","--plyr-range-thumb-background":"#ffffff","--plyr-range-fill-background":"#ffffff"}),{},{"--plyr-range-thumb-shadow":"0px"}):c(c(c({"--presto-player-border-radius":"".concat(null==p?void 0:p.border_radius,"px")},null!=p&&p.caption_background?{"--plyr-captions-background":p.caption_background}:{}),null!=u&&u.color?{"--plyr-color-main":u.color}:{}),{},{"--presto-player-email-border-radius":"".concat((null==p||null===(t=p.email_collection)||void 0===t?void 0:t.border_radius)||0,"px"),"--presto-player-logo-width":"".concat((null==u?void 0:u.logo_width)||75,"px")})},React.createElement(a.c,{src:l,css:_,classes:s,currentTime:m,overlays:f,isAdmin:!0,preload:v,preset:p,bunny:{thumbnail:null==d?void 0:d.previewThumbnail,preview:null==d?void 0:d.preview},youtube:{channelId:null==w?void 0:w.channel_id},tracks:!(null==p||!p.captions)&&[{kind:"captions",label:"English",srclang:"en",src:"/path/to/captions.en.vtt",default:!0}],branding:u,chapters:O,blockAttributes:d,poster:d.poster,provider:"audio"===h?"audio":Object(o.a)(l),mediaTitle:d.title},React.createElement("div",{slot:"player-end"},(null==j?void 0:j.enabled)&&(null==g?void 0:g.enabled)&&React.createElement("div",{className:"presto-player__overlay is-image",style:{position:"absolute",width:"".concat((null==g?void 0:g.width)||100,"%"),left:"".concat(100*((null==g||null===(r=g.focalPoint)||void 0===r?void 0:r.x)||.5),"%"),top:"".concat(100*((null==g||null===(n=g.focalPoint)||void 0===n?void 0:n.y)||.5),"%")}},React.createElement("img",{src:null==g?void 0:g.src,style:{transform:"translateX(-50%) translateY(-50%)"}})),b)))}},function(e,t,r){"use strict";var n={setUrlPrivate:function(){var e=-1===window.location.href.indexOf("?")?"?":"&",t=window.location.href+e+"presto_video_type=private";window.history.pushState({path:t},"",t)},setUrlPublic:function(){var e=-1===window.location.href.indexOf("?")?"?":"&",t=window.location.href+e+"presto_video_type=public";window.history.pushState({path:t},"",t)},unsetUrlParams:function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=new URL(e);return t.forEach((function(e){r.searchParams.delete(e)})),r.href}(window.location.href,["presto_video_type"]);window.history.pushState({path:e},"",e)}};t.a=n},function(e,t){e.exports=window.wp.data},function(e,t,r){"use strict";var n,a=r(5),o=(n={visibility:{type:String,default:"public"},color:{type:String,default:"#00b3ff"},blockAlignment:{type:String},mutedPreview:{type:Object,default:{enabled:!1,captions:!1}},mutedOverlay:{type:Object,default:{enabled:!1,src:"",width:200,focalPoint:{x:.5,y:.5}}},mutedPreviewCaptions:{type:Boolean},mutedOverlayType:{type:String,default:"text"},mutedOverlayText:{type:String,default:"Click to play"},mutedOverlaySrc:{type:String},mutedOverlayImageWidth:{type:Number,default:200},mutedOverlayFocalPoint:{type:Object}},Object(a.a)(n,"mutedOverlay",{type:Object,default:{enabled:!1,type:"text",text:"",src:"",width:200,focalPoint:{x:.5,y:.5}}}),Object(a.a)(n,"autoplay",{type:Boolean}),Object(a.a)(n,"preload",{type:String}),Object(a.a)(n,"playsInline",{type:Boolean}),Object(a.a)(n,"id",{type:Number}),Object(a.a)(n,"attachment_id",{type:Number}),Object(a.a)(n,"src",{type:String}),Object(a.a)(n,"imageID",{type:Number}),Object(a.a)(n,"poster",{type:String}),Object(a.a)(n,"content",{type:Boolean}),Object(a.a)(n,"preset",{type:Number}),Object(a.a)(n,"chapters",{type:Array,default:[]}),Object(a.a)(n,"overlays",{type:Array,default:[]}),Object(a.a)(n,"tracks",{type:"array",items:{type:"object"},default:[]}),n);t.a={attributes:o,category:"presto",supports:{align:!0},save:function(){return null}}},function(e,t,r){"use strict";function n(e){var t,r=(e||"").match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return r&&11===(null==r||null===(t=r[2])||void 0===t?void 0:t.length)?r[2]:null}function a(e){var t=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/.exec(e||"");return(null==t?void 0:t[5])||""}function o(e){var t=a(e);if(t)return{video_id:t,type:"vimeo"};var r=n(e);return r?{video_id:r,type:"youtube"}:{$video_id:0,$type:"none"}}function l(e){return"string"==typeof e&&e.includes(".m3u8")}r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return l}))},,function(e,t,r){"use strict";var n=r(5),a=r(7),o=r(1),l=r(2),c=r.n(l),i=r(9),s=r(33);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=wp.compose.createHigherOrderComponent,b=wp.element,m=b.useEffect,y=b.useState;t.a=function(){return d((function(e){return function(t){var r=t.presets,n=t.attributes,l=t.setAttributes,p=t.defaultPreset,d=t.isSelected,b=t.branding,v=y({}),f=Object(o.a)(v,2),h=f[0],O=f[1],g=y(1),j=Object(o.a)(g,2),w=j[0],E=j[1],R=n.poster,k=n.chapters;m((function(){d&&null!=n&&n.id&&wp.data.dispatch("core/edit-post").openGeneralSidebar("edit-post/block")}),[d]),m((function(){d&&null!=n&&n.selectionOverrideClientId&&wp.data.dispatch("core/block-editor").selectBlock(null==n?void 0:n.selectionOverrideClientId)}),[d]),m((function(){if(r&&r.length){var e=r.find((function(e){return e.id===(null==n?void 0:n.preset)}));e?O(e):(O(p),l({preset:null==p?void 0:p.id}))}}),[r,null==n?void 0:n.preset]),m((function(){P()}),[R,h,k,b.logo]);var P=function(){E(w+1)},C=Object(i.f)(k);m((function(){var e=null==k?void 0:k.map((function(e){return e.time})),t=null==C?void 0:C.map((function(e){return e.time}));_.difference(e,t).length&&P()}),[k]);var x=function(){var e=Object(a.a)(c.a.mark((function e(t){var r,n,a,o,i,p,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.src,n=t.external_id,a=t.attachment_id,o=t.type,i=t.title,r||n||a){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Object(s.a)({method:"POST",path:"/presto-player/v1/videos",data:u(u({attachment_id:a,post_id:wp.data.select("core/editor").getCurrentPostId(),external_id:n},i?{title:i}:{}),{},{src:r,type:o})});case 5:p=e.sent,d=p.id,l({id:d});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null!=n&&n.preset||l({preset:null==p?void 0:p.id}),React.createElement(e,Object.assign({},t,{lockSave:function(){return wp.data.dispatch("core/editor").lockPostSaving("presto-player")},unlockSave:function(){return wp.data.dispatch("core/editor").unlockPostSaving("presto-player")},createVideo:x,onUpdate:P,onRemoveSrc:function(){confirm("Remove this video?")&&l(u(u(u(u({src:"",id:void 0},null!=n&&n.thumbnail?{thumbnail:null}:{}),null!=n&&n.preview?{preview:null}:{}),null!=n&&n.previewSrc?{previewSrc:null}:{}),null!=n&&n.previewThumbnail?{previewThumbnail:null}:{}))},presetData:h,setPresetData:O,renderKey:w}))}}),"withPlayerEdit")}},function(e,t,r){"use strict";var n=wp.data.withSelect;t.a=function(e){return n((function(e){return{branding:e("presto-player/player").branding(),loading:e("presto-player/player").isResolving("getPresets"),presets:e("presto-player/player").getPresets(),defaultPreset:e("presto-player/player").getDefaultPreset()}}))}},function(e,t,r){"use strict";var n,a=r(29),o=r(39),l=r(10),c=r(6),i=r(1),s=r(50),p=r(0),u=wp.i18n.__,d=wp.element.useState,b=wp.data,m=(b.useSelect,b.dispatch),y=wp.components,v=(y.withNotices,y.BaseControl),f=(y.Spinner,y.Button),h=function(e){var t,r=e.setAttributes,a=e.attributes,o=a.overlays,b=d(!1),y=Object(i.a)(b,2),h=y[0],O=y[1];return Object(p.b)(React.Fragment,null,Object(p.b)(v,null,Object(p.b)(f,{isPrimary:!0,onClick:function(){var e;null!==(e=prestoPlayer)&&void 0!==e&&e.isPremium?O(!0):m("presto-player/player").setProModal(!0)}},o.length?u("Update Overlays","presto-player"):u("Add Overlay","presto-player"),!!o.length&&Object(p.b)("div",{css:Object(p.a)(n||(n=Object(c.a)(["\n                font-size: 10px;\n                background: #fff;\n                color: var(--wp-admin-theme-color);\n                font-weight: bold;\n                display: inline-block;\n                line-height: 6px;\n                padding: 5px;\n                border-radius: 9999px;\n                margin-left: 10px;\n              "])))},o.length)),!(null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium)&&Object(p.b)(l.a,null)),h&&Object(p.b)(s.a,{closeModal:function(){return O(!1)},attributes:a,setAttributes:r,updateOverlayAttribute:function(e){r({overlays:e})}}))},O=r(7),g=r(5),j=r(2),w=r.n(j),_=r(9),E=r(31),R=r(35),k=r(40),P=wp.i18n.__,C=wp.components,x=C.ToggleControl,S=C.BaseControl,N=C.HorizontalRule,T=C.__experimentalAlignmentMatrixControl,D=C.SelectControl,B=function(e){var t=e.state,r=e.updateState,n=e.className;return React.createElement("div",{className:n},React.createElement(S,null,React.createElement("h3",null,P("Behavior","presto-player"))),React.createElement(S,null,React.createElement(x,{label:P("Auto-Hide Controls","presto-player"),help:P("Hide video controls automatically after 2 seconds of no mouse movement.","presto-player"),onChange:function(e){r({auto_hide:e})},checked:t.auto_hide})),React.createElement(S,null,React.createElement(x,{label:P("Save Play Position","presto-player"),help:P("Saves the user's play position so when they come back to the page they can continue the video from where they left off.","presto-player"),onChange:function(e){r({save_player_position:e})},checked:t.save_player_position})),React.createElement(S,null,React.createElement(x,{label:P("Captions On By Default","presto-player"),help:P("Toggles if captions should be active by default.","presto-player"),onChange:function(e){r({captions_enabled:e})},checked:t.captions_enabled})),React.createElement(S,null,React.createElement(x,{label:P("Focus Mode","presto-player"),help:P("Play only when tab is visible and video is in viewport.","presto-player"),onChange:function(e){r({play_video_viewport:e})},checked:t.play_video_viewport})),React.createElement(S,null,React.createElement(x,{label:P("Sticky On Scroll","presto-player"),help:P("Stick videos to the side of the screen when the page is scrolled and the video is playing.","presto-player"),onChange:function(e){r({sticky_scroll:e})},checked:t.sticky_scroll})),!!t.sticky_scroll&&React.createElement(React.Fragment,null,React.createElement(S,{label:P("Choose a position for your sticky player.","presto-player")},React.createElement(T,{value:t.sticky_scroll_position,onChange:function(e){r({sticky_scroll_position:e})}}))),React.createElement(S,null,React.createElement(D,{label:P("On Video End","presto-player"),value:t.on_video_end,options:[{value:"select",label:P("Select","presto-player")},{value:"loop",label:P("Loop","presto-player")},{value:"go-to-start",label:P("Go to start","presto-player")}],onChange:function(e){r({on_video_end:e})}})),React.createElement(N,null),React.createElement(S,null),React.createElement(S,null,React.createElement("h3",null,P("Youtube","presto-player"))),React.createElement(S,null,React.createElement(x,{label:P("Hide Youtube UI (Experimental)","presto-player"),help:P("Hides the Youtube logo and related videos.","presto-player"),onChange:function(e){r({hide_youtube:e})},checked:t.hide_youtube})),React.createElement(S,null,React.createElement(x,{label:P("Lazy Load Videos","presto-player"),help:P("Improves page loading performance by only loading the video when clicked.","presto-player"),onChange:function(e){r({lazy_load_youtube:e})},checked:t.lazy_load_youtube})))},A=wp.i18n.__,L=wp.components,I=L.ToggleControl,F=L.BaseControl,V=function(e){var t=e.state,r=e.updateState,n=e.className;return React.createElement("div",{className:n},React.createElement(F,null,React.createElement("h3",null,A("Controls","presto-player"))),React.createElement(F,{className:"presto-player__control--large-play"},React.createElement(I,{label:A("Large Play Button","presto-player"),help:A("Adds a large play button over the top of the player.","presto-player"),onChange:function(e){r({"play-large":e})},checked:t["play-large"]})),React.createElement(F,{className:"presto-player__control--rewind"},React.createElement(I,{label:A("Rewind","presto-player"),help:A("Adds a 10 second rewind button to the player.","presto-player"),onChange:function(e){r({rewind:e})},checked:t.rewind})),React.createElement(F,{className:"presto-player__control--play"},React.createElement(I,{label:A("Small Play Button","presto-player"),help:A("Adds a small play button to the bottom of the player.","presto-player"),onChange:function(e){r({play:e})},checked:t.play})),React.createElement(F,{className:"presto-player__control--fast-forward"},React.createElement(I,{label:A("Fast Forward","presto-player"),help:A("Adds a 10 second rewind button to the player.","presto-player"),onChange:function(e){r({"fast-forward":e})},checked:t["fast-forward"]})),React.createElement(F,{className:"presto-player__control--progress"},React.createElement(I,{label:A("Progress Bar","presto-player"),help:A("Shows a seekable progress bar.","presto-player"),onChange:function(e){r({progress:e})},checked:t.progress})),React.createElement(F,{className:"presto-player__control--current-time"},React.createElement(I,{label:A("Current Time","presto-player"),help:A("Shows the video timestamp.","presto-player"),onChange:function(e){r({"current-time":e})},checked:t["current-time"]})),React.createElement(F,{className:"presto-player__control--volume"},React.createElement(I,{label:A("Volume","presto-player"),help:A("Shows a volume bar.","presto-player"),onChange:function(e){r({volume:e,mute:e})},checked:t.volume})),React.createElement(F,{className:"presto-player__control--speed"},React.createElement(I,{label:A("Speed","presto-player"),help:A("Shows playback speed controls.","presto-player"),onChange:function(e){r({speed:e})},checked:t.speed})),React.createElement(F,{className:"presto-player__control--pip"},React.createElement(I,{label:A("Picture In Picture (HTML5 only)","presto-player"),help:A("Allows users to dock the player on their screen and watch when using other app on their computer.","presto-player"),onChange:function(e){r({pip:e})},checked:t.pip})),React.createElement(F,{className:"presto-player__control--fullscreen"},React.createElement(I,{label:A("Fullscreen","presto-player"),help:A("Adds a button to allow the player to be fullscreen.","presto-player"),onChange:function(e){r({fullscreen:e})},checked:t.fullscreen})),React.createElement(F,{className:"presto-player__control--captions"},React.createElement(I,{label:A("Captions","presto-player"),help:A("Shows a dedicated caption toggle button.","presto-player"),onChange:function(e){r({captions:e})},checked:t.captions})))},U=r(36),M=r(12);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){Object(g.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var H,Y,G=wp.i18n.__,q=wp.components,Z=q.ToggleControl,K=q.BaseControl,Q=q.RadioControl,X=q.Flex,$=q.RangeControl,J=wp.element.useEffect,ee=function(e){var t=e.state,r=e.updateState,n=e.className,a=t.watermark,o={text:G("Enter your watermark text.","presto-player"),position:"top-right",color:"#fff",backgroundColor:"#333",opacity:80};J((function(){Object.keys(o).forEach((function(e){var r;void 0===(null==t||null===(r=t.watermark)||void 0===r?void 0:r[e])&&l(Object(g.a)({},e,o[e]))}))}),[t]);var l=function(e){r(W(W({},t),{},{watermark:W(W({},a),e)}))};return React.createElement("div",{className:n},React.createElement(K,null,React.createElement("h3",null,G("Dynamic Watermark Text","presto-player"))),React.createElement(K,{className:"presto-player__control--watermark"},React.createElement(Z,{label:G("Enable","presto-player"),help:G("Add a simulated dynamic watermark over your video.","presto-player"),onChange:function(e){l({enabled:e})},checked:null==a?void 0:a.enabled})),(null==a?void 0:a.enabled)&&React.createElement("div",null,React.createElement(U.a,{text:null==a?void 0:a.text,update:function(e){var t=e.text;l({text:t})}}),React.createElement(K,{className:n},React.createElement(Q,{label:G("Position","presto-player"),options:[{label:"Top Right",value:"top-right"},{label:"Top Left",value:"top-left"},{label:"Change Every 10 Seconds",value:"randomize"}],selected:(null==a?void 0:a.position)||"top-right",onChange:function(e){return l({position:e})}})),React.createElement(K,{className:"presto-player__control-text-color"},React.createElement(X,null,React.createElement(K.VisualLabel,null,G("Text Color","presto-player")),React.createElement(M.a,{color:(null==a?void 0:a.color)||"#fff",setColor:function(e){return l({color:e&&e.hex})}}))),React.createElement(K,{className:"presto-player__control-text-color"},React.createElement(X,null,React.createElement(K.VisualLabel,null,G("Background Color","presto-player")),React.createElement(M.a,{color:(null==a?void 0:a.backgroundColor)||"#333",setColor:function(e){return l({backgroundColor:e&&e.hex})}}))),React.createElement(K,null,React.createElement($,{label:G("Opacity","presto-player"),help:G("Opacity percentage of the watermark.","presto-player"),value:(null==a?void 0:a.opacity)||100,onChange:function(e){return l({opacity:e})},min:0,max:100}))))},te=r(32),re=r(38),ne=wp.i18n.__,ae=wp.components,oe=ae.ToggleControl,le=ae.BaseControl,ce=ae.RangeControl,ie=ae.SelectControl,se=ae.ColorPicker,pe=function(e){var t=e.state,r=e.updateState,n=e.className;return React.createElement("div",{className:n},React.createElement(le,null,React.createElement("h3",null,ne("Style","presto-player"))),React.createElement(le,null,React.createElement(oe,{label:ne("Hide Logo","presto-player"),help:ne("Hides the logo on this video.","presto-player"),onChange:function(e){r({hide_logo:e})},checked:t.hide_logo})),React.createElement(le,null,React.createElement(ce,{label:ne("Round Corners","presto-player"),help:ne("Player border radius size.","presto-player"),value:(null==t?void 0:t.border_radius)||0,onChange:function(e){return r({border_radius:e})},min:0,max:25})),React.createElement(le,null,React.createElement(ie,{label:ne("Caption Style","presto-player"),labelPosition:"top",value:null==t?void 0:t.caption_style,options:[{label:ne("Default","presto-player"),value:"default"},{label:ne("Full","presto-player"),value:"full"}],onChange:function(e){r({caption_style:e})}})),React.createElement(le,null,React.createElement(le.VisualLabel,null,React.createElement("p",null,ne("Caption Background","presto-player"))),React.createElement(se,{color:(null==t?void 0:t.caption_background)||"#000000",onChangeComplete:function(e){r({caption_background:e.hex})},disableAlpha:!0})))};function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){Object(g.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var be=wp.i18n.__,me=wp.components,ye=me.TextControl,ve=me.BaseControl,fe=me.Icon,he=me.Notice,Oe=me.Button,ge=me.Flex,je=me.FlexItem,we=me.SelectControl,_e=me.FlexBlock,Ee=me.Modal,Re=wp.element,ke=Re.useState,Pe=Re.useEffect,Ce=wp.data,xe=Ce.useSelect,Se=Ce.dispatch;var Ne=function(e){var t=e.type,r=void 0===t?"new":t,n=e.closeModal,a=e.addPreset,o=e.onSave,l=e.updatePreset,s=e.name,u=void 0===s?"":s,d=e.preset,b=void 0===d?{"play-large":!0,rewind:!0,play:!0,"fast-forward":!0,progress:!0,"current-time":!0,mute:!0,volume:!0,speed:!1,pip:!1,fullscreen:!0,captions:!1,save_player_position:!1,reset_on_end:!1,auto_hide:!0,sticky_scroll:!1,hide_logo:!1,border_radius:0,skin:"default",caption_style:"default",caption_background:"#000000",hide_youtube:!1,lazy_load_youtube:!1,cta:{},email_collection:{},action_bar:{}}:d,m=ke(!1),y=Object(i.a)(m,2),v=y[0],f=y[1],h=ke(""),g=Object(i.a)(h,2),j=g[0],P=g[1],C=ke(""),x=Object(i.a)(C,2),S=x[0],N=x[1],T=ke(u),D=Object(i.a)(T,2),A=D[0],L=D[1],I=ke(b),F=Object(i.a)(I,2),U=F[0],M=F[1],z=xe((function(e){return e("presto-player/player").branding()})),W=ke(""),G=Object(i.a)(W,2),q=G[0],Z=G[1],K={message:be("The preset could not be saved. Please reload the page and try again.","presto-player")},Q=xe((function(e){return e("presto-player/player").youtube()}));Pe((function(){Z(Q.channel_id)}),[null==Q?void 0:Q.channel_id]);var X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};M(de(de({},U),e))},$=function(){var e=Object(O.a)(w.a.mark((function e(){var t,r,a,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,t=de(de({},U),{name:A}),e.next=5,wp.apiFetch({method:"POST",url:wp.url.addQueryArgs("".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"preset/").concat(b.id),{_method:"PUT"}),data:t});case 5:if(r=e.sent){e.next=8;break}throw K;case 8:l(r),n(),o&&o(r),Object(_.d)({message:be("Preset updated!","presto-player")}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),P(null!==e.t0&&void 0!==e.t0&&e.t0.message?e.t0.message:K);case 17:return e.prev=17,f(!1),e.finish(17);case 20:return Se("presto-player/player").updateYoutube({channel_id:q}),a=de(de({},Q),{channel_id:q}),e.prev=22,e.next=25,wp.apiFetch({path:"wp/v2/settings",method:"POST",data:{presto_player_youtube:a}});case 25:null!=(c=e.sent)&&c.presto_player_youtube&&(Se("presto-player/player").setYoutube(null==c?void 0:c.presto_player_youtube),onClose()),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(22),console.log(e.t1);case 32:case"end":return e.stop()}}),e,null,[[1,14,17,20],[22,29]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(O.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,wp.apiFetch({method:"POST",url:prestoPlayer.root+prestoPlayer.prestoVersionString+"preset",data:de(de({},{name:A}),U)});case 4:if(t=e.sent){e.next=7;break}throw K;case 7:a(t),n(),o&&o(t),Object(_.d)({message:be("Preset created!","presto-player")}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),P(null!==e.t0&&void 0!==e.t0&&e.t0.message?e.t0.message:K);case 16:return e.prev=16,f(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),ne=[{name:"controls",title:be("Controls","presto-player"),icon:Object(p.b)(fe,{icon:"admin-settings"}),component:Object(p.b)(V,{updateState:X,state:U})},{name:"behavior",title:be("Behavior","presto-player"),icon:Object(p.b)(fe,{icon:"admin-generic"}),component:Object(p.b)(B,{updateState:X,state:U})},{name:"style",title:be("Style","presto-player"),icon:Object(p.b)(fe,{icon:"admin-customizer"}),component:Object(p.b)(pe,{updateState:X,state:U})},{name:"email",title:be("Email Capture","presto-player"),icon:Object(p.b)(fe,{icon:"email"}),component:Object(p.b)(re.a,{updateState:X,state:U})},{name:"cta",title:be("Call To Action","presto-player"),icon:Object(p.b)(fe,{icon:"megaphone"}),component:Object(p.b)(te.a,{updateState:X,state:U})},{name:"action_bar",title:be("Action Bar","presto-player"),icon:Object(p.b)(fe,{icon:"cover-image"}),component:Object(p.b)(k.a,{updateState:X,state:U,value:q,setValue:Z})},{name:"watermark",title:be("Dynamic Watermark","presto-player"),icon:Object(p.b)(fe,{icon:"lock"}),component:Object(p.b)(ee,{updateState:X,state:U})}];return Object(p.b)(Ee,{title:be("edit"==r?"Edit A Video Preset":"Create A New Video Preset","presto-player"),onRequestClose:n,className:"presto-player__modal-presets",overlayClassName:"presto-player__modal-presets-overlay"},Object(p.b)("div",{className:"presto-player__preset-options","data-cy":"preset-modal"},Object(p.b)(ye,{value:A,hideLabelFromVision:!0,label:be("Preset Name","presto-player"),onChange:function(e){return L(e)},placeholder:be("Enter a preset name...","presto-player"),className:"presto-player__modal--style-name",autoFocus:!0}),Object(p.b)(ge,{align:"stretch",className:"presto-player__style-preview-area"},Object(p.b)(je,{className:"presto-player__style-sidebar"},Object(p.b)("div",null,Object(p.b)(E.a,{items:ne,title:be("Customize","presto-player"),onSelect:N},(function(e){return e.component})))),Object(p.b)(_e,{className:"presto-player__style-preview-panel"},Object(p.b)("div",{style:{position:"absolute",top:0,left:0,padding:"20px"}},Object(p.b)(we,{label:be("Skin","presto-player"),labelPosition:"side",value:null==U?void 0:U.skin,hideLabelFromVision:!0,options:[{label:be("Basic","presto-player"),value:"default"},{label:be("Stacked","presto-player"),value:"stacked"}],onChange:function(e){X({skin:e})}})),Object(p.b)(R.a,{poster:"https://source.unsplash.com/daily",state:U,branding:z,menu:S}))),Object(p.b)("br",null),j&&Object(p.b)(ve,null,Object(p.b)(he,{className:"presto-player__modal--error-notice",status:"error",isDismissible:!1,style:{margin:0}},j.replace(/(<([^>]+)>)/gi,""))),Object(p.b)("div",{css:Object(p.a)(H||(H=Object(c.a)(["\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n          "])))},Object(p.b)("div",{css:Object(p.a)(Y||(Y=Object(c.a)(["\n              opacity: 0.5;\n              font-size: 12px;\n            "])))},"Preset ID: ",b.id),Object(p.b)("div",null,Object(p.b)(Oe,{isTertiary:!0,onClick:n,style:{margin:"0 6px"}},be("Cancel","presto-player")),Object(p.b)(Oe,{isPrimary:!0,isBusy:v,disabled:v,onClick:function(){if(A)return"edit"===r?$():J();P(be("You must enter a name for the preset.","presto-player"))},"data-cy":"submit-preset"},be("edit"==r?"Update Preset":"Create Preset","presto-player"))))))},Te=wp.i18n.__,De=wp.components,Be=De.Icon,Ae=De.Spinner,Le=De.Modal,Ie=De.Button,Fe=De.ButtonGroup,Ve=wp.element.useState,Ue=function(e){var t,r,n=e.preset,a=e.index,o=e.isActive,l=e.remove,c=e.setPreset,s=e.onEdit,p=Ve(!1),u=Object(i.a)(p,2),d=u[0],b=u[1],m=Ve(!1),y=Object(i.a)(m,2),v=y[0],f=y[1],h=function(){return f(!1)},g=function(){var e=Object(O.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.id){e.next=3;break}return l(n),e.abrupt("return");case 3:return e.prev=3,b(!0),e.next=7,wp.apiFetch({method:"POST",url:wp.url.addQueryArgs("".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"preset/").concat(n.id),{_method:"DELETE"})});case 7:e.sent&&(l(n),wp.data.dispatch("core/notices").createNotice("success",Te("Preset trashed.","presto-player"),{type:"snackbar",isDismissible:!0})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0),null!==e.t0&&void 0!==e.t0&&e.t0.message&&wp.data.dispatch("core/notices").createNotice("error",e.t0.message,{type:"snackbar",isDismissible:!0});case 15:return e.prev=15,f(!1),b(!1),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[3,11,15,19]])})));return function(){return e.apply(this,arguments)}}();return d?React.createElement("div",{className:"block-editor-block-styles__item",role:"button",tabIndex:a,"aria-label":"Fill",style:{color:o?"var(--wp-admin-theme-color)":"inherit"}},React.createElement("div",{className:"block-editor-block-styles__item-preview",style:{border:o?"2px solid var(--wp-admin-theme-color)":"2px solid #e3e3e3",margin:0,display:"flex","align-items":"center","justify-content":"center"}},React.createElement(Ae,null))):React.createElement("div",{className:"block-editor-block-styles__item presto-preset-".concat(n.slug),onClick:function(){c(n)},role:"button",tabIndex:a,"aria-label":"Fill",style:{color:o?"var(--wp-admin-theme-color)":"inherit"}},React.createElement("div",{className:"block-editor-block-styles__item-preview",style:{border:o?"2px solid var(--wp-admin-theme-color)":"2px solid #e3e3e3",margin:0}},React.createElement("div",{style:{textAlign:"center",width:"100%",color:o?"var(--wp-admin-theme-color)":"inherit",opacity:o?1:.75}},null!=n&&n.icon?React.createElement(Be,{icon:null==n?void 0:n.icon,style:{fontSize:"30px",width:"30px",height:"30px"}}):React.createElement("h1",{style:{opacity:.75}},(null==n||null===(t=n.name)||void 0===t||null===(r=t.charAt(0))||void 0===r?void 0:r.toUpperCase())||"Untitled"))),React.createElement("div",{className:"block-editor-block-styles__item-label",style:{fontWeight:"bold",textTransform:"capitalize"}},(null==n?void 0:n.name)||"Untitled"),!(null!=n&&n.is_locked)&&React.createElement("div",{className:"block-editor-block-styles__item-edit"},React.createElement("div",{className:"block-editor-block-styles__item-edit-icon",onClick:s},React.createElement(Be,{icon:"edit"})),React.createElement("div",{className:"block-editor-block-styles__item-edit-icon",onClick:function(){return f(!0)}},React.createElement(Be,{icon:"trash"}))),v&&React.createElement(Le,{title:Te("Trash Preset?","presto-player"),onRequestClose:h,style:{maxWidth:"250px"}},React.createElement("p",null,React.createElement("strong",null,Te("Warning!","presto-player")," "),Te("Any videos assigned to this preset will automatically use the default preset.","presto-player")),React.createElement(Fe,null,React.createElement(Ie,{isDestructive:!0,onClick:g,style:{margin:"0 4px"}},Te("Trash","presto-player")),React.createElement(Ie,{isTertiary:!0,onClick:h,style:{margin:"0 4px",boxShadow:"none"}},Te("Cancel","presto-player")))))},Me=wp.i18n.__,ze=wp.components,We=ze.withNotices,He=ze.BaseControl,Ye=ze.Spinner,Ge=ze.Button,qe=wp.element,Ze=qe.useState,Ke=(qe.useEffect,wp.data),Qe=Ke.useSelect,Xe=Ke.dispatch;var $e=We((function(e){var t,r=e.attributes,n=e.setAttributes,a=Ze(!1),o=Object(i.a)(a,2),c=o[0],s=o[1],p=function(){return s(!1)},u=Ze(null),d=Object(i.a)(u,2),b=d[0],m=d[1],y=Ze(null),v=Object(i.a)(y,2),f=v[0],h=v[1],O=Qe((function(e){return{presets:e("presto-player/player").getPresets(),loading:e("presto-player/player").isResolving("getPresets")}})),g=O.presets,j=O.loading,w=function(e){Xe("presto-player/player").addPreset(e)},_=function(e){Xe("presto-player/player").removePreset(e)},E=function(e){n({preset:e.id})};return j?React.createElement("div",{className:"presto-settings__loading"},React.createElement(Ye,null)):React.createElement(React.Fragment,null,g.length?React.createElement("p",null,Me("Select a video configuration preset, or add your own.","presto-player")):"",React.createElement(He,null,React.createElement("div",{className:"block-editor-block-styles"},(g||[]).length?g.map((function(e,t){return React.createElement(Ue,{setPreset:E,index:t,isActive:(null==r?void 0:r.preset)===e.id,preset:e,key:e.id,onEdit:function(){h(e.name),m(e),s("edit")},remove:_})})):Me("No style presets. You can create a new style by clicking 'Add New Style'.","presto-plugin"))),React.createElement(He,null,React.createElement(Ge,{isPrimary:!0,"data-cy":"add-new-preset",onClick:function(){var e;null!==(e=prestoPlayer)&&void 0!==e&&e.isPremium?s("new"):Xe("presto-player/player").setProModal(!0)}},Me("Add New Preset","presto-player")),!(null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium)&&React.createElement(l.a,null)),"new"==c&&React.createElement(Ne,{closeModal:p,addPreset:w,type:"new",onSave:E}),"edit"==c&&React.createElement(Ne,{closeModal:p,addPreset:w,updatePreset:function(e){Xe("presto-player/player").updatePreset(e)},type:"edit",preset:b,name:f}))})),Je=r(18);function et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?et(Object(r),!0).forEach((function(t){Object(g.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var rt=wp.i18n.__,nt=wp.components,at=(nt.PanelRow,nt.TextControl,nt.SelectControl,nt.BaseControl),ot=nt.Button,lt=nt.FocalPointPicker,ct=nt.RangeControl,it=wp.blockEditor,st=it.MediaUpload,pt=it.MediaUploadCheck,ut=(wp.element.useState,["image"]),dt=function(e){var t=e.attributes,r=e.setAttributes,n=e.instanceId,a=t.mutedOverlay,o="video-block__overlay-image-description-".concat(n);return React.createElement(React.Fragment,null,React.createElement(pt,null,React.createElement(at,{className:"editor-video-overlay-control"},React.createElement(at.VisualLabel,null,React.createElement("p",null,rt("Overlay Image","presto-player"))),React.createElement(st,{title:rt("Select overlay image","presto-player"),onSelect:function(e){r({mutedOverlay:tt(tt({},a),{src:e.url})})},allowedTypes:ut,render:function(e){var t=e.open;return React.createElement(ot,{className:"presto-setting__poster",isPrimary:!0,onClick:t},null!=a&&a.src?rt("Replace","presto-player"):rt("Select","presto-player"))}}),React.createElement("p",{id:o,hidden:!0},null!=a&&a.src?sprintf(rt("The current overlay image url is %s","presto-player"),null==a?void 0:a.src):rt("There is no overlay image currently selected","presto-player")),!(null==a||!a.src)&&React.createElement(ot,{onClick:function(){r({mutedOverlay:tt(tt({},a),{src:""})})},className:"presto-setting__remove-poster",isTertiary:!0},rt("Remove","presto-player")))),!(null==a||!a.src)&&React.createElement(lt,{url:"",dimensions:{width:160,height:90},value:null==a?void 0:a.focalPoint,onChange:function(e){return r({mutedOverlay:tt(tt({},a),{focalPoint:e})})}}),!(null==a||!a.src)&&React.createElement(ct,{label:rt("Max Width (%)","presto-player"),value:null==a?void 0:a.width,onChange:function(e){return r({mutedOverlay:tt(tt({},a),{width:e})})},min:1,max:100}))};function bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(r),!0).forEach((function(t){Object(g.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var yt=wp.i18n.__,vt=wp.components,ft=vt.ToggleControl,ht=vt.SelectControl,Ot=vt.BaseControl,gt=vt.Button,jt=vt.PanelRow,wt=vt.Icon,_t=vt.Flex,Et=wp.data.dispatch,Rt=wp.blockEditor,kt=Rt.MediaUpload,Pt=Rt.MediaUploadCheck,Ct=["image"],xt=wp.compose.useInstanceId,St=function e(t){var r=t.setAttributes,n=t.attributes,a=n.mutedPreview,o=n.autoplay,c=n.playsInline,i=n.preload,s=n.poster,p=n.mutedOverlay,u=xt(e),d="video-block__poster-image-description-".concat(u),b=function(e){return function(t){r(Object(g.a)({},e,t))}};var m,y;return React.createElement(React.Fragment,null,!o&&React.createElement(React.Fragment,null,React.createElement(ft,{label:React.createElement(React.Fragment,null,yt("Muted Autoplay Preview","presto-player")," ",!(null!==(m=prestoPlayer)&&void 0!==m&&m.isPremium)&&React.createElement(l.a,null)),onChange:function(e){var t;null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium?r({mutedPreview:mt(mt({},a),{enabled:e})}):Et("presto-player/player").setProModal(!0)},checked:null==a?void 0:a.enabled,className:"presto-setting__mutedPreview",help:yt("Shows a muted preview of the video.","presto-player")}),!(null==a||!a.enabled)&&!(null!=n&&n.video_id)&&React.createElement(jt,null,React.createElement(ft,{label:yt("Muted Preview Captions","presto-player"),onChange:function(e){r({mutedPreview:mt(mt({},a),{captions:e})})},checked:null==a?void 0:a.captions,className:"presto-setting__mutedPreviewCaptions",help:yt("Play captions during muted autoplay","presto-player")})),!!a.enabled&&React.createElement(jt,null,React.createElement(ft,{label:React.createElement(React.Fragment,null,yt("Muted Preview Overlay","presto-player")," ",!(null!==(y=prestoPlayer)&&void 0!==y&&y.isPremium)&&React.createElement(l.a,null)),onChange:function(e){var t;null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium?r({mutedOverlay:mt(mt({},p),{enabled:e})}):Et("presto-player/player").setProModal(!0)},checked:null==p?void 0:p.enabled,className:"presto-setting__mutedOverlay",help:yt("Show an image over the top of the video either before or after the video.","presto-player")})),(null==p?void 0:p.enabled)&&(null==a?void 0:a.enabled)&&React.createElement(dt,{attributes:n,setAttributes:r})),!(null!=a&&a.enabled)&&React.createElement(ft,{label:yt("Autoplay","presto-player"),className:"presto-setting__autoplay",onChange:b("autoplay"),checked:o,help:function(e){return e?yt("Note: Autoplaying videos may cause usability issues for some visitors.","presto-player"):null}}),React.createElement(jt,null,React.createElement(ft,{label:yt("Play inline","presto-player"),className:"presto-setting__playsInline","data-cy":"playsInline",onChange:b("playsInline"),checked:c,help:yt("On mobile browsers, play the video on the page instead of opening it up fullscreen.","presto-player")})),!(null!=n&&n.video_id)&&React.createElement(jt,null,React.createElement(ht,{label:React.createElement(_t,null,React.createElement("div",null,yt("Performance Preference","presto-player")),React.createElement("a",{href:"https://prestoplayer.com/docs/performance-preferences-explained",target:"_blank",style:{textDecoration:"none"}},React.createElement(wt,{icon:"editor-help"}))),className:"presto-setting__preload",value:i,onChange:function(e){return r({preload:e})},help:(!!(null!=n&&n.src&&Object(Je.d)(null==n?void 0:n.src)&&["metadata","none"].includes(i))||"none"===i&&!s)&&yt("A poster image is recommended for this setting.","presto-player"),options:[{value:"auto",label:yt("Video Playback Speed","presto-player")},{value:"metadata",label:yt("Page Load Speed","presto-player")},{value:"none",label:yt("Page Load Speed (Extreme)","presto-player")}]})),React.createElement(Pt,null,React.createElement(Ot,{className:"editor-video-poster-control"},React.createElement(Ot.VisualLabel,null,React.createElement("p",null,yt("Poster image","presto-player"))),React.createElement(kt,{title:yt("Select poster image","presto-player"),onSelect:function(e){r({poster:e.url})},allowedTypes:Ct,render:function(e){var t=e.open;return React.createElement(gt,{className:"presto-setting__poster",isPrimary:!0,onClick:t,"aria-describedby":d},yt(s?"Replace":"Select","presto-player"))}}),React.createElement("p",{id:d,hidden:!0},s?sprintf(yt("The current poster image url is %s","presto-player"),s):yt("There is no poster image currently selected","presto-player")),!!s&&React.createElement(gt,{onClick:function(){r({poster:""})},className:"presto-setting__remove-poster",isTertiary:!0},yt("Remove","presto-player")))))},Nt=wp.components.PanelBody,Tt=wp.i18n.__;t.a=function(e){var t,r,n,c,i=e.attributes,s=e.setAttributes;return React.createElement(React.Fragment,null,React.createElement(Nt,{title:React.createElement(React.Fragment,null,Tt("Chapters","presto-player")," ",!(null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium)&&React.createElement(l.a,null)),initialOpen:null===(r=prestoPlayer)||void 0===r?void 0:r.isPremium},React.createElement(o.a,{setAttributes:s,attributes:i})),React.createElement(Nt,{title:React.createElement(React.Fragment,null,Tt("Overlays","presto-player")," ",!(null!==(n=prestoPlayer)&&void 0!==n&&n.isPremium)&&React.createElement(l.a,null)),initialOpen:null===(c=prestoPlayer)||void 0===c?void 0:c.isPremium},React.createElement(h,{setAttributes:s,attributes:i})),React.createElement(Nt,{title:Tt("Video settings","presto-player")},React.createElement(St,{setAttributes:s,attributes:i})),React.createElement(Nt,{title:Tt("Video Preset","presto-player")},React.createElement($e,{setAttributes:s,attributes:i})),React.createElement(Nt,{title:Tt("Global Player Branding","presto-player"),initialOpen:!1},React.createElement(a.a,{setAttributes:s,attributes:i})))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return w})),r.d(t,"c",(function(){return _}));var n=r(46),a=r(47),o=r(53),l=r(54),c=r(44),i=r(26),s=r.n(i),p=function(e){return e.replace(/([A-Z])/g,(function(e){return"-".concat(e[0].toLowerCase())}))},u=r(48),d=function(e,t,r){var n=t.className||t.class,a=r.className||r.class,o=y(e),l=y(n?n.split(" "):[]),c=y(a?a.split(" "):[]),i=[];return o.forEach((function(e){l.has(e)?(i.push(e),l.delete(e)):c.has(e)||i.push(e)})),l.forEach((function(e){return i.push(e)})),i.join(" ")},b=function(e){if("undefined"==typeof document)return!0;var t="on"+e,r=t in document;if(!r){var n=document.createElement("div");n.setAttribute(t,"return;"),r="function"==typeof n[t]}return r},m=function(e,t,r){var n=e.__events||(e.__events={}),a=n[t];a&&e.removeEventListener(t,a),e.addEventListener(t,n[t]=function(e){r&&r.call(this,e)})},y=function(e){var t=new Map;return e.forEach((function(e){return t.set(e,e)})),t},v=function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)},f=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){t.forEach((function(t){v(t,e)}))}};function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var O=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},g=function(e,t,r,l){void 0!==l&&l();var c=e.toLowerCase().split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(""),i=function(t){Object(o.a)(i,t);var l=h(i);function i(e){var t;return Object(n.a)(this,i),(t=l.call(this,e)).setComponentElRef=function(e){t.componentEl=e},t}return Object(a.a)(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate(this.props)}},{key:"componentDidUpdate",value:function(e){!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof Element){var n=d(e.classList,t,r);""!==n&&(e.className=n),Object.keys(t).forEach((function(r){if("children"!==r&&"style"!==r&&"ref"!==r&&"class"!==r&&"className"!==r&&"forwardedRef"!==r)if(0===r.indexOf("on")&&r[2]===r[2].toUpperCase()){var n=r.substring(2),a=n[0].toLowerCase()+n.substring(1);b(a)||m(e,a,t[r])}else{e[r]=t[r],"string"===Object(u.a)(t[r])&&e.setAttribute(p(r),t[r])}}))}}(this.componentEl,this.props,e)}},{key:"render",value:function(){var t=this.props,n=t.children,a=t.forwardedRef,o=t.style,l=(t.className,t.ref,O(t,["children","forwardedRef","style","className","ref"])),c=Object.keys(l).reduce((function(e,t){if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){var r=t.substring(2).toLowerCase();"undefined"!=typeof document&&b(r)&&(e[t]=l[t])}else e[t]=l[t];return e}),{});r&&(c=r(this.props,c));var i=Object.assign(Object.assign({},c),{ref:f(a,this.setComponentElRef),style:o});return s.a.createElement(e,i,n)}}],[{key:"displayName",get:function(){return c}}]),i}(s.a.Component);return t&&(i.contextType=t),function(e,t){var r=function(t,r){return s.a.createElement(e,Object.assign({},t,{forwardedRef:r}))};return r.displayName=t,s.a.forwardRef(r)}(i,c)},j=g("presto-cta-overlay-ui"),w=g("presto-email-overlay-ui"),_=g("presto-player")},function(e,t){e.exports=window.wp.blockEditor},function(e,t,r){"use strict";var n,a,o,l,c,i,s=r(6),p=r(5),u=r(1),d=r(0);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=wp.i18n.__,v=wp.components,f=v.Button,h=v.Popover,O=v.Icon,g=wp.blockEditor.__experimentalLinkControl,j=wp.element.useState,w=wp.url.prependHTTP;t.a=function(e){var t=e.setSettings,r=e.settings,p=j(!1),b=Object(u.a)(p,2),v=b[0],_=b[1],E=r.url,R=j(),k=Object(u.a)(R,2),P=k[0],C=k[1],x=m({url:null==r?void 0:r.url,type:null==r?void 0:r.type,id:null==r?void 0:r.id,opensInNewTab:null==r?void 0:r.opensInNewTab},P),S=function(e){e=m(m({},P),e);var r=x.opensInNewTab!==e.opensInNewTab&&x.url===e.url&&void 0===e.url;if(C(r?e:void 0),!r){var n=w(e.url);t({url:n,type:e.type,id:void 0!==e.id&&null!==e.id?String(e.id):void 0,opensInNewTab:e.opensInNewTab})}};return Object(d.b)("span",null,E?Object(d.b)("div",{css:Object(d.a)(n||(n=Object(s.a)(["\n            display: flex;\n            justify-content: space-between;\n          "])))},Object(d.b)("div",{css:Object(d.a)(a||(a=Object(s.a)(["\n              max-width: 85%;\n              overflow: hidden;\n              display: flex;\n              align-items: center;\n            "])))},Object(d.b)("a",{href:"#",css:Object(d.a)(o||(o=Object(s.a)(["\n                padding: 10px;\n                background: #f3f3f3;\n                border-radius: 4px;\n                width: 100%;\n                display: inline-flex;\n                align-items: center;\n                white-space: nowrap;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                text-decoration: none;\n              "]))),onClick:function(){return _(!v)}},Object(d.b)(O,{icon:"edit",css:Object(d.a)(l||(l=Object(s.a)(["\n                  cursor: pointer;\n                  opacity: 0.75;\n                  margin: 0 2px;\n                  font-size: 16px;\n                  width: 16px;\n                  height: 16px;\n                  text-decoration: none;\n                "])))}),E),v&&Object(d.b)(h,{position:"bottom center",onClose:function(){return _(!1)}},Object(d.b)(g,{value:r,onChange:S}))),Object(d.b)("div",{css:Object(d.a)(c||(c=Object(s.a)(["\n              display: flex;\n              align-items: center;\n            "])))},Object(d.b)(O,{onClick:function(){confirm(y("Are you sure you wish to remove this link?","presto-player"))&&t({})},icon:"trash",className:"presto-icon",css:Object(d.a)(i||(i=Object(s.a)(["\n                cursor: pointer;\n                opacity: 0.75;\n                margin: 0 2px;\n                fontsize: 18px;\n                width: 18px;\n                height: 18px;\n\n                &:hover {\n                  color: #cc1818;\n                }\n              "])))}))):Object(d.b)("span",null,Object(d.b)(f,{isPrimary:!0,isSmall:!0,onClick:function(){return _(!v)}},y("Add Link","presto-player")),v&&Object(d.b)(h,{position:"bottom center",onClose:function(){return _(!1)}},Object(d.b)(g,{value:r,onChange:S}))))}},,,,function(e,t,r){"use strict";var n=r(7),a=r(1),o=r(2),l=r.n(o),c=r(10),i=wp.i18n.__,s=wp.components,p=s.ColorPicker,u=s.Button,d=s.withNotices,b=s.BaseControl,m=s.RangeControl,y=wp.blockEditor,v=y.MediaUpload,f=y.MediaUploadCheck,h=wp.compose.useInstanceId,O=wp.element.useState,g=wp.data,j=g.dispatch,w=g.useSelect,_=["image"];t.a=d((function e(t){t.setAttributes,t.attributes;var r,o=t.type,s=h(e),d=O(1),y=Object(a.a)(d,2),g=y[0],E=y[1],R=w((function(e){return e("presto-player/player").branding()})),k=function(){var e=Object(n.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("presto-player/player").saveOptions({branding:R});case 2:wp.data.dispatch("core/notices").createNotice("success","Player branding saved.",{type:"snackbar",isDismissible:!0});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement("div",{className:"presto-player__panel--branding"},"audio"!==o&&React.createElement("p",null,i("Here you can select the global player branding This will apply to all players on the site.","presto-player")),React.createElement(f,null,React.createElement(b,{className:"editor-video-poster-control"},"audio"!==o&&React.createElement(React.Fragment,null,React.createElement(b.VisualLabel,null,React.createElement("p",null,i("Logo Overlay","presto-player")," ",!(null!==(r=prestoPlayer)&&void 0!==r&&r.isPremium)&&React.createElement(c.a,null))),React.createElement(v,{title:i("Select logo overlay image","presto-player"),onSelect:function(e){j("presto-player/player").updateBranding("logo",e.url)},allowedTypes:_,render:function(e){var t=e.open;return React.createElement(u,{className:"presto-setting__logo",isSecondary:!0,onClick:function(){var e;null!==(e=prestoPlayer)&&void 0!==e&&e.isPremium?t():j("presto-player/player").setProModal(!0)},"aria-describedby":"video-block__logo-image-description-".concat(s)},null!=R&&R.logo?i("Replace","presto-player"):i("Select","presto-player"))}})),React.createElement("p",{id:"video-block__logo-image-description-".concat(s),hidden:!0},null!=R&&R.logo?sprintf(i("The current logo image url is %s","presto-player"),null==R?void 0:R.logo):i("There is no logo image currently selected","presto-player")),!(null==R||!R.logo)&&React.createElement(u,{onClick:function(){j("presto-player/player").updateBranding("logo","")},isTertiary:!0},i("Remove","presto-player")))),!(null==R||!R.logo)&&React.createElement(m,{label:i("Logo Max Width","presto-player"),value:(null==R?void 0:R.logo_width)||150,onChange:function(e){return j("presto-player/player").updateBranding("logo_width",e)},min:1,max:400}),React.createElement(p,{color:null==R?void 0:R.color,onChangeComplete:function(e){j("presto-player/player").updateBranding("color",e.hex)},key:g,disableAlpha:!0}),(null==R?void 0:R.color)&&React.createElement(b,null,React.createElement(u,{isSecondary:!0,onClick:function(){var e,t;j("presto-player/player").updateBranding("color",(null===(e=prestoPlayer)||void 0===e||null===(t=e.defaults)||void 0===t?void 0:t.color)||"#00b3ff"),E(g+1)}},i("Reset Color","presto-player"))),React.createElement(u,{isPrimary:!0,onClick:k},i("Save Branding","presto-player")))}))},function(e,t){e.exports=window.wp.compose},function(e,t,r){"use strict";var n=r(5),a=r(1),o=r(19),l=r.n(o),c=wp.i18n.__,i=wp.element,s=i.useState,p=i.useEffect,u=lodash,d=u.partial,b=u.noop,m=u.find,y=wp.components,v=y.NavigableMenu,f=y.Animate;t.a=function(e){var t,r=e.className,o=e.children,i=e.items,u=e.title,y=e.orientation,h=void 0===y?"horizontal":y,O=e.activeClass,g=void 0===O?"is-active":O,j=e.onSelect,w=void 0===j?b:j,_=s(null),E=Object(a.a)(_,2),R=E[0],k=E[1],P=s("left"),C=Object(a.a)(P,2),x=(C[0],C[1]),S=function(e){k(e),w&&w(e)},N=function(e,t){t.click()},T=m(i,{name:R}),D="".concat(null!==(t=null==T?void 0:T.name)&&void 0!==t?t:"none");return p((function(){x(R?"right":"left")}),[R]),React.createElement("div",{className:r},React.createElement(f,{type:"slide-in",origin:T?"right":"left"},(function(e){var t=e.className;return T?React.createElement("div",{key:D,"aria-labelledby":D,role:"itempanel",id:"".concat(D,"-view"),className:l()(t,"presto-player__menu-content")},React.createElement("div",{className:"presto-player__menu-items"},React.createElement("div",{className:"presto-player__menu-item is-back-button",onClick:function(){return S("")}},React.createElement("svg",{class:"back-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",role:"img","aria-hidden":"true",focusable:"false"},React.createElement("path",{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})),c("Back","presto-player"))),o(T)):React.createElement("div",{className:l()(t,"is-from-right")},!!u&&React.createElement("h2",null,u),React.createElement(v,{role:"itemlist",orientation:h,onNavigate:N,className:l()("presto-player__menu-items")},i.map((function(e){return React.createElement("div",{className:l()("presto-player__menu-item",e.className,Object(n.a)({},g,e.name===R)),itemId:"".concat(e.name),"aria-controls":"".concat(e.name,"-view"),selected:e.name===R,key:e.name,onClick:d(S,e.name)},!!e.icon&&React.createElement("div",{class:"presto-player__menu-icon"},e.icon),e.title,React.createElement("svg",{className:"submenu-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",role:"img",ariaHidden:"true",focusable:"false"},React.createElement("path",{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"})))}))))})))}},function(e,t,r){"use strict";var n,a,o=r(6),l=r(5),c=r(3),i=r(4),s=r(13),p=r(16),u=r(25),d=r(12),b=r(0);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e){var t=e.state,r=e.updateState,m=e.className,v=t.cta,f=t.email_collection,h=Object(p.useSelect)((function(e){return e("presto-player/player").branding()})),O={percentage:100,show_rewatch:!0,show_skip:!0,headline:Object(c.__)("Want to learn more?","presto-player"),show_button:!0,button_text:Object(c.__)("Click Here","presto-player"),button_link:{opensInNewTab:!0}};Object(s.useEffect)((function(){Object.keys(O).forEach((function(e){var r;void 0===(null==t||null===(r=t.cta)||void 0===r?void 0:r[e])&&g(Object(l.a)({},e,O[e]))}))}),[t]);var g=function(e){r(y(y({},t),{},{cta:y(y({},v),e)}))};return Object(b.b)("div",{className:m},Object(b.b)(i.BaseControl,null,Object(b.b)("h3",null,Object(c.__)("Call To Action","presto-player"))),Object(b.b)(i.BaseControl,{className:"presto-player__control--large-play"},Object(b.b)(i.ToggleControl,{label:Object(c.__)("Enable","presto-player"),help:Object(c.__)("Show an email collection form and message over your player.","presto-player"),onChange:function(e){g({enabled:e})},checked:null==v?void 0:v.enabled})),!(null==v||!v.enabled)&&Object(b.b)(React.Fragment,null,Object(b.b)(i.BaseControl,{className:"presto-player__control--percentage-watched"},Object(b.b)(i.RangeControl,{label:Object(c.__)("Display At (Percentage)","presto-player"),labelPosition:"top",onChange:function(e){g({percentage:e})},marks:[{value:0,label:Object(c.__)("Start","presto-player")},{value:50,label:Object(c.__)("50% Watched","presto-player")},{value:100,label:Object(c.__)("End","presto-player")}],shiftStep:5,value:null==v?void 0:v.percentage})),(null==f?void 0:f.enabled)&&(null==f?void 0:f.percentage)===(null==v?void 0:v.percentage)&&Object(b.b)(i.Notice,{css:Object(b.a)(n||(n=Object(o.a)(["\n                  margin: 0 0 30px 0 !important;\n                "]))),status:"warning",isDismissible:!1},Object(c.__)("You already have an email capture set display at the same time.","presto-player"),Object(b.b)(i.Button,{onClick:function(){r(y(y({},t),{},{email_collection:y(y({},f),{enabled:!1})}))},isLink:!0,css:Object(b.a)(a||(a=Object(o.a)(["\n                    margin-top: 10px !important;\n                  "])))},Object(c.__)("Disable Email Capture","presto-player"))),100===(null==v?void 0:v.percentage)?Object(b.b)(i.BaseControl,{className:"presto-player__control--show-rewatch"},Object(b.b)(i.ToggleControl,{label:Object(c.__)("Show Rewatch Button","presto-player"),help:Object(c.__)("Show a rewatch button at the end of the player.","presto-player"),onChange:function(e){g({show_rewatch:e})},checked:null==v?void 0:v.show_rewatch})):Object(b.b)(i.BaseControl,{className:"presto-player__control--show-skip"},Object(b.b)(i.ToggleControl,{label:Object(c.__)("Allow Skipping","presto-player"),help:Object(c.__)("Let the user continue watching the player.","presto-player"),onChange:function(e){g({show_skip:e})},checked:null==v?void 0:v.show_skip})),Object(b.b)(i.BaseControl,{className:"presto-player__control--button-link"},Object(b.b)(i.BaseControl.VisualLabel,null,Object(b.b)("p",null," ",Object(c.__)("Link","presto-player"))),Object(b.b)(u.a,{setSettings:function(e){g({button_link:e})},settings:(null==v?void 0:v.button_link)||{}})),Object(b.b)(i.BaseControl,{className:"presto-player__control--headline"},Object(b.b)(i.TextareaControl,{label:Object(c.__)("Headline","presto-player"),help:Object(c.__)("The headline for your form.","presto-player"),value:null==v?void 0:v.headline,onChange:function(e){g({headline:e})}})),Object(b.b)(i.BaseControl,{className:"presto-player__control--bottom-text"},Object(b.b)(i.TextareaControl,{label:Object(c.__)("Bottom Text","presto-player"),help:Object(c.__)("Text displayed below the form. HTML allowed.","presto-player"),value:null==v?void 0:v.bottom_text,onChange:function(e){g({bottom_text:e})}})),Object(b.b)(i.BaseControl,{className:"presto-player__control--show-button"},Object(b.b)(i.ToggleControl,{label:Object(c.__)("Show Button","presto-player"),help:Object(c.__)("Show a call to action button.","presto-player"),onChange:function(e){g({show_button:e})},checked:null==v?void 0:v.show_button})),!(null==v||!v.show_button)&&Object(b.b)("div",null,Object(b.b)(i.BaseControl,{className:"presto-player__control--button-text"},Object(b.b)(i.TextControl,{label:Object(c.__)("Button Text","presto-player"),help:Object(b.b)("p",null,Object(c.__)("Button text for the Call To Action","presto-player")),value:null==v?void 0:v.button_text,onChange:function(e){return g({button_text:e})}})),Object(b.b)("h3",null,Object(c.__)("Style","presto-player")),Object(b.b)(i.BaseControl,null,Object(b.b)(i.RangeControl,{label:Object(c.__)("Round Corners","presto-player"),help:Object(c.__)("Border radius of form elements.","presto-player"),value:(null==v?void 0:v.button_radius)||0,onChange:function(e){return g({button_radius:e})},min:0,max:25})),Object(b.b)(i.BaseControl,{className:"presto-player__control--button-color"},Object(b.b)(i.Flex,null,Object(b.b)(i.BaseControl.VisualLabel,null,Object(c.__)("Button Color","presto-player")),Object(b.b)(d.a,{color:(null==v?void 0:v.button_color)||(null==h?void 0:h.color),setColor:function(e){return g({button_color:e&&e.hex})}}))),Object(b.b)(i.BaseControl,{className:"presto-player__control--button-text-color"},Object(b.b)(i.Flex,null,Object(b.b)(i.BaseControl.VisualLabel,null,Object(c.__)("Button Text Color","presto-player")),Object(b.b)(d.a,{color:(null==v?void 0:v.button_text_color)||"#ffffff",setColor:function(e){return g({button_text_color:e&&e.hex})}})))),Object(b.b)(i.BaseControl,null,Object(b.b)(i.RangeControl,{label:Object(c.__)("Background Opacity","presto-player"),help:Object(c.__)("Opacity percentage of the cover background.","presto-player"),value:(null==v?void 0:v.background_opacity)||75,onChange:function(e){return g({background_opacity:e})},min:0,max:100}))))}v.defaultProps={catName:"Sandy",eyeColor:"deepblue",age:"120"},t.a=v},function(e,t,r){"use strict";var n=wp.apiFetch;n.use(n.createNonceMiddleware(prestoPlayer.nonce)),n.use(n.createRootURLMiddleware(prestoPlayer.root+prestoPlayer.prestoVersionString)),t.a=n},function(e,t,r){"use strict";r.d(t,"a",(function(){return N}));var n=r(8),a=r(49),o=r(1),l=r(5);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=wp.i18n,p=s.__,u=s.sprintf,d=wp.components,b=d.NavigableMenu,m=d.MenuItem,y=d.FormFileUpload,v=d.MenuGroup,f=d.ToolbarGroup,h=d.ToolbarButton,O=d.Dropdown,g=(d.SVG,d.Rect,d.Path,d.Button),j=d.TextControl,w=(d.SelectControl,wp.blockEditor),_=w.MediaUpload,E=w.MediaUploadCheck,R=wp.data.useSelect,k=wp.element.useState,P=["text/vtt"],C=React.createElement("svg",{viewBox:"0 0 29 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5014 20.2854H28.6316V0.764648H0.110825V20.2854H11.241L14.3712 24.2854L17.5014 20.2854ZM14.3712 21.0401L16.5269 18.2854H26.6316V2.76465H2.11082V18.2854H12.2155L14.3712 21.0401Z"}),React.createElement("path",{d:"M10.4503 14.9446C9.56226 14.9446 8.76226 14.7606 8.05026 14.3926C7.33826 14.0166 6.77826 13.4966 6.37026 12.8326C5.97026 12.1606 5.77026 11.4006 5.77026 10.5526C5.77026 9.70464 5.97026 8.94864 6.37026 8.28464C6.77826 7.61264 7.33826 7.09264 8.05026 6.72464C8.76226 6.34864 9.56226 6.16064 10.4503 6.16064C11.2663 6.16064 11.9943 6.30464 12.6343 6.59264C13.2743 6.88064 13.8023 7.29664 14.2183 7.84064L12.4303 9.43664C11.9103 8.78064 11.2983 8.45264 10.5943 8.45264C10.0023 8.45264 9.52626 8.64464 9.16626 9.02864C8.80626 9.40464 8.62626 9.91264 8.62626 10.5526C8.62626 11.1926 8.80626 11.7046 9.16626 12.0886C9.52626 12.4646 10.0023 12.6526 10.5943 12.6526C11.2983 12.6526 11.9103 12.3246 12.4303 11.6686L14.2183 13.2646C13.8023 13.8086 13.2743 14.2246 12.6343 14.5126C11.9943 14.8006 11.2663 14.9446 10.4503 14.9446Z"}),React.createElement("path",{d:"M19.2042 14.9446C18.3162 14.9446 17.5162 14.7606 16.8042 14.3926C16.0922 14.0166 15.5322 13.4966 15.1242 12.8326C14.7242 12.1606 14.5242 11.4006 14.5242 10.5526C14.5242 9.70464 14.7242 8.94864 15.1242 8.28464C15.5322 7.61264 16.0922 7.09264 16.8042 6.72464C17.5162 6.34864 18.3162 6.16064 19.2042 6.16064C20.0202 6.16064 20.7482 6.30464 21.3882 6.59264C22.0282 6.88064 22.5562 7.29664 22.9722 7.84064L21.1842 9.43664C20.6642 8.78064 20.0522 8.45264 19.3482 8.45264C18.7562 8.45264 18.2802 8.64464 17.9202 9.02864C17.5602 9.40464 17.3802 9.91264 17.3802 10.5526C17.3802 11.1926 17.5602 11.7046 17.9202 12.0886C18.2802 12.4646 18.7562 12.6526 19.3482 12.6526C20.0522 12.6526 20.6642 12.3246 21.1842 11.6686L22.9722 13.2646C22.5562 13.8086 22.0282 14.2246 21.3882 14.5126C20.7482 14.8006 20.0202 14.9446 19.2042 14.9446Z"}));function x(e){var t,r=e.tracks,n=e.onEditPress;return t=0===r.length?React.createElement("p",{className:"block-library-video-tracks-editor__tracks-informative-message"},p("Captions are .vtt files that help make your content more accesible to a wider range of users.","presto-player")):r.map((function(e,t){return React.createElement("div",{key:t,className:"block-library-video-tracks-editor__track-list-track"},React.createElement("span",null,e.label," "),React.createElement(g,{isTertiary:!0,onClick:function(){return n(t)},"aria-label":u(p("Edit %s","presto-player"),e.label)},p("Edit","presto-player")))})),React.createElement(v,{label:p("Captions","presto-player"),className:"block-library-video-tracks-editor__track-list"},t)}function S(e){var t=e.track,r=e.onChange,n=e.onClose,a=e.onRemove,o=t.src,l=void 0===o?"":o,c=t.label,s=void 0===c?"":c,u=t.srcLang,d=void 0===u?"":u,m=(t.kind,l.startsWith("blob:")?"":l.substring(l.lastIndexOf("/")+1));return React.createElement(b,null,React.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor"},React.createElement("span",{className:"block-library-video-tracks-editor__single-track-editor-edit-track-label"},p("Edit caption track","presto-player")),React.createElement("span",null,p("File","presto-player"),": ",React.createElement("b",null,m)),React.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor-label-language"},React.createElement(j,{autoFocus:!0,onChange:function(e){return r(i(i({},t),{},{label:e}))},label:p("Label","presto-player"),value:s,help:p("Title of track","presto-player")}),React.createElement(j,{onChange:function(e){return r(i(i({},t),{},{srcLang:e}))},label:p("Source language","presto-player"),value:d,help:p("Language tag (en, fr, etc.)","presto-player")})),React.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor-buttons-container"},React.createElement(g,{isSecondary:!0,onClick:function(){var e={},a=!1;""===s&&(e.label=p("English","presto-player"),a=!0),""===d&&(e.srcLang="en",a=!0),a&&r(i(i({},t),e)),n()}},p("Close","presto-player")),React.createElement(g,{isDestructive:!0,isLink:!0,onClick:a},p("Remove track","presto-player")))))}function N(e){var t=e.tracks,r=void 0===t?[]:t,l=e.onChange,c=R((function(e){return e("core/block-editor").getSettings().mediaUpload}),[]),s=k(null),u=Object(o.a)(s,2),d=u[0],g=u[1];return c?React.createElement(O,{contentClassName:"block-library-video-tracks-editor",renderToggle:function(e){var t=e.isOpen,r=e.onToggle;return React.createElement(f,null,React.createElement(h,{label:p("Captions","presto-player"),showTooltip:!0,"aria-expanded":t,"aria-haspopup":"true",onClick:r,icon:C}))},renderContent:function(e){return Object(a.a)(e),null!==d?React.createElement(S,{track:r[d],onChange:function(e){var t=Object(n.a)(r);t[d]=e,l(t)},onClose:function(){return g(null)},onRemove:function(){l(r.filter((function(e,t){return t!==d}))),g(null)}}):React.createElement(React.Fragment,null,React.createElement(b,null,React.createElement(x,{tracks:r,onEditPress:g}),React.createElement(v,{className:"block-library-video-tracks-editor__add-tracks-container",label:p("Add caption languages","presto-player")},React.createElement(_,{onSelect:function(e){var t=e.url,a=r.length;l([].concat(Object(n.a)(r),[{src:t}])),g(a)},allowedTypes:P,render:function(e){var t=e.open;return React.createElement(m,{icon:"media",onClick:t},p("Open Media Library","presto-player"))}}),React.createElement(E,null,React.createElement(y,{onChange:function(e){var t=e.target.files,a=r.length;c({allowedTypes:P,filesList:t,onFileChange:function(e){var t=Object(o.a)(e,1)[0].url,c=Object(n.a)(r);c[a]||(c[a]={}),c[a]=i(i({},r[a]),{},{src:t}),l(c),g(a)}})},accept:".vtt,text/vtt",render:function(e){var t=e.openFileDialog;return React.createElement(m,{icon:"upload",onClick:function(){t()}},p("Upload","presto-player"))}})))))}}):null}},function(e,t,r){"use strict";var n=r(5),a=r(1),o=r(23),l=r(9),c=r(14);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=wp.i18n.__,u=wp.components.Disabled,d=wp.element,b=d.useState,m=d.useEffect;t.a=function(e){var t,r,n,i=e.state,d=e.branding,y=e.menu,v=e.src,f=e.poster,h=e.currentTime,O=e.preload,g=e.overlays,j=e.isDisabled,w=void 0===j||j,_=b(1),E=Object(a.a)(_,2),R=E[0],k=E[1],P=i.email_collection,C=i.cta;m((function(){k(R+1)}),[i.skin,i["play-large"],i.rewind,i.play,i["fast-forward"],i.progress,i["current-time"],i.mute,i.volume,i.speed,i.pip,i.fullscreen,i.captions,i.hide_logo]);var x={email:!(null==P||!P.enabled)&&React.createElement(o.b,{className:"email-overlay",slot:"player-end",headline:null==P?void 0:P.headline,style:s(s({"--presto-player-email-border-radiuss":"".concat(null==P?void 0:P.button_radius,"px"),"--plyr-color-main":(null==i?void 0:i.background_color)||(null==d?void 0:d.color)},P.button_color?{"--presto-player-button-color":"".concat(P.button_color)}:{}),P.button_text_color?{"--presto-player-button-text":"".concat(P.button_text_color)}:{}),defaultHeadline:p("Enter your email to play.","presto-player"),bottomText:null==P?void 0:P.bottom_text,allowSkip:null==P?void 0:P.allow_skip,skipText:p("Skip","presto-player"),buttonText:null==P?void 0:P.button_text,placeholder:p("Email address","presto-player"),i18n:window.prestoPlayer.i18n}),cta:!(null==C||!C.enabled)&&React.createElement(o.a,{className:"cta-overlay",style:s(s(s({"--presto-player-button-border-radius":"".concat(C.button_radius,"px")},null!=C&&C.background_opacity?{"--presto-player-cta-background-opacity":"".concat((null==C?void 0:C.background_opacity)/100)}:{}),C.button_color?{"--presto-player-button-color":"".concat(C.button_color)}:{}),C.button_text_color?{"--presto-player-button-text":"".concat(C.button_text_color)}:{}),slot:"player-end",headline:null==C?void 0:C.headline,"bottom-text":null==C?void 0:C.bottom_text,"button-link":null==C?void 0:C.button_link,"allow-skip":100!==(null==C?void 0:C.percentage)&&(null==C?void 0:C.show_skip),borderRadius:null==C?void 0:C.border_radius,"allow-rewatch":100===(null==C?void 0:C.percentage)&&(null==C?void 0:C.show_rewatch),"skip-text":p("Skip","presto-player"),"show-button":null==C?void 0:C.show_button,"button-text":null==C?void 0:C.button_text,i18n:null===(t=window)||void 0===t||null===(r=t.prestoPlayer)||void 0===r?void 0:r.i18n})};return React.createElement(u,{isDisabled:w,className:"disable-player"},React.createElement("div",{className:"presto-player__wrapper"},React.createElement(c.a,{src:v||"",className:"\n            ".concat("cta"===y&&!(null==C||!C.enabled)&&"cta-active"," \n            ").concat("email"===y&&!(null==P||!P.enabled)&&"email-active"),preset:i,branding:d,i18n:null===(n=prestoPlayerAdmin)||void 0===n?void 0:n.i18n,preload:O,attributes:{chapters:[],poster:f},currentTime:h?Object(l.e)(h):"",overlays:g,key:R,adminPreview:(null==x?void 0:x[y])||""})))}},function(e,t,r){"use strict";var n=r(1),a=wp.i18n.__,o=wp.components.TextareaControl,l=wp.element.useState;t.a=function(e){var t=e.text,r=e.update,c=e.onFocus,i=l(!1),s=Object(n.a)(i,2),p=s[0],u=s[1];return React.createElement("div",{style:{display:"block",width:"100%"}},React.createElement(o,{label:"Text",help:React.createElement("span",null,a("This field accepts","presto-player")," ",React.createElement("a",{href:"#",onClick:function(e){u(!p),e.preventDefault()}},a("Dynamic Data","presto-player")),!!p&&React.createElement("div",{style:{marginTop:"20px"}},a("This field will also accept dynamic values that we will replace with dynamic content: {user.user_login}, {user.user_nicename}, {user.user_email}, {user.user_url},{user.user_registered}, {user.display_name}, {site.url}, {site.name}, {ip_address}","presto-player"))),className:"presto-player__overlay--text",placeholder:a("Enter some text.","presto-player"),value:t||"",onChange:function(e){return r({text:e})},autoComplete:"off",onFocus:c}))}},function(e,t,r){"use strict";var n=r(1),a=wp.components,o=a.Button,l=a.Placeholder,c=a.TextControl,i=a.Flex,s=a.FlexItem,p=a.FlexBlock,u=wp.element.useState,d=wp.i18n.__;t.a=function(e){var t=e.attributes,r=(e.setAttributes,e.icon),a=e.onSelectURL,b=e.label,m=e.instructions,y=e.placeholder,v=t.src,f=u({src:v}),h=Object(n.a)(f,2),O=h[0],g=h[1];return React.createElement(l,{icon:r,label:b||d("Presto Embedded Video","presto-player"),instructions:m||d("Enter video URL","presto-player")},React.createElement("form",{onSubmit:function(e){e.preventDefault(),a(O.url)}},React.createElement(i,{style:{width:"100%",maxWidth:"400px"}},React.createElement(p,null,React.createElement(c,{type:"url",className:"presto-link-placeholder-input",placeholder:y||d("Youtube URL","presto-player"),value:O.url,onChange:function(e){return g({url:e})}})),React.createElement(s,null,React.createElement(o,{isPrimary:!0,style:{marginBottom:"8px"},type:"submit"},d("Add Video","presto-player"))))))}},function(e,t,r){"use strict";var n,a,o=r(6),l=r(5),c=r(3),i=r(4),s=r(16),p=r(8),u=r(7),d=r(1),b=r(2),m=r.n(b),y=function(){return React.createElement("div",null,React.createElement("presto-player-skeleton",{style:{width:"30%",marginBottom:"10px"}}),React.createElement("presto-player-skeleton",{style:{height:"2rem",marginBottom:"20px"}}))},v=wp.i18n.__,f=wp.components,h=f.SelectControl,O=f.TextControl,g=f.Notice,j=wp.element,w=j.useEffect,_=j.useState,E=function(e){var t=e.options,r=e.updateEmailState,n=_(!1),a=Object(d.a)(n,2),o=a[0],l=a[1],c=_([{value:null,label:v("Choose an audience","presto-player")}]),i=Object(d.a)(c,2),s=i[0],b=i[1],f=_(""),j=Object(d.a)(f,2),E=j[0],R=j[1],k=function(){var e=Object(u.a)(m.a.mark((function e(){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/mailchimp/lists"});case 4:t=e.sent,r=s,(t||[]).forEach((function(e){r=[].concat(Object(p.a)(r),[{value:e.id,label:e.name}])})),b(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&R(e.t0.message);case 13:return e.prev=13,l(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return w((function(){k()}),[]),o?React.createElement("div",null,React.createElement(y,null),React.createElement(y,null)):E?React.createElement(g,{className:"presto-notice",status:"error",isDismissible:!1},E):React.createElement("div",null,React.createElement(h,{label:v("Choose an audience","presto-player"),value:null==t?void 0:t.provider_list,options:s,onChange:function(e){return r({provider_list:e})}}),React.createElement(O,{label:v("Tag","presto-player"),help:React.createElement("p",null,v("Give this contact an optional tag when they are added to the list.","presto-player")),value:null==t?void 0:t.provider_tag,onChange:function(e){return r({provider_tag:e})}}))},R=wp.i18n.__,k=wp.components,P=k.SelectControl,C=k.Notice,x=wp.element,S=x.useEffect,N=x.useState,T=function(e){var t=e.options,r=e.updateEmailState,n=N(!1),a=Object(d.a)(n,2),o=a[0],l=a[1],c=N([{value:null,label:R("Choose a group","presto-player")}]),i=Object(d.a)(c,2),s=i[0],b=i[1],v=N(""),f=Object(d.a)(v,2),h=f[0],O=f[1],g=function(){var e=Object(u.a)(m.a.mark((function e(){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/mailerlite/groups"});case 4:t=e.sent,r=s,(t||[]).forEach((function(e){r=[].concat(Object(p.a)(r),[{value:e.id,label:e.name}])})),b(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&O(e.t0.message);case 13:return e.prev=13,l(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return S((function(){g()}),[]),o?React.createElement(y,null):h?React.createElement(C,{className:"presto-notice",status:"error",isDismissible:!1},h):React.createElement("div",null,React.createElement(P,{label:R("Choose a group","presto-player"),value:null==t?void 0:t.provider_list,options:s,onChange:function(e){return r({provider_list:e})}}))},D=wp.i18n.__,B=wp.components,A=B.SelectControl,L=B.Notice,I=wp.element,F=I.useEffect,V=I.useState,U=function(e){var t=e.options,r=e.updateEmailState,n=V(!1),a=Object(d.a)(n,2),o=a[0],l=a[1],c=V(!1),i=Object(d.a)(c,2),s=i[0],b=i[1],v=V([{value:null,label:D("Choose a list","presto-player")}]),f=Object(d.a)(v,2),h=f[0],O=f[1],g=V([{value:null,label:D("Choose a tag","presto-player")}]),j=Object(d.a)(g,2),w=j[0],_=j[1],E=V(""),R=Object(d.a)(E,2),k=R[0],P=R[1],C=function(){var e=Object(u.a)(m.a.mark((function e(){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/activecampaign/lists"});case 4:t=e.sent,r=h,(t||[]).forEach((function(e){r=[].concat(Object(p.a)(r),[{value:e.id,label:e.name||D("Default list","presto-player")}])})),O(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&P(e.t0.message);case 13:return e.prev=13,l(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(u.a)(m.a.mark((function e(){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/activecampaign/tags"});case 4:t=e.sent,r=w,(t||[]).forEach((function(e){r=[].concat(Object(p.a)(r),[{value:e.id,label:e.tag}])})),_(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&P(e.t0.message);case 13:return e.prev=13,b(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return F((function(){C(),x()}),[]),k?React.createElement(L,{className:"presto-notice",status:"error",isDismissible:!1},k):React.createElement("div",null,o?React.createElement(y,null):h.length>1&&React.createElement(A,{label:D("Choose a list","presto-player"),value:null==t?void 0:t.provider_list,options:h,onChange:function(e){return r({provider_list:e})}}),s?React.createElement(y,null):w.length>1&&React.createElement(A,{label:D("Choose a tag","presto-player"),value:null==t?void 0:t.provider_tag,options:w,onChange:function(e){return r({provider_tag:e})}}))},M=wp.i18n.__,z=wp.components,W=z.SelectControl,H=z.Notice,Y=wp.element,G=Y.useEffect,q=Y.useState,Z=function(e){var t=e.options,r=e.updateEmailState,n=q(!1),a=Object(d.a)(n,2),o=a[0],l=a[1],c=q(!1),i=Object(d.a)(c,2),s=i[0],b=i[1],v=q([{value:null,label:M("Choose a list","presto-player")}]),f=Object(d.a)(v,2),h=f[0],O=f[1],g=q([{value:null,label:M("Choose a tag","presto-player")}]),j=Object(d.a)(g,2),w=j[0],_=j[1],E=q(""),R=Object(d.a)(E,2),k=R[0],P=R[1],C=function(){var e=Object(u.a)(m.a.mark((function e(){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/fluentcrm/lists"});case 4:t=e.sent,r=h,(t||[]).forEach((function(e){r=[].concat(Object(p.a)(r),[{value:e.id,label:e.title||e.slug}])})),O(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&P(e.t0.message);case 13:return e.prev=13,l(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(u.a)(m.a.mark((function e(){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/fluentcrm/tags"});case 4:t=e.sent,r=w,(t||[]).forEach((function(e){r=[].concat(Object(p.a)(r),[{value:e.id,label:e.title||e.slug}])})),_(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&P(e.t0.message);case 13:return e.prev=13,b(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return G((function(){C(),x()}),[]),k?React.createElement(H,{className:"presto-notice",status:"error",isDismissible:!1},k):React.createElement("div",null,o?React.createElement(y,null):h.length>1&&React.createElement(W,{label:M("Choose a list","presto-player"),value:null==t?void 0:t.provider_list,options:h,onChange:function(e){return r({provider_list:e})}}),s?React.createElement(y,null):w.length>1&&React.createElement(W,{label:M("Choose a tag","presto-player"),value:null==t?void 0:t.provider_tag,options:w,onChange:function(e){return r({provider_tag:e})}}))},K=wp.i18n.__,Q=wp.components,X=Q.SelectControl,$=Q.Button,J=Q.Flex,ee=Q.Icon,te=wp.element,re=te.useEffect,ne=te.useState,ae=function(e){var t=e.options,r=e.updateEmailState,n=ne(!1),a=Object(d.a)(n,2),o=a[0],l=a[1],c=ne([{value:"none",label:K("None","presto-player")}]),i=Object(d.a)(c,2),s=i[0],b=i[1],v=ne(""),f=Object(d.a)(v,2),h=f[0],O=f[1],g={presto_player_activecampaign:{label:"ActiveCampaign",value:"activecampaign"},presto_player_mailchimp:{label:"MailChimp",value:"mailchimp"},presto_player_mailerlite:{label:"MailerLite",value:"mailerlite"},presto_player_fluentcrm:{label:"FluentCRM",value:"fluentcrm"}},j=function(){var e=Object(u.a)(m.a.mark((function e(){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),O(""),e.prev=2,e.next=5,wp.apiFetch({path:"wp/v2/settings"});case 5:t=e.sent,r=s,Object.keys(t).forEach((function(e){var n;null!=g&&g[e]&&null!==(n=t[e])&&void 0!==n&&n.connected&&(r=[].concat(Object(p.a)(r),[g[e]]))})),b(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),null!==e.t0&&void 0!==e.t0&&e.t0.message&&O(e.t0.message);case 14:return e.prev=14,l(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(){return e.apply(this,arguments)}}();re((function(){j()}),[]);return o?React.createElement(y,null):React.createElement("div",null,h,s.length>1?React.createElement("div",null,React.createElement(X,{label:K("Choose an email provider","presto-player"),value:null==t?void 0:t.provider,options:s,onChange:function(e){return r({provider:e})}}),function(){var e=s.find((function(e){return e.value===(null==t?void 0:t.provider)}));if(Object.keys(e||{}).length)switch(null==t?void 0:t.provider){case"mailchimp":return React.createElement(E,{options:t,updateEmailState:r});case"mailerlite":return React.createElement(T,{options:t,updateEmailState:r});case"activecampaign":return React.createElement(U,{options:t,updateEmailState:r});case"fluentcrm":return React.createElement(Z,{options:t,updateEmailState:r})}}()):React.createElement(J,null,React.createElement($,{target:"_blank",href:"/wp-admin/edit.php?post_type=pp_video_block&page=presto-player-settings#/integrations",isSecondary:!0,isSmall:!0},K("Connect a provider","presto-player")),React.createElement($,{isSmall:!0,onClick:function(e){e.preventDefault(),j()}},React.createElement(ee,{icon:"update"}))))},oe=r(12),le=r(0);function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.a=function(e){var t=e.state,r=e.updateState,l=e.className,p=t.email_collection,u=t.cta,d=Object(s.useSelect)((function(e){return e("presto-player/player").branding()})),b=function(e){r(ie(ie({},t),{},{email_collection:ie(ie({},p),e)}))};return Object(le.b)("div",{className:l},Object(le.b)(i.BaseControl,null,Object(le.b)("h3",null,Object(c.__)("Email Capture","presto-player"))),Object(le.b)(i.BaseControl,{className:"presto-player__control--large-play"},Object(le.b)(i.ToggleControl,{label:Object(c.__)("Enable","presto-player"),help:Object(c.__)("Show an email collection form and message over your player.","presto-player"),onChange:function(e){b({enabled:e})},checked:null==p?void 0:p.enabled})),!(null==p||!p.enabled)&&Object(le.b)(React.Fragment,null,Object(le.b)(i.BaseControl,{className:"presto-player__control--percentage-watched"},Object(le.b)(i.RangeControl,{label:Object(c.__)("Display At (Percentage)","presto-player"),labelPosition:"top",onChange:function(e){b({percentage:e})},marks:[{value:0,label:Object(c.__)("Start","presto-player")},{value:50,label:Object(c.__)("50% Watched","presto-player")},{value:100,label:Object(c.__)("End","presto-player")}],shiftStep:5,value:(null==p?void 0:p.percentage)||0})),(null==u?void 0:u.enabled)&&(null==p?void 0:p.percentage)===(null==u?void 0:u.percentage)&&Object(le.b)(i.Notice,{css:Object(le.a)(n||(n=Object(o.a)(["\n                margin: 0 0 30px 0 !important;\n              "]))),status:"warning",isDismissible:!1},Object(c.__)("You already have a Call To Action set display at the same time.","presto-player"),Object(le.b)(i.Button,{onClick:function(){r(ie(ie({},t),{},{cta:ie(ie({},u),{enabled:!1})}))},isLink:!0,css:Object(le.a)(a||(a=Object(o.a)(["\n                  margin-top: 10px !important;\n                "])))},Object(c.__)("Disable Call To Action","presto-player"))),Object(le.b)(i.BaseControl,{className:"presto-player__control--large-play"},Object(le.b)(i.ToggleControl,{label:Object(c.__)("Allow Skipping","presto-player"),help:Object(c.__)("Let the viewer skip","presto-player"),onChange:function(e){b({allow_skip:e})},checked:null==p?void 0:p.allow_skip})),Object(le.b)(i.BaseControl,{className:"presto-player__control--large-play"},Object(le.b)(i.TextareaControl,{label:Object(c.__)("Headline","presto-player"),help:Object(c.__)("The headline for your form.","presto-player"),value:null==p?void 0:p.headline,onChange:function(e){b({headline:e})}})),Object(le.b)(i.BaseControl,{className:"presto-player__control--large-play"},Object(le.b)(i.TextareaControl,{label:Object(c.__)("Bottom Text","presto-player"),help:Object(c.__)("Text displayed below the form. HTML allowed.","presto-player"),value:null==p?void 0:p.bottom_text,onChange:function(e){b({bottom_text:e})}})),Object(le.b)(i.BaseControl,{className:"presto-player__control--large-play"},Object(le.b)(i.TextControl,{label:Object(c.__)("Play Button Text","presto-player"),help:Object(le.b)("p",null,Object(c.__)("Submit button text","presto-player")),value:null==p?void 0:p.button_text,onChange:function(e){return b({button_text:e})}})),Object(le.b)(i.BaseControl,{className:"presto-player__control--button-color"},Object(le.b)(i.Flex,null,Object(le.b)(i.BaseControl.VisualLabel,null,Object(c.__)("Button Color","presto-player")),Object(le.b)(oe.a,{color:(null==u?void 0:u.button_color)||(null==d?void 0:d.color),setColor:function(e){return b({button_color:e&&e.hex})}}))),Object(le.b)(i.BaseControl,{className:"presto-player__control--button-text-color"},Object(le.b)(i.Flex,null,Object(le.b)(i.BaseControl.VisualLabel,null,Object(c.__)("Button Text Color","presto-player")),Object(le.b)(oe.a,{color:(null==u?void 0:u.button_text_color)||"#ffffff",setColor:function(e){return b({button_text_color:e&&e.hex})}}))),Object(le.b)("h3",null,Object(c.__)("Integrate","presto-player")),Object(le.b)(i.BaseControl,null,Object(le.b)(ae,{updateEmailState:b,options:p})),Object(le.b)("h3",null,Object(c.__)("Style","presto-player")),Object(le.b)(i.BaseControl,null,Object(le.b)(i.RangeControl,{label:Object(c.__)("Round Corners","presto-player"),help:Object(c.__)("Border radius of form elements.","presto-player"),value:(null==p?void 0:p.border_radius)||0,onChange:function(e){return b({border_radius:e})},min:0,max:25}))))}},function(e,t,r){"use strict";var n=r(8),a=r(5),o=r(1),l=r(9),c=wp.i18n.__,i=wp.components,s=i.Flex,p=i.FlexItem,u=i.FlexBlock,d=i.TextControl,b=i.Button,m=wp.element.useState,y=function(e){var t=e.update,r=e.add,n=e.remove,i=e.className,y=e.time,v=e.title,f=(e.disabled,e.showNotice,m(y)),h=Object(o.a)(f,2),O=h[0],g=h[1];return React.createElement(s,{align:"center",className:i},React.createElement(p,null,React.createElement(d,Object(a.a)({className:"presto-player__caption--time",style:{width:"60px"},placeholder:"0:00",value:O,onChange:function(e){return g(e)},onBlur:function(){var e=Object(l.b)(O);t({time:e}),g(e)},autoComplete:"off"},"placeholder","0:00"))),React.createElement(u,null,React.createElement(d,{className:"presto-player__caption--title",placeholder:c("Title","presto-player"),value:v||"",onChange:function(e){return t({title:e})},autoComplete:"off"})),React.createElement(p,null,n&&React.createElement(b,{icon:"minus",className:"ph-chapter__remove",style:{marginBottom:"8px"},label:c("Remove Chapter","presto-player"),onClick:n}),r&&React.createElement(b,{icon:"plus-alt",className:"ph-chapter__add",label:c("Add Chapter","presto-player"),style:{marginBottom:"8px"},onClick:function(){r(),g("")}})))};function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}wp.i18n.__;var h=wp.element.useState,O=wp.data.dispatch;t.a=function(e){var t,r=e.setAttributes,a=e.attributes,l=function(){O("presto-player/player").setProModal(!0)};if(null===(t=prestoPlayer)||void 0===t||!t.isPremium)return React.createElement(y,{disabled:!0,className:"ph-chapter is-new",time:"",title:"",update:function(){},showNotice:l,add:l});var c=a.chapters,i=h({title:"",time:""}),s=Object(o.a)(i,2),p=s[0],u=s[1];return React.createElement(React.Fragment,null,(c||[]).sort((function(e,t){return parseInt(e.time.split(":")[0])-parseInt(t.time.split(":")[0])==0?parseInt(e.time.split(":")[1])-parseInt(t.time.split(":")[1]):parseInt(e.time.split(":")[0])-parseInt(t.time.split(":")[0])})).map((function(e,t){return React.createElement(y,{key:"".concat(t,"-").concat(e.time),className:"ph-chapter",time:e.time,title:e.title,chapter:e,update:function(t){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=c.indexOf(e),a=c.map((function(e,r){return r!==n?e:f(f({},e),t)}));r({chapters:a})}(e,t)},remove:function(){!function(e){var t=c.indexOf(e);r({chapters:c.filter((function(e,r){return r!==t}))})}(e)}})})),React.createElement(y,{className:"ph-chapter is-new",time:p.time,title:p.title,update:function(e){u(f(f({},p),e))},add:function(){p.time&&p.title&&(r({chapters:[].concat(Object(n.a)(c||[]),[{time:p.time,title:p.title}])}),u({title:"",time:""}))}}))}},function(e,t,r){"use strict";var n,a,o,l=r(5),c=r(1),i=r(12),s=r(25),p=r(6),u=r(7),d=r(2),b=r.n(d),m=r(0);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=wp.i18n.__,h=wp.components,O=h.TextControl,g=h.ExternalLink,j=h.Button,w=(h.Flex,wp.element),_=w.useState,E=w.useEffect,R=wp.data,k=R.useSelect,P=R.dispatch,C=function(e){var t=e.onClose,r=e.value,l=e.setValue,i=_(!1),s=Object(c.a)(i,2),d=s[0],y=s[1],h=wp.data.useSelect((function(e){return e("core").canUser("read","settings")})),w=k((function(e){return e("presto-player/player").youtube()}));E((function(){l(w.channel_id)}),[null==w?void 0:w.channel_id]);var R=function(){var e=Object(u.a)(b.a.mark((function e(n){var a,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),y(!0),P("presto-player/player").updateYoutube({channel_id:r}),a=v(v({},w),{channel_id:r}),e.prev=4,e.next=7,wp.apiFetch({path:"wp/v2/settings",method:"POST",data:{presto_player_youtube:a}});case 7:null!=(o=e.sent)&&o.presto_player_youtube&&(P("presto-player/player").setYoutube(null==o?void 0:o.presto_player_youtube),t()),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(4);case 13:return e.prev=13,y(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[4,11,13,16]])})));return function(t){return e.apply(this,arguments)}}();return h?Object(m.b)("form",{onSubmit:R},Object(m.b)(O,{css:Object(m.a)(n||(n=Object(p.a)(["\n          margin-bottom: 0 !important;\n        "]))),label:f("Youtube Channel ID","presto-player"),help:Object(m.b)("p",null,Object(m.b)(g,{href:"https://support.google.com/youtube/answer/3250431?hl=en"},f("Find my channel id","presto-player"))),value:r,onChange:function(e){return l(e)}}),Object(m.b)(j,{disabled:d,isBusy:d,css:Object(m.a)(a||(a=Object(p.a)(["\n          margin-bottom: 1em;\n        "]))),isPrimary:!0,type:"submot"},f("Save","presto-player")),Object(m.b)(j,{onClick:t,css:Object(m.a)(o||(o=Object(p.a)(["\n          margin-bottom: 1em;\n        "]))),isTertiary:!0},f("Cancel","presto-player"))):""};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N=wp.i18n.__,T=wp.components,D=T.ToggleControl,B=T.Flex,A=T.Button,L=T.BaseControl,I=T.RangeControl,F=T.TextControl,V=T.SelectControl,U=T.TextareaControl,M=wp.element,z=M.useEffect,W=M.useState,H=wp.data.useSelect;t.a=function(e){var t=e.state,r=e.updateState,n=e.className,a=e.value,o=e.setValue,l=t.action_bar,p=W(!1),u=Object(c.a)(p,2),d=u[0],b=u[1],m=H((function(e){return e("presto-player/player").branding()})),y=H((function(e){return e("presto-player/player").youtube()})),v=function(e){r(S(S({},t),{},{action_bar:S(S({},l),e)}))};z((function(){null!=l&&l.text||v({text:"Like this?"}),null!=l&&l.button_type||v({button_type:"custom"}),null!=l&&l.button_text||v({button_text:"Click Here"})}),[t]);return React.createElement("div",{className:n},React.createElement(L,null,React.createElement("h3",null,N("Action Bar","presto-player"))),React.createElement(L,{className:"presto-player__control--large-play"},React.createElement(D,{label:N("Enable","presto-player"),help:N("Show an action bar below your player while it's playing.","presto-player"),onChange:function(e){v({enabled:e})},checked:null==l?void 0:l.enabled})),!(null==l||!l.enabled)&&React.createElement(React.Fragment,null,React.createElement(L,{className:"presto-player__control--percentage-watched"},React.createElement(I,{label:N("Display At (Percentage)","presto-player"),labelPosition:"top",onChange:function(e){v({percentage_start:e})},marks:[{value:0,label:N("Start","presto-player")},{value:50,label:N("50% Watched","presto-player")},{value:100,label:N("End","presto-player")}],shiftStep:5,value:(null==l?void 0:l.percentage_start)||0})),React.createElement(L,{className:"presto-player__control--large-play"},React.createElement(U,{label:N("Text","presto-player"),help:N("Action bar text.","presto-player"),value:null==l?void 0:l.text,onChange:function(e){return v({text:e})}})),React.createElement(L,{className:"presto-player__control--large-play"},React.createElement(B,null,React.createElement(L.VisualLabel,null,N("Action Bar Background","presto-player")),React.createElement(i.a,{color:(null==l?void 0:l.background_color)||"#1d1d1d",setColor:function(e){return v({background_color:e&&e.hex})}}))),React.createElement(L,null,React.createElement("h3",null,N("Button","presto-player"))),React.createElement(L,{className:"presto-player__control--button-type"},React.createElement(V,{label:N("Button Type","presto-player"),value:null==l?void 0:l.button_type,options:[{value:"custom",label:N("Custom","presto-player")},{value:"youtube",label:N("YouTube Subscribe","presto-player")},{value:"none",label:N("None","presto-player")}],onChange:function(e){return v({button_type:e})}})),"youtube"===(null==l?void 0:l.button_type)&&(null==y?void 0:y.channel_id)&&React.createElement(D,{label:N("Show Count","presto-player"),help:N("Show your follower count.","presto-player"),onChange:function(e){v({button_count:e})},checked:null==l?void 0:l.button_count}),function(){if("youtube"===(null==l?void 0:l.button_type))return d?React.createElement(C,{onClose:function(){return b(!1)},value:a,setValue:o}):React.createElement("div",null,React.createElement(A,{isSecondary:!0,onClick:function(e){e.preventDefault(),b(!0)}},null!=y&&y.channel_id?N("Update Youtube Channel Id","presto-player"):N("Add Youtube Channel Id","presto-player")),React.createElement("br",null),React.createElement("br",null),React.createElement("br",null))}(),"custom"===(null==l?void 0:l.button_type)&&React.createElement("div",null,React.createElement(L,{className:"presto-player__control--button-text"},React.createElement(F,{label:N("Button Text","presto-player"),help:React.createElement("p",null,N("Submit button text","presto-player")),value:null==l?void 0:l.button_text,onChange:function(e){return v({button_text:e})}})),React.createElement(L,{className:"presto-player__control--button-text"},React.createElement(L.VisualLabel,null,React.createElement("p",null," ",N("Button Link","presto-player"))),React.createElement(s.a,{setSettings:function(e){v({button_link:e})},settings:(null==l?void 0:l.button_link)||{}})),React.createElement(L,{className:"presto-player__control--button-radius"},React.createElement(I,{label:N("Round Corners","presto-player"),help:N("Border radius of the button","presto-player"),value:(null==l?void 0:l.button_radius)||0,onChange:function(e){return v({button_radius:e})},min:0,max:25})),React.createElement(L,{className:"presto-player__control--button-color"},React.createElement(B,null,React.createElement(L.VisualLabel,null,N("Button Color","presto-player")),React.createElement(i.a,{color:(null==l?void 0:l.button_color)||(null==m?void 0:m.color),setColor:function(e){return v({button_color:e&&e.hex})}}))),React.createElement(L,{className:"presto-player__control--button-text-color"},React.createElement(B,null,React.createElement(L.VisualLabel,null,N("Button Text Color","presto-player")),React.createElement(i.a,{color:(null==l?void 0:l.button_text_color)||"#ffffff",setColor:function(e){return v({button_text_color:e&&e.hex})}}))))))}},,,function(e,t){e.exports=window.wp.editor},,,,,,,function(e,t,r){"use strict";(function(e){var n,a,o=r(6),l=r(8),c=r(5),i=r(1),s=r(52),p=r(0),u=r(35),d=r(51);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=wp.i18n.__,v=wp.components,f=v.Button,h=v.Flex,O=v.FlexItem,g=v.FlexBlock,j=v.Modal,w=wp.element,_=w.useState,E=w.useEffect,R=wp.data.useSelect;t.a=function(t){var r=t.closeModal,c=t.attributes,b=t.setAttributes,v=t.updateOverlayAttribute,w=_(!1),k=Object(i.a)(w,2),P=k[0],C=k[1],x=_(""),S=Object(i.a)(x,2),N=S[0],T=S[1],D=c.overlays,B=c.preset,A=c.src,L=c.poster,I=c.previewSrc,F=R((function(e){return e("presto-player/player").branding()})),V=R((function(e){return e("presto-player/player").getPreset(B)}));E((function(){D.length||U()}),[]);var U=function(){var e={startTime:"0:00",endTime:"0:05",text:y("Here's a link to click!","presto-player"),link:{},position:"top-right",color:"#fff",backgroundColor:"#000",opacity:75};D[D.length-1]&&(e=m({},D[D.length-1]));e.id=Object(s.a)(10),b({overlays:[].concat(Object(l.a)(D||[]),[e])})};return Object(p.b)(j,{title:y("Manage Video Overlays","presto-player"),onRequestClose:r,className:"presto-player__modal-presets",overlayClassName:"presto-player__modal-presets-overlay",shouldCloseOnClickOutside:!1},Object(p.b)("div",{className:"presto-player__preset-options","data-cy":"preset-modal"},Object(p.b)(h,{align:"stretch",className:"presto-player__style-preview-area"},Object(p.b)(O,{className:"presto-player__style-sidebar"},Object(p.b)("div",{css:{padding:"3px"}},(D||[]).sort((function(e,t){return parseInt(e.startTime.split(":")[0])-parseInt(t.startTime.split(":")[0])==0?parseInt(e.startTime.split(":")[1])-parseInt(t.startTime.split(":")[1]):parseInt(e.startTime.split(":")[0])-parseInt(t.startTime.split(":")[0])})).map((function(t,r){return Object(p.b)(d.a,{key:"".concat(r,"-").concat(t.startTime),overlayIndex:r,className:"presto-player__overlay",startTime:t.startTime,endTime:t.endTime,text:t.text,link:t.link,position:t.position,color:t.color,backgroundColor:t.backgroundColor,opacity:t.opacity,overlay:t,update:function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=D.indexOf(e),n=D.map((function(e,n){return n!==r?e:m(m({},e),t)}));b({overlays:n})}(t,e)},remove:function(){!function(e){var t=D.indexOf(e);b({overlays:D.filter((function(e,r){return r!==t}))})}(t)},updateCurrentTime:function(t){!function(t){T(""),e.nextTick((function(){T(t)}))}(t)}})})),Object(p.b)(f,{isPrimary:!0,onClick:U},y("Add An Overlay","presto-player")))),Object(p.b)(g,{className:"presto-player__style-preview-panel"},Object(p.b)(u.a,{preload:"auto",currentTime:N,src:I||A,isDisabled:!1,state:m(m({},V),{},{lazy_load_youtube:!1,invert_time:!1}),branding:F,poster:L,overlays:D}))),Object(p.b)("br",null),Object(p.b)("div",{css:Object(p.a)(n||(n=Object(o.a)(["\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n          "])))},Object(p.b)("div",{css:Object(p.a)(a||(a=Object(o.a)(["\n              opacity: 0.5;\n              font-size: 12px;\n            "])))}),Object(p.b)("div",null,Object(p.b)(f,{isTertiary:!0,onClick:r,style:{margin:"0 6px"}},y("Cancel","presto-player")),Object(p.b)(f,{isPrimary:!0,isBusy:P,disabled:P,onClick:function(){C(!0),v(D),C(!1),r()},"data-cy":"submit-preset"},y("Save Overlays","presto-player"))))))}}).call(this,r(66))},function(e,t,r){"use strict";var n=r(1),a=r(0),o=r(9),l=r(25),c=r(36),i=r(12),s=wp.i18n.__,p=wp.components,u=p.Flex,d=p.FlexItem,b=p.TextControl,m=p.Button,y=p.BaseControl,v=p.RadioControl,f=p.RangeControl,h=(p.withFocusReturn,wp.element),O=h.useRef,g=h.useEffect,j=wp.element.useState;t.a=function(e){var t=e.overlayIndex,r=e.update,p=e.remove,h=e.className,w=e.startTime,_=e.endTime,E=e.text,R=e.link,k=e.position,P=e.color,C=e.backgroundColor,x=e.opacity,S=e.updateCurrentTime,N=j(w),T=Object(n.a)(N,2),D=T[0],B=T[1],A=j(_),L=Object(n.a)(A,2),I=L[0],F=L[1],V=j(k),U=Object(n.a)(V,2),M=U[0],z=U[1],W=O();g((function(){if(Object(o.e)(w)>=Object(o.e)(_)){var e=Object(o.b)(w),t=Object(o.e)(e)+1;e=Object(o.b)(Object(o.c)(t)),r({endTime:e}),F(e)}}),[w,_]);var H=function(){var e=Object(o.b)(D);r({startTime:e}),B(e),S(e)};return Object(a.b)("div",null,Object(a.b)(u,{align:"center",className:h},Object(a.b)(d,null,Object(a.b)(b,{ref:W,id:"start-time-".concat(t),label:s("Start Time","presto-player"),className:"presto-player__overlay--start-time",value:D,onChange:function(e){return B(e)},onBlur:H,onFocus:H,autoComplete:"off",placeholder:"0:00"})),Object(a.b)(d,null,Object(a.b)(b,{label:s("End Time","presto-player"),className:"presto-player__overlay--end-time",value:I,onChange:F,onBlur:function(){var e=Object(o.b)(I);r({endTime:e}),F(e)},autoComplete:"off",placeholder:"0:00"}))),Object(a.b)(c.a,{text:E,update:r,onFocus:function(){S(Object(o.b)(D))}}),Object(a.b)(y,{style:{width:"100%"}},Object(a.b)(y.VisualLabel,null,Object(a.b)("p",null," ",s("Link","presto-player"))),Object(a.b)(l.a,{onFocus:function(){S(Object(o.b)(D))},setSettings:function(e){return r({link:e})},settings:R||{}})),Object(a.b)(y,{className:h},Object(a.b)(v,{label:s("Position","presto-player"),options:[{label:"Top Right",value:"top-right"},{label:"Top Left",value:"top-left"}],selected:M||"right",onFocus:function(){S(Object(o.b)(D))},onChange:function(e){r({position:e}),z(e),S(Object(o.b)(D))}})),Object(a.b)(y,{className:"presto-player__control--overlay-text-color"},Object(a.b)(u,null,Object(a.b)(y.VisualLabel,null,s("Text Color","presto-player")),Object(a.b)(i.a,{onFocus:function(){S(Object(o.b)(D))},color:P,setColor:function(e){r({color:e&&e.hex})}}))),Object(a.b)(y,{className:"presto-player__control--overlay-background-color"},Object(a.b)(u,null,Object(a.b)(y.VisualLabel,null,s("Background Color","presto-player")),Object(a.b)(i.a,{onFocus:function(){S(Object(o.b)(D))},color:C,setColor:function(e){r({backgroundColor:e&&e.hex})}}))),Object(a.b)(y,null,Object(a.b)(f,{label:s("Opacity","presto-player"),help:s("Opacity percentage of the overlay.","presto-player"),value:x,onChange:function(e){return r({opacity:e})},min:0,max:100})),p&&Object(a.b)(y,{className:h},Object(a.b)(u,{justify:"flex-end"},Object(a.b)(m,{isDestructive:!0,isSmall:!0,onClick:p},s("Remove Overlay","presto-player")))),Object(a.b)("hr",{css:{marginBottom:"20px"}}))}},,,,function(e,t,r){r(56),e.exports=r(71)},,,,function(e,t,r){var n={"./audio/index.js":70,"./bunny/index.js":69,"./hosted/index.js":73,"./reusable-display/index.js":74,"./reusable-edit/index.js":67,"./vimeo/index.js":75,"./youtube/index.js":76};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=59},,,,,,,,function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return v})),r.d(t,"options",(function(){return f}));var n=wp.i18n.__,a=wp.blockEditor,o=a.InnerBlocks,l=a.useBlockProps,c=wp.data,i=c.useSelect,s=c.dispatch,p=wp.components,u=p.Button,d=p.Placeholder,b=wp.plugins,m=(b.getPlugins,b.unregisterPlugin),y=wp.element.useEffect,v="presto-player/reusable-edit",f={title:"Reusable Block Container",category:"presto",supports:{inserter:!1,reusable:!1,html:!1},icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("circle",{cx:"12",cy:"12",r:"10"}),React.createElement("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),React.createElement("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})),edit:function(e){var t=l(),r=e.clientId,a=e.isSelected,c=i((function(e){return e("core/block-editor").getBlock(r).innerBlocks}));y((function(){a&&wp.data.dispatch("core/edit-post").openGeneralSidebar("edit-post/block")}),[a]),s("core/block-editor").setTemplateValidity(!0),y((function(){m("presto-player")}),[]);var p,b=function(e){var t=wp.blocks.createBlock("presto-player/".concat(e));return s("core/block-editor").insertBlock(t,0,r)};return null!=c&&c.length?React.createElement("div",null,React.createElement("div",t,React.createElement(o,{templateLock:!1,renderAppender:function(){return 0===c.length&&React.createElement(o.ButtonBlockAppender,null)}}))):React.createElement("div",null,React.createElement("div",t,React.createElement(d,{icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),instructions:n("Choose a video type to get started.","presto-player"),label:n("Choose a Video Type","presto-player")},React.createElement(u,{isPrimary:!0,onClick:function(){b("self-hosted")}},n("Video","presto-player")),React.createElement(u,{isPrimary:!0,onClick:function(){b("youtube")}},n("Youtube","presto-player")),React.createElement(u,{isPrimary:!0,onClick:function(){b("vimeo")}},n("Vimeo","presto-player")),null!==(p=prestoPlayer)&&void 0!==p&&p.isPremium?React.createElement(u,{isPrimary:!0,onClick:function(){b("bunny")}},n("Bunny.net","presto-player")):"",React.createElement(u,{isPrimary:!0,onClick:function(){b("audio")}},n("Audio","presto-player"))),React.createElement(o,{templateLock:!1,renderAppender:function(){return!1}})))},save:function(){var e=l.save();return React.createElement("div",e,React.createElement(o.Content,null))}}},function(e,t,r){var n={"./reusable-videos/index.js":72};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=68},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return xa})),r.d(t,"options",(function(){return Sa}));var n={};r.r(n),r.d(n,"videos",(function(){return Q})),r.d(n,"collections",(function(){return X})),r.d(n,"uploads",(function(){return $})),r.d(n,"isPrivate",(function(){return J})),r.d(n,"isLoading",(function(){return ee})),r.d(n,"errors",(function(){return te})),r.d(n,"videosFetched",(function(){return re})),r.d(n,"currentCollection",(function(){return ne})),r.d(n,"ui",(function(){return ae})),r.d(n,"requestType",(function(){return oe}));var a={};r.r(a),r.d(a,"setVideos",(function(){return le})),r.d(a,"addVideos",(function(){return ce})),r.d(a,"removeVideo",(function(){return ie})),r.d(a,"setCollections",(function(){return se})),r.d(a,"addCollection",(function(){return pe})),r.d(a,"setIsPrivate",(function(){return ue})),r.d(a,"setSearch",(function(){return de})),r.d(a,"setCollectionRequest",(function(){return be})),r.d(a,"setUploads",(function(){return me})),r.d(a,"addUploads",(function(){return ye})),r.d(a,"removeUpload",(function(){return ve})),r.d(a,"setVideosFetched",(function(){return fe})),r.d(a,"setLoading",(function(){return he})),r.d(a,"setUI",(function(){return Oe})),r.d(a,"addError",(function(){return ge})),r.d(a,"removeError",(function(){return je}));var o,l,c=r(5),i=r(7),s=r(1),p=r(2),u=r.n(p),d=function(){var e=Object(i.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/sign",method:"POST",data:{url:t,id:0}});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=r(20),m=r(21),y=r(34),v=function(e){var t=e.file,r=e.path,n=e.onProgress,a=e.onComplete,o=e.onError,l=0,c=!1,s=Math.min(prestoPlayerAdmin.wp_max_upload_size-1e6,159e5),p=Math.max(s,19e5);p=Math.min(p,104857600);var d=function(){var e=Object(i.a)(u.a.mark((function e(i){var s,b,m,y,v;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=i+p+1,b=t.slice(i,s),m=Math.ceil(t.size/(p+1)),l++,n(l/m*100),(y=new FormData).append("file",b),y.append("name",t.name),y.append("chunk",l),y.append("chunks",m),e.prev=10,e.next=13,wp.apiFetch({path:r,method:"POST",body:y});case 13:if(v=e.sent,!c){e.next=17;break}return console.log("cancelled"),e.abrupt("return");case 17:s<t.size?(n(void 0),d(s)):a(v),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(10),o(e.t0),console.error(e.t0);case 24:case"end":return e.stop()}}),e,null,[[10,20]])})));return function(t){return e.apply(this,arguments)}}();return l=0,new FileReader,d(0),{cancel:function(){c=!0}}},f=r(6),h=function(e){var t=e.item,r=e.onClick,n=e.className;var a,o=function(){return!(null==t||!t.encodeProgress)&&100!==t.encodeProgress};return React.createElement("div",{className:"presto-player__media-list-item ".concat(n),onClick:r},React.createElement("div",{className:"presto-player__media-list-item-icon"},React.createElement("svg",Object(c.a)({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"},"strokeLinecap","round"),React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"}))),React.createElement("div",{className:"presto-player__media-list-item-title"},null==t?void 0:t.title),o()&&React.createElement("div",{className:"presto-player__media-list-item-size"},"Encoding..."),!o()&&React.createElement("div",{className:"presto-player__media-list-item-size"},function(e){if(0==e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}(null==t?void 0:t.size)),!o()&&React.createElement("div",{className:"presto-player__media-list-item-modified"},(a=t.updated_at,new Date(a).toLocaleString())))},O=function(e){var t,r=e.item,n=e.onClick,a=e.className;return React.createElement("div",{className:"presto-player__media-list-item ".concat(a),onClick:n},React.createElement("div",{className:"presto-player__media-list-item-icon"},React.createElement("svg",Object(c.a)({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"},"strokeLinecap","round"),React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"}))),React.createElement("div",{className:"presto-player__media-list-item-title"},null==r?void 0:r.title),React.createElement("div",{className:"presto-player__media-list-item-size"},function(e){if(0==e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}(null==r?void 0:r.size)),React.createElement("div",{className:"presto-player__media-list-item-modified"},(t=r.updated_at,new Date(t).toLocaleString())))},g=r(0),j=wp.i18n.__,w=wp.components,_=w.Modal,E=w.Spinner,R=w.Button,k=w.BaseControl,P=w.Flex,C=w.FlexBlock,x=w.Notice,S=w.Card,N=w.CardBody,T=w.Disabled,D=w.DropZone,B=w.FormFileUpload,A=w.DropZoneProvider,L=wp.element,I=L.useEffect,F=L.useState,V=L.useRef,U=function(e){var t=e.onClose,r=e.title,n=e.header,a=e.onLoad,c=e.items,i=e.folders,p=e.fetching,u=e.progressMessage,d=e.onSelect,b=e.error,m=e.onDelete,y=e.onUpload,v=e.progress,w=F({}),L=Object(s.a)(w,2),U=L[0],M=L[1],z=F(!1),W=Object(s.a)(z,2),H=W[0],Y=W[1],G=V();I((function(){a&&a()}),[]);var q,Z,K,Q,X=function(){m(U),Y(!1)},$=function(){return Object.keys(U||{}).length};return Object(g.b)(_,{title:n||j("Add Media","presto-player"),onRequestClose:t,className:"presto-player__media-modal presto-player__full-modal",overlayClassName:"presto-player__modal-overlay"},Object(g.b)("div",{className:"presto-player__media-modal-layout","data-cy":"media-modal"},Object(g.b)("div",{className:"presto-player__media-modal-header"},Object(g.b)("div",{className:"presto-player__media-modal-upload",css:Object(g.a)(o||(o=Object(f.a)(["\n              display: flex;\n              align-items: center;\n            "])))},Object(g.b)(B,{isPrimary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(y(e.target.files),jQuery(e.target).val(null))}},j("Upload New Video","presto-player")),Object(g.b)("div",{css:Object(g.a)(l||(l=Object(f.a)(["\n                margin-left: 10px;\n              "])))},j("Or drag a file here to upload.","presto-player"))),b&&Object(g.b)(x,{status:"error",isDismissible:!1},b)),Object(g.b)("div",{className:"presto-player__media-modal-content"},Object(g.b)(A,null,p?Object(g.b)(P,{className:"presto-player__media-loading"},Object(g.b)(C,{style:{textAlign:"center"}},v?Object(g.b)(React.Fragment,null,Object(g.b)("div",null,Object(g.b)("strong",null,u||j("Uploading","presto-player"))),Object(g.b)("div",null,j("Please don't navigate away from this page.","presto-player")),Object(g.b)("progress",{className:"presto-progress",max:"100",value:v,style:{width:"100px"}})):Object(g.b)(E,null))):null!=c&&c.length?Object(g.b)("div",{className:"presto-player__media-list"},Object(g.b)("h2",null,r),i&&Object(g.b)("div",{className:"presto-player__media-list-folders"},i.map((function(e){return Object(g.b)(O,{key:e.id,item:e})}))),Object(g.b)("div",{className:"presto-player__media-list-items"},c.map((function(e){return Object(g.b)(h,{item:e,key:e.id,onClick:function(){M(U===e?{}:e)},className:U===e?"is-selected":""})})))):Object(g.b)(P,{"align-items":"center",className:"presto-player__media-not-found"},Object(g.b)("div",null,Object(g.b)("h2",null,"Drop video files here to upload"),Object(g.b)("p",null,"or browse for a video"),Object(g.b)(B,{isSecondary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(y(e.target.files),jQuery(e.target).val(null))}},j("Upload New Video","presto-player")))),Object(g.b)(D,{label:"Drop files",onFilesDrop:y}))),Object(g.b)("div",{className:"presto-player__media-modal-sidebar"},$()?Object(g.b)("div",{className:"presto-player__media-modal-sidebar-content"},Object(g.b)(k,null,Object(g.b)(T,{key:U.id},null!=U&&U.thumbnail?Object(g.b)("img",{src:null==U?void 0:U.thumbnail,style:{maxWidth:"100%"}}):Object(g.b)("video",{preload:"metadata"},Object(g.b)("source",{src:U.previewUrl})))),Object(g.b)(k,null,Object(g.b)(k.VisualLabel,null,j("Name","presto-player")),Object(g.b)("h3",{style:{marginTop:"5px"}},U.title)),!(null==U||!U.visibility)&&Object(g.b)(k,null,Object(g.b)(k.VisualLabel,null,j("Visibility","presto-player")),Object(g.b)("h3",{style:{marginTop:"5px"}},U.visibility)),Object(g.b)(k,null,Object(g.b)(k.VisualLabel,null,j("Size","presto-player")),Object(g.b)("h3",{style:{marginTop:"5px"}},function(e){if(0==e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}((null==U?void 0:U.size)||0))),Object(g.b)(k,null,Object(g.b)(k.VisualLabel,null,j("Created","presto-player")),Object(g.b)("h3",{style:{marginTop:"5px"}},(q=null==U?void 0:U.created_at,Z=(q=new Date(q)).getHours(),K=q.getMinutes(),Q=Z>=12?"pm":"am",Z=(Z%=12)||12,K=K<10?"0"+K:K,q.getDate()+"-"+(q.getMonth()+1)+"-"+q.getFullYear()+" at "+Z+":"+K+Q))),Object(g.b)(k,null,H?Object(g.b)(S,null,Object(g.b)(N,null,Object(g.b)("p",null,Object(g.b)("strong",null,"Are you sure?")),Object(g.b)("p",null,"Are you sure you want to delete this video?"),Object(g.b)(R,{isDestructive:!0,onClick:X},"Yes"),Object(g.b)(R,{onClick:function(){return Y(!1)}},"Cancel"))):Object(g.b)(R,{isDestructive:!0,onClick:function(){Y(!H)}},j("Delete video","presto-player")))):Object(g.b)(React.Fragment,null)),Object(g.b)("div",{className:"presto-player__media-modal-footer"},Object(g.b)(R,{isPrimary:!0,disabled:!$(),onClick:function(){U&&(d(U),t())},ref:G},j("Choose","presto-player")))))},M=wp.i18n.__,z=wp.element,W=z.useState,H=z.useEffect,Y=function(e){var t=e.closePopup,r=e.noticeOperations,n=e.onSelect,a=e.isPrivate,o=W([]),l=Object(s.a)(o,2),c=l[0],p=l[1],d=W(!1),b=Object(s.a)(d,2),m=b[0],y=b[1],f=W(0),h=Object(s.a)(f,2),O=h[0],g=h[1],j=W(""),w=Object(s.a)(j,2),_=w[0],E=w[1],R=W(""),k=Object(s.a)(R,2),P=k[0],C=k[1],x=a?"private-videos":"public-videos";H((function(){g(0),C("")}),[]);var S=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(""),y(!0),E(M("Uploading","presto-player")),v({file:t[0],path:"presto-player/v1/bunny/upload",onProgress:function(e){g(e-10)},onComplete:N,onError:function(e){C(e.message),g(0),y(!1)}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(i.a)(u.a.mark((function e(t){var r,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.path,n=t.name,E(M("Storing","presto-player")),e.prev=2,e.next=5,wp.apiFetch({path:"presto-player/v1/bunny/".concat(x),method:"POST",data:{path:r,name:n}});case 5:a=e.sent,p(a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),C(e.t0.message),console.error(e.t0);case 13:return e.prev=13,g(0),y(!1),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[2,9,13,17]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p((c||[]).filter((function(e){return e!==t}))),e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/".concat(x),method:"DELETE",data:{name:null==t?void 0:t.title}});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),C(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/".concat(x)});case 4:t=e.sent,p(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),C(e.t0.message);case 11:return e.prev=11,y(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return React.createElement(U,{onClose:t,progressMessage:_,fetching:m,error:P,onUpload:S,onLoad:D,items:c,progress:O,onDelete:T,onSelect:n,onError:function(e){r.removeAllNotices(),r.createErrorNotice(e)},header:M(a?"Bunny.net Private Video Storage":"Bunny.net Public Video Storage","presto-player"),title:M(a?"Private Video Library":"Public Video Library","presto-player")})},G=r(8);function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var K=(0,wp.data.combineReducers)({videosReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEOS":return t.value;case"ADD_VIDEOS":return[].concat(Object(G.a)(e),Object(G.a)(t.value));case"ADD_VIDEO":return[].concat(Object(G.a)(e),[t.value]);case"UPDATE_VIDEO":return e.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:Z(Z({},e),t.value)}));case"REMOVE_VIDEO":return e.filter((function(e){return e.guid!==t.value.guid}))}return e},collectionsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COLLECTIONS":return t.value;case"ADD_COLLECTION":return[].concat(Object(G.a)(e),[t.value]);case"UPDATE_COLLECTION":return e.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:Z(Z({},e),t.value)}));case"REMOVE_COLLECTION":return e.filter((function(e){return e!==t.value}))}return e},uploadsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_UPLOADS":return t.value;case"ADD_UPLOADS":return[].concat(Object(G.a)(e),Object(G.a)(t.value));case"ADD_UPLOAD":return[].concat(Object(G.a)(e),[t.value]);case"UPDATE_UPLOAD":return e.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:Z(Z({},e),t.value)}));case"REMOVE_UPLOAD":return e.filter((function(e){return e!==t.value}))}return e},requestReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{private:!1,collection:"",search:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRIVATE_REQUEST":return Z(Z({},e),{},{private:t.value});case"SET_SEARCH_REQUEST":return Z(Z({},e),{},{search:t.value});case"SET_COLLECTION_REQUEST":return Z(Z({},e),{},{collection:t.value})}return e},UIReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,videosFetched:!1,createCollection:!1,selectedId:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING":return Z(Z({},e),{},{loading:t.value});case"SET_VIDEOS_FETCHED":return Z(Z({},e),{},{videosFetched:t.value});case"SET_UI_ITEM":return Z(Z({},e),{},Object(c.a)({},t.item,t.value))}return e},errorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ERROR":return[].concat(Object(G.a)(e),[t.value]);case"REMOVE_ERROR":return e.filter((function(e){return e!==t.value}))}return e}});function Q(e){return(null==e?void 0:e.videosReducer)||[]}function X(e){return(null==e?void 0:e.collectionsReducer)||[]}function $(e){return(null==e?void 0:e.uploadsReducer)||[]}function J(e){var t;return!(null==e||null===(t=e.requestReducer)||void 0===t||!t.private)}function ee(e){var t;return(null==e||null===(t=e.UIReducer)||void 0===t?void 0:t.loading)||!1}function te(e){return(null==e?void 0:e.errorReducer)||[]}function re(e){var t;return(null==e||null===(t=e.UIReducer)||void 0===t?void 0:t.videosFetched)||!1}function ne(e){var t;return null==e||null===(t=e.requestReducer)||void 0===t?void 0:t.collection}function ae(e,t){var r;return null==e||null===(r=e.UIReducer)||void 0===r?void 0:r[t]}function oe(e){var t;return null!=e&&null!==(t=e.requestReducer)&&void 0!==t&&t.private?"private":"public"}function le(e){return{type:"SET_VIDEOS",value:e}}function ce(e){return{type:"ADD_VIDEOS",value:e}}function ie(e){return{type:"REMOVE_VIDEO",value:e}}function se(e){return{type:"SET_COLLECTIONS",value:e}}function pe(e){return{type:"ADD_COLLECTION",value:e}}function ue(e){return{type:"SET_PRIVATE_REQUEST",value:e}}function de(e){return{type:"SET_SEARCH",value:e}}function be(e){return{type:"SET_COLLECTION_REQUEST",value:e}}function me(e){return{type:"SET_UPLOADS",value:e}}function ye(e){return{type:"ADD_UPLOADS",value:e}}function ve(e){return{type:"REMOVE_UPLOAD",value:e}}function fe(e){return{type:"SET_VIDEOS_FETCHED",value:e}}function he(e){return{type:"SET_LOADING",value:e}}function Oe(e,t){return{type:"SET_UI_ITEM",item:e,value:t}}function ge(e){return{type:"ADD_ERROR",value:e}}function je(e){return{type:"REMOVE_ERROR",value:e}}(0,wp.data.registerStore)("presto-player/bunny-popup",{reducer:K,selectors:n,actions:a});var we,_e,Ee,Re,ke,Pe,Ce,xe,Se,Ne,Te,De,Be,Ae,Le,Ie,Fe,Ve,Ue,Me,ze,We=function(e){return 3==(null==e?void 0:e.status)&&(null==e?void 0:e.availableResolutions.length)},He=function(e){return We(e)||4===(null==e?void 0:e.status)},Ye=function(e){return 0==(null==e?void 0:e.status)?"Processing":1==(null==e?void 0:e.status)?"Uploaded":2==(null==e?void 0:e.status)?"Processing":We(e)?"Playable":3==(null==e?void 0:e.status)?"Encoding":4==(null==e?void 0:e.status)?"Live":5==(null==e?void 0:e.status)?"Error":6==(null==e?void 0:e.status)?"Upload Failed":void 0},Ge=function(e){return null==e||null==e?"":new Date(1e3*e).toISOString().substr(11,8)},qe=function(e){if(null==e||0==e)return"Unknown";if(0==e)return"0 b";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)).toString());return(e/Math.pow(1024,t)).toFixed(2)+" "+["b","KB","MB","GB","TB"][t]},Ze=wp.i18n.__,Ke=wp.components,Qe=Ke.Button,Xe=Ke.BaseControl,$e=Ke.Disabled,Je=Ke.Card,et=Ke.CardBody,tt=wp.element,rt=tt.useState,nt=(tt.useContext,tt.useEffect),at=wp.data,ot=at.dispatch,lt=at.useSelect,ct=function(){var e=rt(!1),t=Object(s.a)(e,2),r=t[0],n=t[1],a=rt(!1),o=Object(s.a)(a,2),l=o[0],c=o[1],p=rt(null),d=Object(s.a)(p,2),b=d[0],m=d[1],y=lt((function(e){return e("presto-player/bunny-popup").isPrivate()})),v=lt((function(e){return e("presto-player/bunny-popup").ui("selectedId")})),h=lt((function(e){return e("presto-player/bunny-popup").videos()}));nt((function(){m(v?h.find((function(e){return e.guid===v})):null)}),[h,v]);var O=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wp.apiFetch({path:"presto-player/v1/bunny/stream/videos/".concat(b.id),method:"DELETE",data:{type:y?"private":"public"}});case 2:ot("presto-player/bunny-popup").removeVideo(b),ot("presto-player/bunny-popup").setUI("selectedId",null),c(!1),n(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=Object(g.a)(we||(we=Object(f.a)(["\n    margin-top: 5px;\n  "])));if(!b)return"";var w,_,E,R,k=function(e){return y?null==e?void 0:e.webPURLSigned:null==e?void 0:e.webPURL};return b&&Object(g.b)("div",{className:"presto-player__media-modal-sidebar-content"},Object(g.b)(Xe,{css:Object(g.a)(_e||(_e=Object(f.a)(["\n            position: relative;\n          "])))},Object(g.b)($e,{key:b.id},He(b)&&k(b)&&Object(g.b)("img",{src:k(b),css:{maxWidth:"100%"}})),Object(g.b)(Qe,{isSmall:!0,isPrimary:!0,isBusy:!He(b),css:Object(g.a)(Ee||(Ee=Object(f.a)(["\n              ","\n              top: 8px;\n              right: 8px;\n              font-size: 11px;\n              color: #ffffff;\n              padding: 2px 10px;\n              border-radius: 9999px;\n            "])),He(b)?"position: absolute;":"")},Ye(b))),Object(g.b)(Xe,null,Object(g.b)(Xe.VisualLabel,null,Ze("Name","presto-player")),Object(g.b)("h3",{css:j},b.title)),!(null==b||!b.visibility)&&Object(g.b)(Xe,null,Object(g.b)(Xe.VisualLabel,null,Ze("Visibility","presto-player")),Object(g.b)("h3",{css:j},b.visibility)),Object(g.b)(Xe,null,Object(g.b)(Xe.VisualLabel,null,Ze("Size","presto-player")),Object(g.b)("h3",{css:j},qe((null==b?void 0:b.size)||0))),Object(g.b)(Xe,null,Object(g.b)(Xe.VisualLabel,null,Ze("Length","presto-player")),Object(g.b)("h3",{css:j},Ge(null==b?void 0:b.length))),Object(g.b)(Xe,null,Object(g.b)(Xe.VisualLabel,null,Ze("Created","presto-player")),Object(g.b)("h3",{css:j},(w=null==b?void 0:b.created_at,_=(w=new Date(w)).getHours(),E=w.getMinutes(),R=_>=12?"pm":"am",_=(_%=12)||12,E=E<10?"0"+E:E,w.getDate()+"-"+(w.getMonth()+1)+"-"+w.getFullYear()+" at "+_+":"+E+R))),Object(g.b)(Xe,null,r?Object(g.b)(Je,null,Object(g.b)(et,null,Object(g.b)("p",null,Object(g.b)("strong",null,Ze("Are you sure?","presto-player"))),Object(g.b)("p",null,Ze("Are you sure you want to delete this video?","presto-player")),Object(g.b)(Qe,{isDestructive:!0,disabled:l,isBusy:l,onClick:function(e){e.preventDefault(),O(),c(!0)}},Ze("Yes","presto-player")),Object(g.b)(Qe,{onClick:function(){return n(!1)}},Ze("Cancel","presto-player")))):Object(g.b)(Qe,{isDestructive:!0,onClick:function(){n(!r)}},Ze("Delete video","presto-player"))))},it=function(e){var t=e.className,r=e.progress;return Object(g.b)("div",{className:t},Object(g.b)("div",{css:Object(g.a)(Re||(Re=Object(f.a)(["\n          height: 100%;\n          background-color: var(--wp-admin-theme-color, #007cba);\n        "]))),style:{width:"".concat(r,"%")}}))},st=function(e){var t=e.progress;return Object(g.b)("div",{css:Object(g.a)(ke||(ke=Object(f.a)(["\n        max-width: 100%;\n        object-fit: cover;\n        width: 100%;\n        height: 140px;\n        background-color: #222;\n        color: white;\n        text-decoration: none;\n        text-align: center;\n        box-sizing: border-box;\n        box-sizing: border-box;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      "])))},Object(g.b)(it,{progress:t,css:Object(g.a)(Pe||(Pe=Object(f.a)(["\n          width: 100%;\n          border-radius: 0px;\n          margin: 0 15px;\n          background-color: #e3e3e3;\n          height: 3px;\n        "])))}))},pt=function(e){var t=e.thumbnail,r=e.title,n=e.footer,a=e.badge,o=e.before,l=e.after;return Object(g.b)("div",Object.assign({className:"presto-player__video-thumb",css:Object(g.a)(Ce||(Ce=Object(f.a)(["\n        cursor: pointer;\n        user-select: none;\n        display: inline-block;\n        position: relative;\n        margin-right: 20px;\n        font-weight: bold;\n        margin-bottom: 20px;\n        width: 220px;\n        flex: 0 0 220px;\n        border: 1px solid #e0e0e0;\n        border-radius: 4px;\n        overflow: hidden;\n      "])))},e),!!o&&o,!!t&&t,Object(g.b)("div",{css:Object(g.a)(xe||(xe=Object(f.a)(["\n          margin: 14px;\n        "])))},!!a&&Object(g.b)("div",{css:Object(g.a)(Se||(Se=Object(f.a)(["\n              position: absolute;\n              top: 8px;\n              right: 8px;\n            "])))},a),!!r&&Object(g.b)("span",{css:Object(g.a)(Ne||(Ne=Object(f.a)(["\n              text-overflow: ellipsis;\n              white-space: nowrap;\n              overflow: hidden;\n              width: 100%;\n              max-width: 100%;\n              display: inline-block;\n              margin-bottom: 7px;\n              font-size: 13px;\n            "])))},r),!!n&&Object(g.b)("div",{css:Object(g.a)(Te||(Te=Object(f.a)(["\n              font-size: 12px;\n              opacity: 0.75;\n              margin-bottom: 7px;\n            "])))},n)),!!l&&l)},ut=wp.components,dt=ut.Icon,bt=ut.Button,mt=wp.element,yt=mt.useEffect,vt=mt.useState,ft=wp.data,ht=ft.useSelect,Ot=ft.dispatch,gt=function(e){var t=e.video,r=vt(),n=Object(s.a)(r,2),a=n[0],o=n[1],l=ht((function(e){return e("presto-player/bunny-popup").isPrivate()})),c=ht((function(e){return e("presto-player/bunny-popup").ui("selectedId")}));yt((function(){o(c?c===t.guid:null)}),[c]);return Object(g.b)(pt,{onClick:function(){Ot("presto-player/bunny-popup").setUI("selectedId",null==t?void 0:t.guid)},css:Object(g.a)(Ue||(Ue=Object(f.a)(["\n        ","\n        border: 1px solid\n          ",";\n      "])),a&&"box-shadow: 0 0 0 0px #fff, 0 0 0 3px var(--wp-admin-theme-color, #007cba);",a?"var(--wp-admin-theme-color, #007cba)":"#e0e0e0"),thumbnail:function(){if(t.status<3)return Object(g.b)(st,{progress:t.encodeProgress});var e=l?null==t?void 0:t.thumbnailURLSigned:null==t?void 0:t.thumbnailURL;return e?Object(g.b)("img",{css:Object(g.a)(Be||(Be=Object(f.a)(["\n            max-width: 100%;\n            object-fit: cover;\n            width: 100%;\n            height: 140px;\n            display: block;\n          "]))),src:e}):void 0}(),badge:Object(g.b)(bt,{isSmall:!0,isPrimary:!0,isBusy:!He(t),css:Object(g.a)(De||(De=Object(f.a)(["\n        font-size: 11px;\n        color: #ffffff;\n        padding: 2px 10px;\n        border-radius: 9999px;\n      "])))},Ye(t)),title:t.title,footer:Object(g.b)("div",{css:Object(g.a)(Ae||(Ae=Object(f.a)(["\n        display: flex;\n        align-items: center;\n      "])))},Object(g.b)("span",{css:Object(g.a)(Le||(Le=Object(f.a)(["\n          margin-right: 10px;\n          display: flex;\n          align-items: center;\n        "])))},Object(g.b)(dt,{css:Object(g.a)(Ie||(Ie=Object(f.a)(["\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n            opacity: 0.5;\n          "]))),icon:"clock",size:14}),Object(g.b)("span",null,Ge(t.length))),Object(g.b)("span",{css:Object(g.a)(Fe||(Fe=Object(f.a)(["\n          display: flex;\n          align-items: center;\n        "])))},Object(g.b)(dt,{css:Object(g.a)(Ve||(Ve=Object(f.a)(["\n            opacity: 0.5;\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n          "]))),icon:"database",size:14}),Object(g.b)("span",null,qe(t.storageSize)))),after:3===t.status?Object(g.b)(it,{css:Object(g.a)(Me||(Me=Object(f.a)(["\n              width: 100%;\n              border-radius: 0px;\n              margin: 0;\n              background-color: #e3e3e3;\n              height: 3px;\n            "]))),progress:t.encodeProgress}):""})},jt=wp.components,wt=jt.Flex,_t=jt.FlexBlock,Et=jt.Spinner,Rt=function(e){var t=e.className;return Object(g.b)(wt,{className:t},Object(g.b)(_t,{css:{textAlign:"center"}},Object(g.b)(Et,null)))};function kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ct,xt,St,Nt,Tt,Dt,Bt,At,Lt,It,Ft=wp.i18n.__,Vt=wp.element,Ut=Vt.useState,Mt=Vt.useEffect,zt=Vt.Fragment,Wt=wp.components,Ht=Wt.Flex,Yt=Wt.FormFileUpload,Gt=Wt.Notice,qt=wp.data,Zt=qt.dispatch,Kt=qt.useSelect,Qt=function(){var e=Ut(!1),t=Object(s.a)(e,2),r=t[0],n=t[1],a=Ut(""),o=Object(s.a)(a,2),l=o[0],c=o[1],p=Kt((function(e){return e("presto-player/bunny-popup").videosFetched()})),d=Kt((function(e){return e("presto-player/bunny-popup").videos()})),b=Kt((function(e){return e("presto-player/bunny-popup").requestType()})),m=Kt((function(e){return e("presto-player/bunny-popup").currentCollection()}));Mt((function(){p||y()}),[p]),Mt((function(){var e=setInterval((function(){y({sync:!0})}),3e3);return function(){return clearInterval(e)}}),[p]);var y=function(){var e=Object(i.a)(u.a.mark((function e(){var t,r,n,a,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{sync:!1},r=t.sync,e.prev=1,e.next=4,wp.apiFetch({path:wp.url.addQueryArgs("presto-player/v1/bunny/stream/videos",Pt(Pt({type:b},null!=m&&m.guid?{collection:null==m?void 0:m.guid}:{}),{},{items_per_page:500}))});case 4:n=e.sent,Zt("presto-player/bunny-popup").setVideos(null==n?void 0:n.items),c(""),e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(1),401!==(null===e.t0||void 0===e.t0||null===(a=e.t0.data)||void 0===a?void 0:a.status)){e.next=14;break}return c(Ft("Please wait. Pullzone cache is clearing. This may take a minute or two...")),e.abrupt("return");case 14:r||Zt("presto-player/bunny-popup").addError(e.t0.message);case 15:return e.prev=15,Zt("presto-player/bunny-popup").setVideosFetched(!0),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,9,15,18]])})));return function(){return e.apply(this,arguments)}}();return l?Object(g.b)(Gt,{status:"warning",isDismissible:!1},Object(g.b)("div",{css:{display:"flex",alignItems:"center"}},Object(g.b)(Rt,{css:{flex:1}}),l)):p?Object(g.b)(zt,null,d&&d.length?Object(g.b)("div",null,!(null!=m&&m.guid)&&Object(g.b)("h2",null,Ft("Videos","presto-player")),d.map((function(e){if((null==e?void 0:e.collectionId)===((null==m?void 0:m.guid)||""))return Object(g.b)(gt,{key:e.id,video:e,onClick:function(){n(r.guid===e.guid?{}:e)},selected:r.guid===e.guid})}))):Object(g.b)(Ht,{align:"center",justify:"center",css:Object(g.a)(ze||(ze=Object(f.a)(["\n          height: 100%;\n          text-align: center;\n        "])))},Object(g.b)("div",null,Object(g.b)("h2",null,Ft("Drop video files here to upload","presto-player")),Object(g.b)("p",null,Ft("or browse for a video","presto-player")),Object(g.b)(Yt,{isSecondary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(Zt("presto-player/bunny-popup").addUploads(e.target.files),jQuery(e.target).val(null))}},Ft("Upload New Video","presto-player"))))):Object(g.b)(Rt,{css:{flex:1}})},Xt=wp.components.Icon,$t=wp.data.dispatch,Jt=function(e){var t=e.collection;return Object(g.b)(pt,{onClick:function(e){e.preventDefault(),$t("presto-player/bunny-popup").setCollectionRequest(t),$t("presto-player/bunny-popup").setVideosFetched(!1)},title:Object(g.b)("div",null,Object(g.b)(Xt,{icon:"open-folder",css:Object(g.a)(Ct||(Ct=Object(f.a)(["\n              color: var(--wp-admin-theme-color);\n              margin-right: 10px;\n            "])))}),t.name),footer:Object(g.b)("div",null,t.videoCount," Videos")})},er=wp.i18n.__,tr=wp.element.useEffect,rr=wp.data,nr=rr.useSelect,ar=rr.dispatch,or=function(){var e=nr((function(e){return e("presto-player/bunny-popup").collections()})),t=nr((function(e){return e("presto-player/bunny-popup").requestType()})),r=function(){var e=Object(i.a)(u.a.mark((function e(){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wp.apiFetch({path:wp.url.addQueryArgs("presto-player/v1/bunny/stream/collections",{type:t})});case 3:r=e.sent,ar("presto-player/bunny-popup").setCollections(null==r?void 0:r.items),e.next=12;break;case 7:if(e.prev=7,e.t0=e.catch(0),401!==(null===e.t0||void 0===e.t0||null===(n=e.t0.data)||void 0===n?void 0:n.status)){e.next=11;break}return e.abrupt("return");case 11:ar("presto-player/bunny-popup").addError(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return tr((function(){r()}),[]),!!e.length&&Object(g.b)("div",null,Object(g.b)("h2",null,er("Collections","presto-player")),Object(g.b)("div",{css:Object(g.a)(xt||(xt=Object(f.a)(["\n            display: flex;\n            align-items: stretch;\n            overflow: auto;\n          "])))},e.map((function(e){return Object(g.b)(Jt,{collection:e,key:e.guid})}))))},lr=wp.i18n.__,cr=wp.components,ir=cr.Button,sr=cr.TextControl,pr=cr.Modal,ur=cr.BaseControl,dr=wp.element,br=dr.useState,mr=dr.Fragment,yr=wp.data,vr=yr.dispatch,fr=yr.useSelect,hr=function(){var e=br(""),t=Object(s.a)(e,2),r=t[0],n=t[1],a=br(!1),o=Object(s.a)(a,2),l=o[0],c=o[1],p=fr((function(e){return e("presto-player/bunny-popup").requestType()})),d=fr((function(e){return e("presto-player/bunny-popup").ui("createCollection")})),b=function(e){vr("presto-player/bunny-popup").setUI("createCollection",e)},m=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/stream/collections",method:"POST",data:{type:p,name:r}});case 4:t=e.sent,vr("presto-player/bunny-popup").addCollection(t),vr("presto-player/bunny-popup").setCollectionRequest(t),vr("presto-player/bunny-popup").setVideosFetched(!1),n(""),b(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:return e.prev=15,c(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(){return e.apply(this,arguments)}}();return Object(g.b)(mr,null,Object(g.b)(ir,{isSecondary:!0,onClick:function(){return b(!0)}},lr("Create Collection","presto-player")),d&&Object(g.b)(pr,{overlayClassName:"presto-modal",title:"Create New Collection",shouldCloseOnClickOutside:!1,isDismissible:!1},Object(g.b)(sr,{css:Object(g.a)(St||(St=Object(f.a)(["\n              margin-bottom: 15px;\n            "]))),tabIndex:"0",placeholder:lr("Enter a collection name","presto-player"),value:r,onChange:function(e){return n(e)}}),Object(g.b)(ur,null,Object(g.b)(ir,{isBusy:l,disabled:l,isPrimary:!0,onClick:function(){m()}},lr("Create","presto-player"))," ",Object(g.b)(ir,{onClick:function(){return b(!1)}},lr("Cancel","presto-player")))))},Or=wp.i18n.__,gr=wp.components,jr=gr.Flex,wr=gr.FlexBlock,_r=gr.FlexItem,Er=(gr.Button,gr.FormFileUpload),Rr=wp.data.dispatch,kr=function(e){var t=e.afterUpload;return Object(g.b)(jr,null,Object(g.b)(wr,null,Object(g.b)(jr,{justify:"flex-start"},Object(g.b)(Er,{multiple:!0,isPrimary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(Rr("presto-player/bunny-popup").addUploads(e.target.files),jQuery(e.target).val(null))}},Or("Upload Videos","presto-player"))," ",Object(g.b)(hr,null),!!t&&t)),Object(g.b)(_r,null))},Pr=wp.i18n.__,Cr=wp.components.Button,xr=wp.element,Sr=xr.useState,Nr=xr.useEffect,Tr=wp.data.useSelect,Dr=function(e){var t=e.onChoose,r=Sr(null),n=Object(s.a)(r,2),a=n[0],o=n[1],l=Sr(!1),c=Object(s.a)(l,2),i=c[0],p=c[1],u=Tr((function(e){return e("presto-player/bunny-popup").ui("selectedId")})),d=Tr((function(e){return e("presto-player/bunny-popup").videos()}));return Nr((function(){o(u?d.find((function(e){return e.guid===u})):null)}),[d,u]),Nr((function(){3==(null==a?void 0:a.status)&&null!=a&&a.availableResolutions.length?p(!0):p((null==a?void 0:a.status)>3&&(null==a?void 0:a.status)<5)}),[null==a?void 0:a.availableResolutions]),React.createElement(Cr,{isPrimary:!0,disabled:!i,onClick:function(){return t(a)}},null!=a&&a.id&&!i?Pr("Please wait, video is encoding...","presto-player"):Pr("Choose","presto-player"))},Br=wp.components.Icon,Ar=function(e){var t=e.children,r=e.onClick;return Object(g.b)("span",{onClick:r,css:Object(g.a)(Nt||(Nt=Object(f.a)(["\n        display: inline-flex;\n        align-items: center;\n        cursor: pointer;\n        color: var(--wp-admin-theme-color, #007cba);\n        padding: 6px 0;\n      "])))},Object(g.b)(Br,{css:Object(g.a)(Tt||(Tt=Object(f.a)(["\n          width: 14px;\n          height: 14px;\n          font-size: 14px;\n          margin-right: 5px;\n        "]))),icon:"arrow-left-alt",size:14}),Object(g.b)("span",null,t))},Lr=wp.i18n.__,Ir=wp.element.useState,Fr=wp.data,Vr=Fr.dispatch,Ur=Fr.useSelect,Mr=wp.components,zr=Mr.Button,Wr=Mr.Modal,Hr=Mr.BaseControl,Yr=function(){var e=Ir(!1),t=Object(s.a)(e,2),r=t[0],n=t[1],a=Ir(!1),o=Object(s.a)(a,2),l=o[0],c=o[1],p=Ir(""),d=Object(s.a)(p,2),b=(d[0],d[1],Ur((function(e){return e("presto-player/bunny-popup").currentCollection()}))),m=Ur((function(e){return e("presto-player/bunny-popup").requestType()})),y=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/stream/collections/".concat(null==b?void 0:b.guid),method:"DELETE",data:{type:m}});case 4:n(!1),Vr("presto-player/bunny-popup").setCollectionRequest(""),Vr("presto-player/bunny-popup").setVideosFetched(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),n(!1),Vr("presto-player/bunny-popup").addError(e.t0.message);case 13:return e.prev=13,c(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(){return e.apply(this,arguments)}}();return Object(g.b)("div",{css:Object(g.a)(Dt||(Dt=Object(f.a)(["\n        margin-bottom: 2em;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n      "])))},Object(g.b)("div",null,Object(g.b)(Ar,{onClick:function(){Vr("presto-player/bunny-popup").setCollectionRequest(""),Vr("presto-player/bunny-popup").setVideosFetched(!1)}},Lr("Back To Main Folder","presto-player")),Object(g.b)("h2",null,b.name)),Object(g.b)(zr,{isDestructive:!0,onClick:function(){return n(!0)}},Lr("Delete Collection","presto-player")),r&&Object(g.b)(Wr,{shouldCloseOnClickOutside:!1,overlayClassName:"presto-modal",title:"Delete Collection",onRequestClose:function(){return n(!1)}},Object(g.b)("h2",null,Lr("Are you sure you want to delete the collection? ","presto-player")),Object(g.b)("p",null,Lr("This will also delete all videos inside of the collection.","presto-player")),Object(g.b)(Hr,null,Object(g.b)(zr,{isDestructive:!0,disabled:l,isBusy:l,onClick:y},Lr("Delete","presto-player"))," ",Object(g.b)(zr,{onClick:function(){return n(!1)}},Lr("Cancel","presto-player")))))};function Gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}wp.components.Icon;var Zr,Kr,Qr,Xr,$r,Jr,en,tn,rn,nn,an,on,ln,cn=wp.element,sn=cn.useState,pn=cn.useEffect,un=(cn.useContext,wp.data),dn=un.useSelect,bn=(un.dispatch,wp.i18n.__),mn=function(e){var t,r=e.file,n=e.name,a=e.onComplete,o=sn(0),l=Object(s.a)(o,2),c=l[0],p=l[1],d=sn(bn("Uploading","presto-player")),b=Object(s.a)(d,2),m=(b[0],b[1]),y=sn(""),h=Object(s.a)(y,2),O=h[0],j=h[1],w=sn(!1),_=Object(s.a)(w,2),E=_[0],R=_[1],k=dn((function(e){return e("presto-player/bunny-popup").requestType()})),P=dn((function(e){return e("presto-player/bunny-popup").currentCollection()})),C=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(bn("Uploading","presto-player")),t=v({file:null!=r&&r[0]?null==r?void 0:r[0]:r,path:"presto-player/v1/bunny/stream/upload",onProgress:function(e){p(e)},onComplete:x,onError:function(e){j(e.message),m(bn("Error","presto-player")),p(0)}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(u.a.mark((function e(t){var r,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.path,n=t.name,m(bn("Creating","presto-player")),e.prev=2,e.next=5,wp.apiFetch({path:"presto-player/v1/bunny/stream/videos",method:"POST",data:qr({type:k,name:n},null!=P&&P.guid?{collection:P.guid}:{})});case 5:a=e.sent,R(!0),S({path:r,video:a}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),j(e.t0.message);case 13:return e.prev=13,p(0),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.path,n=t.video,e.next=3,wp.apiFetch({path:"presto-player/v1/bunny/stream/store",method:"POST",data:{type:k,path:r,guid:n.guid}});case 3:a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return pn((function(){return C(),function(){t&&t.cancel()}}),[]),E?"":Object(g.b)("div",{css:Object(g.a)(Bt||(Bt=Object(f.a)(["\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        animation: components-button__busy-animation 2500ms infinite linear;\n        opacity: 1;\n        padding: 6px 12px;\n        border-radius: 99999px;\n        border: 1px solid #dddddd;\n        background-size: 100px 100%;\n        background-image: linear-gradient(\n          -45deg,\n          #ffffff 33%,\n          #f3f3f3 33%,\n          #f3f3f3 70%,\n          #ffffff 70%\n        );\n      "])))},Object(g.b)("div",{css:Object(g.a)(At||(At=Object(f.a)(["\n          flex: 1;\n          white-space: nowrap;\n          overflow: hidden;\n          max-width: 150px;\n          text-overflow: ellipsis;\n          font-weight: bold;\n        "])))},!!O&&O,!!n&&n," ",r.name,"..."),Object(g.b)("div",{css:Object(g.a)(Lt||(Lt=Object(f.a)(["\n          display: flex;\n          align-items: center;\n        "])))},Object(g.b)(it,{css:Object(g.a)(It||(It=Object(f.a)(["\n            width: 50px;\n            height: 3px;\n            margin: 0 5px;\n            background: #e3e3e3;\n            border-radius: 9999px;\n            overflow: hidden;\n          "]))),progress:c})))},yn=wp.data.useSelect,vn=function(e){var t=e.removeUpload,r=(e.isPrivate,yn((function(e){return e("presto-player/bunny-popup").uploads()})));return r.length?Object(g.b)("div",{css:Object(g.a)(Zr||(Zr=Object(f.a)(["\n        overflow: auto;\n        display: flex;\n        align-items: center;\n        position: relative;\n      "])))},r.length&&r.map((function(e){return Object(g.b)(mn,{css:Object(g.a)(Kr||(Kr=Object(f.a)(["\n                margin-right: 0px;\n              "]))),file:e,onComplete:function(){return t(e)}})}))):""},fn=wp.i18n.__,hn=wp.components.Modal,On=function(e){var t=e.onClose,r=e.title,n=e.header,a=e.error,o=e.mainContent,l=e.sidebar,c=e.footer;return Object(g.b)(hn,{title:r||fn("Add Media","presto-player"),onRequestClose:t,css:Object(g.a)(Qr||(Qr=Object(f.a)(["\n        width: 100%;\n        height: 100%;\n        max-width: calc(100% - 32px);\n        max-height: calc(100% - 32px);\n\n        .components-modal__content {\n          position: relative;\n          display: flex;\n          flex-direction: column;\n        }\n      "]))),overlayClassName:"presto-player__modal-overlay"},Object(g.b)("div",{css:Object(g.a)(Xr||(Xr=Object(f.a)(['\n          @media screen and (min-width: 780px) {\n            margin: -24px;\n            display: grid;\n            flex: 1;\n            max-height: calc(100vh - 68px);\n            grid-template-columns: 1fr 1fr minmax(0px, 267px);\n            grid-template-rows: minmax(50px, auto) 1fr 60px;\n            grid-template-areas:\n              "header header sidebar"\n              "main main sidebar"\n              "footer footer footer";\n            overflow: hidden;\n          }\n        ']))),"data-cy":"media-modal"},Object(g.b)("div",{css:Object(g.a)($r||($r=Object(f.a)(["\n            grid-area: header;\n            padding: 24px 24px 12px 24px;\n          "])))},Object(g.b)("div",{css:Object(g.a)(Jr||(Jr=Object(f.a)(["\n              display: flex;\n              align-items: center;\n\n              > * {\n                margin-right: 10px;\n              }\n            "])))},n),a),Object(g.b)("div",{css:Object(g.a)(en||(en=Object(f.a)(["\n            grid-area: main;\n            display: grid;\n            overflow: hidden;\n\n            .components-drop-zone__provider {\n              overflow: hidden;\n              display: grid;\n            }\n\n            .components-drop-zone {\n              z-index: 99;\n            }\n          "])))},o),Object(g.b)("div",{css:Object(g.a)(tn||(tn=Object(f.a)(["\n            display: none;\n            grid-area: sidebar;\n            padding: 0 16px;\n            z-index: 75;\n            background: #f3f3f3;\n            border-left: 1px solid #ddd;\n            overflow: auto;\n\n            @media screen and (min-width: 780px) {\n              display: block;\n            }\n\n            .sidebar-content {\n              padding: 16px 0;\n            }\n          "])))},l),Object(g.b)("div",{css:Object(g.a)(rn||(rn=Object(f.a)(["\n            grid-area: footer;\n            border-top: 1px solid #ddd;\n            display: flex;\n            align-items: center;\n            justify-content: flex-end;\n            padding: 8px;\n          "])))},c)))},gn=wp.i18n.__,jn=wp.components,wn=(jn.Button,jn.DropZone),_n=jn.DropZoneProvider,En=jn.Notice,Rn=wp.element,kn=(Rn.useState,Rn.useEffect),Pn=(Rn.Fragment,wp.data),Cn=Pn.dispatch,xn=Pn.useSelect,Sn=function(e){var t=e.onClose,r=e.onChoose,n=xn((function(e){return e("presto-player/bunny-popup").isPrivate()})),a=xn((function(e){return e("presto-player/bunny-popup").uploads()})),o=xn((function(e){return e("presto-player/bunny-popup").currentCollection()})),l=xn((function(e){return e("presto-player/bunny-popup").errors()}));kn((function(){Cn("presto-player/bunny-popup").setVideosFetched(!1),Cn("presto-player/bunny-popup").setCollections([]),Cn("presto-player/bunny-popup").setVideos([])}),[]);var c=function(e){Cn("presto-player/bunny-popup").addUploads(e)},i=gn(n?"Private Stream Library":"Public Stream Library","presto-player"),s=Object(g.b)(kr,{afterUpload:Object(g.b)(vn,{uploads:a,removeUpload:function(e){Cn("presto-player/bunny-popup").removeUpload(e)},isPrivate:n})}),p=Object(g.b)(ct,null),u=Object(g.b)(Dr,{onChoose:r});return Object(g.b)(On,{title:i,header:s,mainContent:Object(g.b)(_n,{css:Object(g.a)(nn||(nn=Object(f.a)(["\n          overflow: auto;\n          display: flex;\n          flex-direction: column;\n        "])))},Object(g.b)("div",{css:Object(g.a)(an||(an=Object(f.a)(["\n            padding: 12px 24px;\n            overflow: auto;\n            display: flex;\n            flex-direction: column;\n          "])))},!!l.length&&l.map((function(e){return Object(g.b)(En,{css:Object(g.a)(on||(on=Object(f.a)(["\n                    margin: 0 0 20px 0;\n                  "]))),status:"error",onRemove:function(){return Cn("presto-player/bunny-popup").removeError(e)}},e)})),o?Object(g.b)(Yr,null):Object(g.b)(or,null),Object(g.b)("div",{css:Object(g.a)(ln||(ln=Object(f.a)(["\n              display: flex;\n              align-items: stretch;\n            "])))},Object(g.b)(Qt,null)),Object(g.b)(wn,{label:"Drop files",onFilesDrop:c}))),onClose:function(){a.length?confirm("Discard your uploads?")&&(t(),Cn("presto-player/bunny-popup").setUploads([])):t()},footer:u,sidebar:p})},Nn=wp.i18n.__,Tn=wp.element.useEffect,Dn=wp.data.dispatch,Bn=function(e){var t=e.closePopup,r=e.onSelect,n=e.isPrivate;return Tn((function(){Dn("presto-player/bunny-popup").setIsPrivate(n)}),[n]),React.createElement(Sn,{onClose:t,onChoose:function(e){e.url=e.playlistURL,e.thumbnail=e.thumbnailURL,e.preview=e.webPURL,r(e)},header:Nn(n?"Private Stream Library":"Public Stream Library","presto-player"),title:Nn(n?"Private Video Stream":"Public Video Stream","presto-player")})},An=wp.i18n.__,Ln=wp.element.useState,In="".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"bunny/"),Fn=wp.i18n.__,Vn=wp.element.useState,Un="".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"bunny/stream/"),Mn=wp.i18n.__,zn=wp.components,Wn=zn.Button,Hn=zn.TextControl,Yn=zn.Placeholder,Gn=zn.Flex,qn=zn.FlexBlock,Zn=zn.ExternalLink,Kn=zn.Spinner,Qn=zn.FlexItem,Xn=zn.Notice,$n=wp.element.useEffect,Jn=function(e){var t=e.onRefetch,r=e.type,n=e.autoSubmit,a="stream"===r?function(e){var t=Vn(""),r=Object(s.a)(t,2),n=r[0],a=r[1],o=Vn(""),l=Object(s.a)(o,2),c=l[0],p=l[1],d=Vn(!1),b=Object(s.a)(d,2),m=b[0],y=b[1],v=Vn(0),f=Object(s.a)(v,2),h=f[0],O=f[1],g=Vn(""),j=Object(s.a)(g,2),w=j[0],_=j[1],E=function(e){return e.includes("Authorization has been denied")?"Your API key is incorrect. Please double-check to make sure you've copied it correctly.":e.includes("localhost")?"You cannot use a CDN on a local site. Please use Bunny.net on a live, publicly accessible site.":e};return{saveKey:function(){var t=Object(i.a)(u.a.mark((function t(){var r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return _(""),t.prev=1,y(!0),O(0),p(Fn("Validating API Key...","presto-player")),t.next=7,wp.apiFetch({url:"".concat(Un,"api-key"),method:"POST",data:{api_key:n}});case 7:if(r=t.sent,r.success){t.next=11;break}throw{message:"Could not save the API key. Please double check it to make sure it's correct."};case 11:t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(1),O(0),_(null!==t.t0&&void 0!==t.t0&&t.t0.message?E(t.t0.message):"Something went wrong. Please try again"),t.abrupt("return");case 18:return t.prev=18,O(1),y(!1),p(""),t.finish(18);case 23:return t.prev=23,y(!0),p(Fn("Setting up public video library. This make take a few moments...","presto-player")),t.next=28,wp.apiFetch({url:"".concat(Un,"library"),method:"POST",data:{type:"public"}});case 28:a=t.sent,a.id,t.next=37;break;case 32:return t.prev=32,t.t1=t.catch(23),O(0),_(null!==t.t1&&void 0!==t.t1&&t.t1.message?E(t.t1.message):"Something went wrong. Please try again"),t.abrupt("return");case 37:return t.prev=37,O(2),y(!1),p(""),t.finish(37);case 42:return t.prev=42,y(!0),p(Fn("Setting up private video library. This make take a few moments...","presto-player")),t.next=47,wp.apiFetch({url:"".concat(Un,"library"),method:"POST",data:{type:"private"}});case 47:t.next=54;break;case 49:return t.prev=49,t.t2=t.catch(42),O(0),_(null!==t.t2&&void 0!==t.t2&&t.t2.message?E(t.t2.message):"Something went wrong. Please try again"),t.abrupt("return");case 54:return t.prev=54,O(2),y(!1),p(""),t.finish(54);case 59:e();case 60:case"end":return t.stop()}}),t,null,[[1,13,18,23],[23,32,37,42],[42,49,54,59]])})));return function(){return t.apply(this,arguments)}}(),setApikey:a,step:h,saveMessage:c,saving:m,error:w,totalSteps:3}}(t):function(e){var t=Ln(""),r=Object(s.a)(t,2),n=r[0],a=r[1],o=Ln(""),l=Object(s.a)(o,2),c=l[0],p=l[1],d=Ln(!1),b=Object(s.a)(d,2),m=b[0],y=b[1],v=Ln(0),f=Object(s.a)(v,2),h=f[0],O=f[1],g=Ln(""),j=Object(s.a)(g,2),w=j[0],_=j[1],E=function(e){return e.includes("Authorization has been denied")?"Your API key is incorrect. Please double-check to make sure you've copied it correctly.":e.includes("localhost")?"You cannot use a CDN on a local site. Please use Bunny.net on a live, publicly accessible site.":e};return{saveKey:function(){var t=Object(i.a)(u.a.mark((function t(){var r,a,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return _(""),t.prev=1,y(!0),O(0),p(An("Validating API Key...","presto-player")),t.next=7,wp.apiFetch({url:"".concat(In,"api-key"),method:"POST",data:{api_key:n}});case 7:if(r=t.sent,r.success){t.next=11;break}throw{message:"Could not save the API key. Please double check it to make sure it's correct."};case 11:t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(1),O(0),_(null!==t.t0&&void 0!==t.t0&&t.t0.message?E(t.t0.message):"Something went wrong. Please try again"),t.abrupt("return");case 18:return t.prev=18,O(1),y(!1),p(""),t.finish(18);case 23:return t.prev=23,y(!0),p(An("Setting up storage zones. This make take a few minutes...","presto-player")),t.next=28,wp.apiFetch({url:"".concat(In,"storage-zones"),method:"POST"});case 28:a=t.sent,a.id,t.next=37;break;case 32:return t.prev=32,t.t1=t.catch(23),O(0),_(null!==t.t1&&void 0!==t.t1&&t.t1.message?E(t.t1.message):"Something went wrong. Please try again"),t.abrupt("return");case 37:return t.prev=37,O(2),y(!1),p(""),t.finish(37);case 42:return t.prev=42,y(!0),p(An("Setting up pull zones. This make take a few minutes...","presto-player")),t.next=47,wp.apiFetch({url:"".concat(In,"pull-zones"),method:"POST"});case 47:o=t.sent,o.id,t.next=56;break;case 51:return t.prev=51,t.t2=t.catch(42),O(0),_(null!==t.t2&&void 0!==t.t2&&t.t2.message?E(t.t2.message):"Something went wrong. Please try again"),t.abrupt("return");case 56:return t.prev=56,O(3),y(!1),p(""),t.finish(56);case 61:e();case 62:case"end":return t.stop()}}),t,null,[[1,13,18,23],[23,32,37,42],[42,51,56,61]])})));return function(){return t.apply(this,arguments)}}(),setApikey:a,step:h,saveMessage:c,saving:m,error:w,totalSteps:3}}(t),o=a.saveKey,l=a.apikey,c=a.setApikey,p=a.saveMessage,d=a.saving,b=a.totalSteps,m=a.step,y=a.error;return $n((function(){n&&o()}),[n]),React.createElement(Yn,{label:Mn("Bunny.net Video","presto-player"),instructions:React.createElement(React.Fragment,null,Mn("Enter your Bunny.net API key, which can be found on your Bunny CDN Account page.","presto-player")," ",React.createElement(Zn,{href:"https://bunnycdn.com/dashboard/account"},Mn("Get My API Key","presto-player")))},d?React.createElement(Gn,null,React.createElement(Qn,null,React.createElement(Kn,null)),React.createElement(qn,null,p,React.createElement("progress",{className:"presto-progress",max:b,value:m,style:{width:"100%"}}))):React.createElement("form",{onSubmit:function(e){e.preventDefault(),o()}},y&&React.createElement(Gn,{style:{width:"100%"}},React.createElement(qn,null,React.createElement(Xn,{status:"error",isDismissible:!1},y))),React.createElement(Gn,{style:{width:"100%",maxWidth:"400px"}},React.createElement(qn,null,React.createElement(Hn,{value:l,onChange:function(e){return c(e)},className:"presto-link-placeholder-input",type:"password",autoComplete:"off",placeholder:Mn("Your Bunny.net API Key","presto-player"),required:!0})),React.createElement(Qn,null,React.createElement(Wn,{isPrimary:!0,style:{marginBottom:"8px"},type:"submit"},Mn("Next","presto-player")," →")))))},ea=r(22),ta=r(14);function ra(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ra(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var aa=wp.components,oa=aa.Button,la=aa.Disabled,ca=aa.DropdownMenu,ia=aa.Spinner,sa=aa.Toolbar,pa=aa.withNotices,ua=aa.BaseControl,da=aa.Placeholder,ba=aa.ToggleControl,ma=wp.editor,ya=ma.BlockControls,va=ma.InspectorControls,fa=wp.i18n.__,ha=wp.compose.compose,Oa=wp.element,ga=Oa.useEffect,ja=Oa.useState,wa=Oa.Fragment,_a=wp.data.dispatch,Ea=ha([Object(m.a)(),Object(b.a)()])(pa((function(e){var t,r,n=e.attributes,a=e.setAttributes,o=e.noticeOperations,l=e.branding,c=(e.isSelected,e.presetData),p=e.createVideo,b=e.lockSave,m=e.unlockSave,v=e.onRemoveSrc,f=e.renderKey,h=e.defaultPreset,O=n.poster,g=n.src,j=n.id,w=n.tracks,_=n.visibility,E=n.previewSrc,R=n.thumbnail,k=ja(""),P=Object(s.a)(k,2),C=P[0],x=P[1],S=ja(!1),N=Object(s.a)(S,2),T=N[0],D=N[1],B=ja(""),A=Object(s.a)(B,2),L=A[0],I=A[1],F=ja({stream:!1,storage:!1}),V=Object(s.a)(F,2),U=V[0],M=V[1],z=ja(!1),W=Object(s.a)(z,2),H=W[0],G=W[1],q=ja(!1),Z=Object(s.a)(q,2),K=Z[0],Q=Z[1],X=ja(!1),$=Object(s.a)(X,2),J=($[0],$[1]),ee=ja(!1),te=Object(s.a)(ee,2),re=te[0],ne=te[1],ae=wp.data.useSelect((function(e){return e("core").canUser("read","settings")})),oe="private"===_,le=null===(t=prestoPlayerAdmin)||void 0===t||null===(r=t.bunny)||void 0===r?void 0:r.disable_legacy_storage;function ce(e){e.url?(a(na(na({src:e.url,preset:null==h?void 0:h.id},null!=e&&e.thumbnail?{thumbnail:e.thumbnail}:{}),null!=e&&e.preview?{preview:e.preview}:{})),D(!0),b(),p(na({src:e.url,type:"bunny",title:e.title},null!=e&&e.guid?{external_id:e.guid}:{})).catch((function(e){a({src:""}),console.error(e)})).finally((function(){m(),D(!1)}))):a({src:void 0,id:void 0})}ga((function(){_a("presto-player/bunny-popup").setIsPrivate("private"===_)}),[_]),ga((function(){var e,t,r,n,a,o;M({storage:null===(e=prestoPlayerAdmin)||void 0===e||null===(t=e.isSetup)||void 0===t||null===(r=t.bunny)||void 0===r?void 0:r.storage,stream:null===(n=prestoPlayerAdmin)||void 0===n||null===(a=n.isSetup)||void 0===a||null===(o=a.bunny)||void 0===o?void 0:o.stream})}),[]);var ie=function(){var e=Object(i.a)(u.a.mark((function e(){var t,r,n,a,o,l,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wp.apiFetch({path:"wp/v2/settings"});case 3:t=e.sent,r=t.presto_player_bunny_pull_zones,n=t.presto_player_bunny_storage_zones,a=t.presto_player_bunny_stream_private,o=t.presto_player_bunny_stream_public,Q(!0),a||G(!0),c=(l=function(e){return!(null==e||!e.private_id||null==e||!e.public_id)})(r)||l(n),i=(null==a?void 0:a.pull_zone_url)&&(null==o?void 0:o.pull_zone_url),M({storage:c,stream:i}),I(c||i?"":"stream");case 15:return e.prev=15,J(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,,15,18]])})));return function(){return e.apply(this,arguments)}}();ga((function(){ae?ie():Q(!0)}),[ae]);var se=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!oe){e.next=7;break}return e.next=3,d(g);case 3:t=e.sent,a({previewSrc:t}),e.next=8;break;case 7:a({previewSrc:g});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();ga((function(){se()}),[g]);var pe=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!oe){e.next=7;break}return e.next=3,d(R);case 3:(t=e.sent)&&a({previewThumbnail:t}),e.next=8;break;case 7:a({previewThumbnail:R});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();ga((function(){pe()}),[R]);var ue=function(){var e=[];return!H&&e.push({title:U.stream?fa("Reconnect Stream","presto-player"):fa("Connect Stream","presto-player"),onClick:function(){I("stream"),ne(!1)}}),!le&&e.push({title:U.storage?fa("Reconnect Storage (Classic)","presto-player"):fa("Connect Storage (Classic)","presto-player"),onClick:function(){return I("storage")}}),React.createElement(ca,{icon:"ellipsis",label:fa("Connection Options","presto-player"),controls:e})};return T||!K?React.createElement(da,{className:"presto-player__placeholder is-loading"},React.createElement(ia,null)):"stream"===L?React.createElement(Jn,{type:"stream",autoSubmit:re,onRefetch:function(){Q(!1),ie()}}):"storage"===L?React.createElement(Jn,{type:"storage",onRefetch:function(){Q(!1),ie()}}):j?React.createElement(React.Fragment,null,React.createElement(ya,null,React.createElement(y.a,{tracks:w,onChange:function(e){a({tracks:e})}}),React.createElement(sa,null,React.createElement(oa,{onClick:function(){return v()}},fa("Replace","presto-player")))),React.createElement(va,null,React.createElement(ea.a,{setAttributes:a,attributes:n})),React.createElement("figure",{className:"wp-block-video"},React.createElement(la,null,React.createElement(ta.a,{poster:O,src:E,id:j,type:"bunny",attributes:n,setAttributes:a,preset:c,branding:l,key:f})))):React.createElement("div",null,React.createElement(da,{label:fa(oe?"Bunny.net Private Video":"Bunny.net Video","presto-player"),icon:oe?React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})):React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polyline",{points:"8 17 12 21 16 17"}),React.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),React.createElement("path",{d:"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"})),instructions:React.createElement(React.Fragment,null,fa("Add or select a Bunny.net video","presto-player"))},React.createElement(ua,{className:"presto-player__placeholder-control"},React.createElement(ba,{label:"Private Video",help:oe?"Video is only accessible to those who are logged in.":"Video is accessible to everyone.",checked:oe,onChange:function(e){a({visibility:e?"private":"public"})}})),React.createElement(wa,null,U.stream&&React.createElement(oa,{isPrimary:!0,onClick:function(){return x("stream")}},fa(oe?"Add/Select Private Video Stream":"Add/Select Video Stream","presto-player")),!le&&U.storage&&React.createElement(oa,{isSecondary:U.stream,isPrimary:!U.stream,onClick:function(){return x("storage")}},fa(oe?"Add/Select Private Video (Classic)":"Add/Select Video (Classic)","presto-player")),!U.stream&&!H&&U.storage&&React.createElement(oa,{isSecondary:!0,onClick:function(){ne(!0),I("stream")}},fa("Enable Bunny.net Stream!","presto-player")),!!ae&&ue())),"storage"===C&&React.createElement(Y,{isPrivate:oe,closePopup:function(){return x("")},noticeOperations:o,onSelect:ce}),"stream"===C&&React.createElement(Bn,{isPrivate:oe,closePopup:function(){return x("")},noticeOperations:o,onSelect:ce}))}))),Ra=r(17);function ka(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ka(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ca=wp.i18n.__,xa="presto-player/bunny",Sa=Pa(Pa({},Ra.a),{},{attributes:Pa(Pa({},Ra.a.attributes),{thumbnail:{type:String,default:""},preview:{type:String,default:""}}),premium:!0,title:Ca("Presto Bunny.net Video","presto-player"),description:Ca("Serve video through Bunny.net CDN.","presto-player"),variations:[{name:"public",isDefault:!0,title:Ca("Presto Bunny.net Video","presto-player"),description:Ca("Serve public video through Bunny.net CDN.","presto-player"),attributes:{visibility:"public"}},{name:"private",title:Ca("Presto Bunny.net Private Video","presto-player"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})),description:Ca("Serve private, secure video through Bunny.net CDN.","presto-player"),attributes:{visibility:"private"}}],icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polyline",{points:"8 17 12 21 16 17"}),React.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),React.createElement("path",{d:"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"})),edit:Ea})},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return ot})),r.d(t,"options",(function(){return lt}));var n=r(8),a=r(5),o=r(3),l=r(1),c=r(19),i=r.n(c),s=r(15),p=r(4),u=r(13),d=r(16),b=r(24),m=window.location.href,y=function(e){var t=e.src,r=e.onChange,n=e.onSubmit,a=e.onClose;return React.createElement(b.URLPopover,{onClose:a},React.createElement("form",{className:"block-editor-media-placeholder__url-input-form",onSubmit:n},React.createElement("input",{"data-cy":"url-input",className:"block-editor-media-placeholder__url-input-field",type:"url","aria-label":Object(o.__)("URL","presto-player"),placeholder:Object(o.__)("Paste an mp3 URL","presto-player"),onChange:r,value:t}),React.createElement(p.Button,{"data-cy":"url-submit",className:"block-editor-media-placeholder__url-input-submit-button",icon:"editor-break",label:Object(o.__)("Apply","presto-player"),type:"submit"})))};var v=Object(p.withFilters)("editor.MediaPlaceholder")((function(e){var t=e.value,r=void 0===t?{}:t,n=e.allowedTypes,a=void 0===n?[]:n,c=e.className,v=e.icon,f=e.url,h=void 0===f||f,O=e.labels,g=void 0===O?{}:O,j=e.mediaPreview,w=e.notices,_=e.isAppender,E=e.isPrivate,R=e.addToGallery,k=e.onSelect,P=e.onCancel,C=e.onSelectURL,x=e.onDoubleClick,S=e.children,N=e.allowURLs,T=Object(d.useSelect)((function(e){return(0,e("core/block-editor").getSettings)().mediaUpload}),[]),D=Object(u.useState)(""),B=Object(l.a)(D,2),A=B[0],L=B[1],I=Object(u.useState)(!1),F=Object(l.a)(I,2),V=F[0],U=F[1];Object(u.useEffect)((function(){var e;L(null!==(e=null==r?void 0:r.src)&&void 0!==e?e:"")}),[r]);var M=function(e){L(e.target.value)},z=function(){U(!0)},W=function(){U(!1)},H=function(e){e.preventDefault(),A&&C&&(C(A),W())},Y=function(e,t){var r=g.instructions,n=g.title;T||C||(r=Object(o.__)("To edit this block, you need permission to upload media.","presto-player"));var a=i()("block-editor-media-placeholder",c,{"is-appender":_});return React.createElement(p.Placeholder,{icon:v,label:n,instructions:r,className:a,notices:w,onClick:t,onDoubleClick:x,preview:j},S,e)},G=function(){return C&&React.createElement("div",{className:"block-editor-media-placeholder__url-input-container"},h&&!1===E&&React.createElement(p.Button,{className:"block-editor-media-placeholder__button",onClick:z,isPressed:V,isTertiary:!0},Object(o.__)("Audio URL","presto-player")),V&&React.createElement(y,{src:A,onChange:M,onSubmit:H,onClose:W}))};return React.createElement(b.MediaUploadCheck,{fallback:Y(G())},function(){var e=React.createElement(b.MediaUpload,{title:E?Object(o.__)("Select or Upload Private Audio","presto-player"):Object(o.__)("Select or Upload Audio","presto-player"),addToGallery:R,gallery:!1,multiple:!1,onSelect:function(e){s.a.unsetUrlParams(),k(e)},onClose:function(){s.a.unsetUrlParams()},allowedTypes:a,value:Array.isArray(r)?r.map((function(e){return e.id})):r.id,render:function(e){var t=e.open;return React.createElement(p.Button,{isPrimary:!0,onClick:function(e){e.stopPropagation(),s.a.unsetUrlParams(),E?s.a.setUrlPrivate(m):s.a.setUrlPublic(m),t()}},E?Object(o.__)("Add/Select Private Audio","presto-player"):Object(o.__)("Add/Select Audio","presto-player"))}});if(T){var t=React.createElement(React.Fragment,null,e,!!N&&G(),P&&React.createElement(p.Button,{className:"block-editor-media-placeholder__cancel-button",title:Object(o.__)("Cancel","presto-player"),isLink:!0,onClick:P},Object(o.__)("Cancel","presto-player")));return Y(t)}return Y(e)}())})),f=r(10),h=wp.i18n.__,O=wp.components,g=(O.withNotices,O.BaseControl),j=O.ToggleControl,w=O.Notice,E=["audio"],R=function(e){var t,r,n=e.attributes,o=e.setAttributes,l=e.onSelectURL,c=e.onSelect,i=e.children,s="private"===n.visibility;return React.createElement(v,(r={icon:s?React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),React.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})):React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"presto-block-icon"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})),labels:{title:h("Presto Audio","presto-player"),instructions:h("Upload a audio file, or pick one from your media library.","presto-player")},accept:"audio/*",setAttributes:o,allowedTypes:E,switcher:!0,isPrivate:s,allowURLs:!s,onSelectURL:l,onSelect:c,value:n},Object(a.a)(r,"allowURLs",!0),Object(a.a)(r,"onError",(function(){return console.log("error")})),r),React.createElement("div",{style:{width:"100%"}},React.createElement(g,{className:"presto-player__placeholder-control"},React.createElement(j,{label:React.createElement("div",null,h("Make Private","presto-player")," ",!(null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium)&&React.createElement(f.a,null)),help:h(s?"This audio is only accessible to those who are logged in.":"This audio is currently accessible to everyone.","presto-player"),checked:s,onChange:function(e){var t;null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium?o({visibility:e?"private":"public"}):dispatch("presto-player/player").setProModal(!0)}})),!!i&&React.createElement("div",{style:{width:"100%"}},i),!!s&&React.createElement(w,{status:"warning",isDismissible:!1},React.createElement("div",null,React.createElement("div",null,React.createElement("strong",null,h("Note","presto-player"))),h("Private audio uses php to stream your audio. Keep in mind this will use up disk space and bandwidth so it may not be an appropriate choice for some hosts.","presto-player")))))},k=r(43),P=r(29),C=r(30),x=r(39),S=r(6),N=r(7),T=r(2),D=r.n(T),B=r(9),A=r(31),L=r(0),I=r(23),F=r(14);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M,z,W=function(e){var t,r=e.state,n=e.branding,a=e.menu,c=e.src,i=e.poster,s=e.currentTime,d=e.preload,b=e.mediaTitle,m=e.overlays,y=e.isDisabled,v=void 0===y||y,f=Object(u.useState)(1),h=Object(l.a)(f,2),O=h[0],g=h[1],j=r.email_collection,w=r.cta;Object(u.useEffect)((function(){g(O+1)}),[r.skin,r["play-large"],r.rewind,r.play,r["fast-forward"],r.progress,r["current-time"],r.mute,r.volume,r.speed,r.pip,r.fullscreen,r.captions,r.hide_logo]);var _={email:!(null==j||!j.enabled)&&React.createElement(I.b,{className:"email-overlay",slot:"player-end",headline:null==j?void 0:j.headline,style:U(U({"--presto-player-email-border-radiuss":"".concat(null==j?void 0:j.button_radius,"px"),"--plyr-color-main":(null==r?void 0:r.background_color)||(null==n?void 0:n.color)},j.button_color?{"--presto-player-button-color":"".concat(j.button_color)}:{}),j.button_text_color?{"--presto-player-button-text":"".concat(j.button_text_color)}:{}),defaultHeadline:Object(o.__)("Enter your email to play.","presto-player"),bottomText:null==j?void 0:j.bottom_text,allowSkip:null==j?void 0:j.allow_skip,skipText:Object(o.__)("Skip","presto-player"),buttonText:null==j?void 0:j.button_text,placeholder:Object(o.__)("Email address","presto-player"),i18n:window.prestoPlayer.i18n,type:"audio"}),cta:!(null==w||!w.enabled)&&React.createElement(I.a,{className:"cta-overlay",style:U(U(U({"--presto-player-button-border-radius":"".concat(w.button_radius,"px")},null!=w&&w.background_opacity?{"--presto-player-cta-background-opacity":"".concat((null==w?void 0:w.background_opacity)/100)}:{}),w.button_color?{"--presto-player-button-color":"".concat(w.button_color)}:{}),w.button_text_color?{"--presto-player-button-text":"".concat(w.button_text_color)}:{}),slot:"player-end",headline:null==w?void 0:w.headline,"bottom-text":null==w?void 0:w.bottom_text,"button-link":null==w?void 0:w.button_link,"allow-skip":100!==(null==w?void 0:w.percentage)&&(null==w?void 0:w.show_skip),borderRadius:null==w?void 0:w.border_radius,"allow-rewatch":100===(null==w?void 0:w.percentage)&&(null==w?void 0:w.show_rewatch),"skip-text":Object(o.__)("Skip","presto-player"),"show-button":null==w?void 0:w.show_button,"button-text":null==w?void 0:w.button_text,i18n:window.prestoPlayer.i18n,type:"audio"})};return React.createElement(p.Disabled,{isDisabled:v,className:"disable-player"},React.createElement("div",{className:"presto-player__wrapper"},React.createElement(F.a,{src:c||"http://something.mp3",classes:"\n            ".concat("cta"===a&&!(null==w||!w.enabled)&&"cta-active"," \n            ").concat("email"===a&&!(null==j||!j.enabled)&&"email-active"),preset:r,branding:n,i18n:null===(t=prestoPlayerAdmin)||void 0===t?void 0:t.i18n,preload:d,attributes:{chapters:[],poster:i,title:b},type:"audio",currentTime:s?Object(B.e)(s):"",overlays:m,key:O,adminPreview:(null==_?void 0:_[a])||""})))},H=wp.i18n.__,Y=wp.components,G=Y.ToggleControl,q=Y.BaseControl,Z=(Y.HorizontalRule,Y.__experimentalAlignmentMatrixControl,Y.SelectControl),K=function(e){var t=e.state,r=e.updateState,n=e.className;return React.createElement("div",{className:n},React.createElement(q,null,React.createElement("h3",null,H("Behavior","presto-player"))),React.createElement(q,null,React.createElement(G,{label:H("Save Play Position","presto-player"),help:H("Saves the user's play position so when they come back to the page they can continue the audio from where they left off.","presto-player"),onChange:function(e){r({save_player_position:e})},checked:t.save_player_position})),React.createElement(q,null,React.createElement(G,{label:H("Focus Mode","presto-player"),help:H("Play only when tab is visible and audio is in viewport.","presto-player"),onChange:function(e){r({play_video_viewport:e})},checked:t.play_video_viewport})),React.createElement(q,null,React.createElement(G,{label:H("Sticky On Scroll","presto-player"),help:H("Stick audios to the side of the screen when the page is scrolled and the audio is playing.","presto-player"),onChange:function(e){r({sticky_scroll:e})},checked:t.sticky_scroll})),React.createElement(q,null,React.createElement(Z,{label:H("On Audio End","presto-player"),value:t.on_video_end,options:[{value:"select",label:H("Select","presto-player")},{value:"loop",label:H("Loop","presto-player")},{value:"go-to-start",label:H("Go to start","presto-player")}],onChange:function(e){r({on_video_end:e})}})))},Q=wp.i18n.__,X=wp.components,$=X.ToggleControl,J=X.BaseControl,ee=function(e){var t=e.state,r=e.updateState,n=e.className;return React.createElement("div",{className:n},React.createElement(J,null,React.createElement("h3",null,Q("Controls","presto-player"))),React.createElement(J,{className:"presto-player__control--large-play"},React.createElement($,{label:Q("Large Play Button","presto-player"),help:Q("Adds a large play button over the top of the player.","presto-player"),onChange:function(e){r({"play-large":e})},checked:t["play-large"]})),React.createElement(J,{className:"presto-player__control--rewind"},React.createElement($,{label:Q("Rewind","presto-player"),help:Q("Adds a 10 second rewind button to the player.","presto-player"),onChange:function(e){r({rewind:e})},checked:t.rewind})),React.createElement(J,{className:"presto-player__control--play"},React.createElement($,{label:Q("Small Play Button","presto-player"),help:Q("Adds a small play button to the bottom of the player.","presto-player"),onChange:function(e){r({play:e})},checked:t.play})),React.createElement(J,{className:"presto-player__control--fast-forward"},React.createElement($,{label:Q("Fast Forward","presto-player"),help:Q("Adds a 10 second rewind button to the player.","presto-player"),onChange:function(e){r({"fast-forward":e})},checked:t["fast-forward"]})),React.createElement(J,{className:"presto-player__control--progress"},React.createElement($,{label:Q("Progress Bar","presto-player"),help:Q("Shows a seekable progress bar.","presto-player"),onChange:function(e){r({progress:e})},checked:t.progress})),React.createElement(J,{className:"presto-player__control--current-time"},React.createElement($,{label:Q("Current Time","presto-player"),help:Q("Shows the audio timestamp.","presto-player"),onChange:function(e){r({"current-time":e})},checked:t["current-time"]})),React.createElement(J,{className:"presto-player__control--volume"},React.createElement($,{label:Q("Volume","presto-player"),help:Q("Shows a volume bar.","presto-player"),onChange:function(e){r({volume:e,mute:e})},checked:t.volume})),React.createElement(J,{className:"presto-player__control--speed"},React.createElement($,{label:Q("Speed","presto-player"),help:Q("Shows playback speed controls.","presto-player"),onChange:function(e){r({speed:e})},checked:t.speed})))},te=r(12),re=function(e){var t=e.state,r=e.updateState,n=e.className;return React.createElement("div",{className:n},React.createElement(p.BaseControl,null,React.createElement("h3",null,Object(o.__)("Style","presto-player"))),React.createElement(p.BaseControl,null,React.createElement(p.RangeControl,{label:Object(o.__)("Round Corners","presto-player"),help:Object(o.__)("Player border radius size.","presto-player"),value:(null==t?void 0:t.border_radius)||0,onChange:function(e){return r({border_radius:e})},min:0,max:25})),React.createElement(p.BaseControl,null,React.createElement(p.Flex,null,React.createElement(p.BaseControl.VisualLabel,null,React.createElement("p",null,Object(o.__)("Background Color","presto-player"))),React.createElement(te.a,{color:(null==t?void 0:t.background_color)||"#000000",setColor:function(e){r({background_color:e.hex})}}))),React.createElement(p.BaseControl,null,React.createElement(p.Flex,null,React.createElement(p.BaseControl.VisualLabel,null,React.createElement("p",null,Object(o.__)("Control Color","presto-player"))),React.createElement(te.a,{color:(null==t?void 0:t.control_color)||"#000000",setColor:function(e){r({control_color:e.hex})}}))))},ne=r(40),ae=r(32),oe=r(38);function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ie=wp.i18n.__,se=wp.components,pe=se.TextControl,ue=se.BaseControl,de=se.Icon,be=se.Notice,me=se.Button,ye=se.Flex,ve=se.FlexItem,fe=se.SelectControl,he=se.FlexBlock,Oe=se.Modal,ge=wp.element,je=ge.useState,we=ge.useEffect,_e=wp.data,Ee=_e.useSelect,Re=_e.dispatch;var ke=function(e){var t=e.type,r=void 0===t?"new":t,n=e.closeModal,a=e.addPreset,o=e.onSave,c=e.updatePreset,i=e.name,s=void 0===i?"":i,p=e.attributes,u=e.preset,d=void 0===u?{"play-large":!0,rewind:!0,play:!0,"fast-forward":!0,progress:!0,"current-time":!0,mute:!0,volume:!0,speed:!1,pip:!1,save_player_position:!1,reset_on_end:!1,sticky_scroll:!1,hide_logo:!1,border_radius:0,skin:"default",background_color:"",control_color:"",cta:{},email_collection:{},action_bar:{}}:u,b=je(!1),m=Object(l.a)(b,2),y=m[0],v=m[1],f=je(""),h=Object(l.a)(f,2),O=h[0],g=h[1],j=je(""),w=Object(l.a)(j,2),_=w[0],E=w[1],R=je(s),k=Object(l.a)(R,2),P=k[0],C=k[1],x=je(d),T=Object(l.a)(x,2),I=T[0],F=T[1],V=Ee((function(e){return e("presto-player/player").branding()})),U=je(""),H=Object(l.a)(U,2),Y=H[0],G=H[1],q={message:ie("The preset could not be saved. Please reload the page and try again.","presto-player")},Z=Ee((function(e){return e("presto-player/player").youtube()}));we((function(){G(Z.channel_id)}),[null==Z?void 0:Z.channel_id]);var Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};F(ce(ce({},I),e))},X=function(){var e=Object(N.a)(D.a.mark((function e(){var t,r,a,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,t=ce(ce({},I),{name:P}),e.next=5,wp.apiFetch({method:"POST",url:wp.url.addQueryArgs("".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"audio-preset/").concat(d.id),{_method:"PUT"}),data:t});case 5:if(r=e.sent){e.next=8;break}throw q;case 8:c(r),n(),o&&o(r),Object(B.d)({message:ie("Preset updated!","presto-player")}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),g(null!==e.t0&&void 0!==e.t0&&e.t0.message?e.t0.message:q);case 17:return e.prev=17,v(!1),e.finish(17);case 20:return Re("presto-player/player").updateYoutube({channel_id:Y}),a=ce(ce({},Z),{channel_id:Y}),e.prev=22,e.next=25,wp.apiFetch({path:"wp/v2/settings",method:"POST",data:{presto_player_youtube:a}});case 25:null!=(l=e.sent)&&l.presto_player_youtube&&(Re("presto-player/player").setYoutube(null==l?void 0:l.presto_player_youtube),onClose()),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(22),console.log(e.t1);case 32:case"end":return e.stop()}}),e,null,[[1,14,17,20],[22,29]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(N.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,e.next=4,wp.apiFetch({method:"POST",url:prestoPlayer.root+prestoPlayer.prestoVersionString+"audio-preset",data:ce(ce({},{name:P}),I)});case 4:if(t=e.sent){e.next=7;break}throw q;case 7:a(t),n(),o&&o(t),Object(B.d)({message:ie("Preset created!","presto-player")}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),g(null!==e.t0&&void 0!==e.t0&&e.t0.message?e.t0.message:q);case 16:return e.prev=16,v(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),J=[{name:"controls",title:ie("Controls","presto-player"),icon:Object(L.b)(de,{icon:"admin-settings"}),component:Object(L.b)(ee,{updateState:Q,state:I})},{name:"behavior",title:ie("Behavior","presto-player"),icon:Object(L.b)(de,{icon:"admin-generic"}),component:Object(L.b)(K,{updateState:Q,state:I})},{name:"style",title:ie("Style","presto-player"),icon:Object(L.b)(de,{icon:"admin-customizer"}),component:Object(L.b)(re,{updateState:Q,state:I})},{name:"email",title:ie("Email Capture","presto-player"),icon:Object(L.b)(de,{icon:"email"}),component:Object(L.b)(oe.a,{updateState:Q,state:I})},{name:"cta",title:ie("Call To Action","presto-player"),icon:Object(L.b)(de,{icon:"megaphone"}),component:Object(L.b)(ae.a,{updateState:Q,state:I})},{name:"action_bar",title:ie("Action Bar","presto-player"),icon:Object(L.b)(de,{icon:"cover-image"}),component:Object(L.b)(ne.a,{updateState:Q,state:I,value:Y,setValue:G})}];return Object(L.b)(Oe,{title:ie("edit"==r?"Edit A Audio Preset":"Create A New Audio Preset","presto-player"),onRequestClose:n,className:"presto-player__modal-presets",overlayClassName:"presto-player__modal-presets-overlay"},Object(L.b)("div",{className:"presto-player__preset-options","data-cy":"preset-modal"},Object(L.b)(pe,{value:P,hideLabelFromVision:!0,label:ie("Preset Name","presto-player"),onChange:function(e){return C(e)},placeholder:ie("Enter a preset name...","presto-player"),className:"presto-player__modal--style-name",autoFocus:!0}),Object(L.b)(ye,{align:"stretch",className:"presto-player__style-preview-area"},Object(L.b)(ve,{className:"presto-player__style-sidebar"},Object(L.b)("div",null,Object(L.b)(A.a,{items:J,title:ie("Customize","presto-player"),onSelect:E},(function(e){return e.component})))),Object(L.b)(he,{className:"presto-player__style-preview-panel"},Object(L.b)("div",{style:{position:"absolute",top:0,left:0,padding:"20px"}},Object(L.b)(fe,{label:ie("Skin","presto-player"),labelPosition:"side",value:null==I?void 0:I.skin,hideLabelFromVision:!0,options:[{label:ie("Basic","presto-player"),value:"default"},{label:ie("Stacked","presto-player"),value:"stacked"}],onChange:function(e){Q({skin:e})}})),Object(L.b)(W,{poster:p.poster,src:p.src,state:I,branding:V,menu:_,mediaTitle:p.title}))),Object(L.b)("br",null),O&&Object(L.b)(ue,null,Object(L.b)(be,{className:"presto-player__modal--error-notice",status:"error",isDismissible:!1,style:{margin:0}},O.replace(/(<([^>]+)>)/gi,""))),Object(L.b)("div",{css:Object(L.a)(M||(M=Object(S.a)(["\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n          "])))},Object(L.b)("div",{css:Object(L.a)(z||(z=Object(S.a)(["\n              opacity: 0.5;\n              font-size: 12px;\n            "])))},"Preset ID: ",d.id),Object(L.b)("div",null,Object(L.b)(me,{isTertiary:!0,onClick:n,style:{margin:"0 6px"}},ie("Cancel","presto-player")),Object(L.b)(me,{isPrimary:!0,isBusy:y,disabled:y,onClick:function(){if(P)return"edit"===r?X():$();g(ie("You must enter a name for the preset.","presto-player"))},"data-cy":"submit-preset"},ie("edit"==r?"Update Preset":"Create Preset","presto-player"))))))},Pe=wp.i18n.__,Ce=wp.components,xe=Ce.Icon,Se=Ce.Spinner,Ne=Ce.Modal,Te=Ce.Button,De=Ce.ButtonGroup,Be=wp.element.useState,Ae=function(e){var t,r,n=e.preset,a=e.index,o=e.isActive,c=e.remove,i=e.setPreset,s=e.onEdit,p=Be(!1),u=Object(l.a)(p,2),d=u[0],b=u[1],m=Be(!1),y=Object(l.a)(m,2),v=y[0],f=y[1],h=function(){return f(!1)},O=function(){var e=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.id){e.next=3;break}return c(n),e.abrupt("return");case 3:return e.prev=3,b(!0),e.next=7,wp.apiFetch({method:"POST",url:wp.url.addQueryArgs("".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"audio-preset/").concat(n.id),{_method:"DELETE"})});case 7:e.sent&&(c(n),wp.data.dispatch("core/notices").createNotice("success",Pe("Preset trashed.","presto-player"),{type:"snackbar",isDismissible:!0})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0),null!==e.t0&&void 0!==e.t0&&e.t0.message&&wp.data.dispatch("core/notices").createNotice("error",e.t0.message,{type:"snackbar",isDismissible:!0});case 15:return e.prev=15,f(!1),b(!1),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[3,11,15,19]])})));return function(){return e.apply(this,arguments)}}();return d?React.createElement("div",{className:"block-editor-block-styles__item",role:"button",tabIndex:a,"aria-label":"Fill",style:{color:o?"var(--wp-admin-theme-color)":"inherit"}},React.createElement("div",{className:"block-editor-block-styles__item-preview",style:{border:o?"2px solid var(--wp-admin-theme-color)":"2px solid #e3e3e3",margin:0,display:"flex","align-items":"center","justify-content":"center"}},React.createElement(Se,null))):React.createElement("div",{className:"block-editor-block-styles__item presto-preset-".concat(n.slug),onClick:function(){i(n)},role:"button",tabIndex:a,"aria-label":"Fill",style:{color:o?"var(--wp-admin-theme-color)":"inherit"}},React.createElement("div",{className:"block-editor-block-styles__item-preview",style:{border:o?"2px solid var(--wp-admin-theme-color)":"2px solid #e3e3e3",margin:0}},React.createElement("div",{style:{textAlign:"center",width:"100%",color:o?"var(--wp-admin-theme-color)":"inherit",opacity:o?1:.75}},null!=n&&n.icon?React.createElement(xe,{icon:null==n?void 0:n.icon,style:{fontSize:"30px",width:"30px",height:"30px"}}):React.createElement("h1",{style:{opacity:.75}},(null==n||null===(t=n.name)||void 0===t||null===(r=t.charAt(0))||void 0===r?void 0:r.toUpperCase())||"Untitled"))),React.createElement("div",{className:"block-editor-block-styles__item-label",style:{fontWeight:"bold",textTransform:"capitalize"}},(null==n?void 0:n.name)||"Untitled"),!(null!=n&&n.is_locked)&&React.createElement("div",{className:"block-editor-block-styles__item-edit"},React.createElement("div",{className:"block-editor-block-styles__item-edit-icon",onClick:s},React.createElement(xe,{icon:"edit"})),React.createElement("div",{className:"block-editor-block-styles__item-edit-icon",onClick:function(){return f(!0)}},React.createElement(xe,{icon:"trash"}))),v&&React.createElement(Ne,{title:Pe("Trash Preset?","presto-player"),onRequestClose:h,style:{maxWidth:"250px"}},React.createElement("p",null,React.createElement("strong",null,Pe("Warning!","presto-player")," "),Pe("Any audios assigned to this preset will automatically use the default preset.","presto-player")),React.createElement(De,null,React.createElement(Te,{isDestructive:!0,onClick:O,style:{margin:"0 4px"}},Pe("Trash","presto-player")),React.createElement(Te,{isTertiary:!0,onClick:h,style:{margin:"0 4px",boxShadow:"none"}},Pe("Cancel","presto-player")))))},Le=wp.i18n.__,Ie=wp.components,Fe=Ie.withNotices,Ve=Ie.BaseControl,Ue=Ie.Spinner,Me=Ie.Button,ze=wp.element,We=ze.useState,He=(ze.useEffect,wp.data),Ye=He.useSelect,Ge=He.dispatch;var qe=Fe((function(e){var t,r=e.attributes,n=e.setAttributes,a=We(!1),o=Object(l.a)(a,2),c=o[0],i=o[1],s=function(){return i(!1)},p=We(null),u=Object(l.a)(p,2),d=u[0],b=u[1],m=We(null),y=Object(l.a)(m,2),v=y[0],h=y[1],O=Ye((function(e){return{presets:e("presto-player/player").getAudioPresets(),loading:e("presto-player/player").isResolving("getAudioPresets")}})),g=O.presets,j=O.loading,w=function(e){Ge("presto-player/player").addAudioPreset(e)},_=function(e){Ge("presto-player/player").removeAudioPreset(e)},E=function(e){n({preset:e.id})};return j?React.createElement("div",{className:"presto-settings__loading"},React.createElement(Ue,null)):React.createElement(React.Fragment,null,g.length?React.createElement("p",null,Le("Select a audio configuration preset, or add your own.","presto-player")):"",React.createElement(Ve,null,React.createElement("div",{className:"block-editor-block-styles"},(g||[]).length?g.map((function(e,t){return React.createElement(Ae,{setPreset:E,index:t,isActive:(null==r?void 0:r.preset)===e.id,preset:e,key:e.id,onEdit:function(){h(e.name),b(e),i("edit")},remove:_})})):Le("No style presets. You can create a new style by clicking 'Add New Style'.","presto-plugin"))),React.createElement(Ve,null,React.createElement(Me,{isPrimary:!0,"data-cy":"add-new-preset",onClick:function(){var e;null!==(e=prestoPlayer)&&void 0!==e&&e.isPremium?i("new"):Ge("presto-player/player").setProModal(!0)}},Le("Add New Preset","presto-player")),!(null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium)&&React.createElement(f.a,null)),"new"==c&&React.createElement(ke,{closeModal:s,addPreset:w,type:"new",onSave:E,attributes:r}),"edit"==c&&React.createElement(ke,{closeModal:s,addPreset:w,updatePreset:function(e){Ge("presto-player/player").updateAudioPreset(e)},type:"edit",preset:d,name:v,attributes:r}))})),Ze=["image"];var Ke=function e(t){var r,n,a=t.attributes,l=t.setAttributes,c=Object(C.useInstanceId)(e),i="audio-block__poster-image-description-".concat(c),s=a.autoplay,u=a.poster,d=a.preload,m=a.title;return React.createElement(React.Fragment,null,React.createElement(p.PanelBody,{title:React.createElement(React.Fragment,null,Object(o.__)("Title","presto-player")," "),initialOpen:!0},React.createElement(p.FlexBlock,null,React.createElement(p.TextControl,{className:"presto-player__caption--title",placeholder:Object(o.__)("Title","presto-player"),value:m||"",onChange:function(e){return l({title:e})},autoComplete:"off"}))),React.createElement(p.PanelBody,{title:React.createElement(React.Fragment,null,Object(o.__)("Chapters","presto-player")," ",!(null!==(r=prestoPlayer)&&void 0!==r&&r.isPremium)&&React.createElement(f.a,null)),initialOpen:null===(n=prestoPlayer)||void 0===n?void 0:n.isPremium},React.createElement(x.a,{setAttributes:l,attributes:a})),React.createElement(p.PanelBody,{title:React.createElement(React.Fragment,null,Object(o.__)("Audio Settings","presto-player")," ")},React.createElement(p.ToggleControl,{label:React.createElement(React.Fragment,null,Object(o.__)("Autoplay","presto-player")," "),checked:s,onChange:function(e){l({autoplay:e})}}),React.createElement(p.PanelRow,null,React.createElement(p.SelectControl,{label:React.createElement(p.Flex,null,React.createElement("div",null,Object(o.__)("Performance Preference","presto-player")),React.createElement("a",{href:"https://prestoplayer.com/docs/performance-preferences-explained",target:"_blank",style:{textDecoration:"none"}},React.createElement(p.Icon,{icon:"editor-help"}))),className:"presto-setting__preload",value:d,onChange:function(e){return l({preload:e})},options:[{value:"auto",label:Object(o.__)("Audio Playback Speed","presto-player")},{value:"metadata",label:Object(o.__)("Page Load Speed","presto-player")},{value:"none",label:Object(o.__)("Page Load Speed (Extreme)","presto-player")}]})),React.createElement(b.MediaUploadCheck,null,React.createElement(p.BaseControl,{className:"editor-video-poster-control"},React.createElement(p.BaseControl.VisualLabel,null,React.createElement("p",null,Object(o.__)("Poster image","presto-player"))),React.createElement(b.MediaUpload,{title:Object(o.__)("Select poster image","presto-player"),onSelect:function(e){l({poster:e.url})},allowedTypes:Ze,render:function(e){var t=e.open;return React.createElement(p.Button,{className:"presto-setting__poster",isPrimary:!0,onClick:t,"aria-describedby":i},u?Object(o.__)("Replace","presto-player"):Object(o.__)("Select","presto-player"))}}),React.createElement("p",{id:i,hidden:!0},u?sprintf(Object(o.__)("The current poster image url is %s","presto-player"),u):Object(o.__)("There is no poster image currently selected","presto-player")),!!u&&React.createElement(p.Button,{onClick:function(){l({poster:""})},className:"presto-setting__remove-poster",isTertiary:!0},Object(o.__)("Remove","presto-player"))))),React.createElement(p.PanelBody,{title:Object(o.__)("Audio Preset","presto-player")},React.createElement(qe,{setAttributes:l,attributes:a})),React.createElement(p.PanelBody,{title:React.createElement(React.Fragment,null,Object(o.__)("Global Player Branding","presto-player")),initialOpen:!1},React.createElement(P.a,{setAttributes:l,attributes:a,type:"audio"})))},Qe=r(33);function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Je=wp.data.withSelect;function et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?et(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var rt,nt,at=(0,wp.compose.compose)([Je((function(e){return{branding:e("presto-player/player").branding(),loading:e("presto-player/player").isResolving("getAudioPresets"),presets:e("presto-player/player").getAudioPresets(),defaultPreset:e("presto-player/player").getDefaultAudioPreset()}})),Object(C.createHigherOrderComponent)((function(e){return function(t){var r=t.presets,n=t.attributes,a=t.setAttributes,c=t.defaultPreset,i=t.isSelected,s=t.branding,p=Object(u.useState)({}),b=Object(l.a)(p,2),m=b[0],y=b[1],v=Object(u.useState)(1),f=Object(l.a)(v,2),h=f[0],O=f[1],g=n.poster,j=n.chapters;Object(u.useEffect)((function(){i&&null!=n&&n.id&&Object(d.dispatch)("core/edit-post").openGeneralSidebar("edit-post/block")}),[i]),Object(u.useEffect)((function(){i&&null!=n&&n.selectionOverrideClientId&&Object(d.dispatch)("core/block-editor").selectBlock(null==n?void 0:n.selectionOverrideClientId)}),[i]),Object(u.useEffect)((function(){if(r&&r.length){var e=r.find((function(e){return e.id===(null==n?void 0:n.preset)}));e?y(e):(y(c),a({preset:null==c?void 0:c.id}))}}),[r,null==n?void 0:n.preset]),Object(u.useEffect)((function(){w()}),[g,m,j,s.logo]);var w=function(){O(h+1)},E=Object(B.f)(j);Object(u.useEffect)((function(){var e=null==j?void 0:j.map((function(e){return e.time})),t=null==E?void 0:E.map((function(e){return e.time}));_.difference(e,t).length&&w()}),[j]);var R=function(){var e=Object(N.a)(D.a.mark((function e(t){var r,n,o,l,c,i,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.src,n=t.external_id,o=t.attachment_id,l=t.type,c=t.title,r||n||o){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Object(Qe.a)({method:"POST",path:"/presto-player/v1/videos",data:$e($e({attachment_id:o,post_id:wp.data.select("core/editor").getCurrentPostId(),external_id:n},c?{title:c}:{}),{},{src:r,type:l})});case 5:i=e.sent,s=i.id,a({id:s});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null!=n&&n.preset||a({preset:null==c?void 0:c.id}),React.createElement(e,Object.assign({},t,{lockSave:function(){return Object(d.dispatch)("core/editor").lockPostSaving("presto-player")},unlockSave:function(){return Object(d.dispatch)("core/editor").unlockPostSaving("presto-player")},createVideo:R,onUpdate:w,onRemoveSrc:function(){confirm(Object(o.__)("Remove this","presto-player"))&&a({src:"",id:void 0})},presetData:m,setPresetData:y,renderKey:h}))}}),"withPlayerEdit")])(Object(p.withNotices)((function(e){var t=e.attributes,r=e.setAttributes,n=e.branding,a=e.presetData,l=e.renderKey,c=e.defaultPreset,i=e.lockSave,s=e.unlockSave,u=e.loading,d=e.createVideo,b=e.onRemoveSrc,m=t.poster,y=t.src,v=t.id;return y?u||!v?React.createElement(p.Placeholder,{className:"presto-player__placeholder is-loading"},React.createElement(p.Spinner,null)):React.createElement(React.Fragment,null,React.createElement(k.BlockControls,null,React.createElement(p.Toolbar,null,React.createElement(p.Button,{onClick:function(){return b()}},Object(o.__)("Replace","presto-player")))),React.createElement(k.InspectorControls,null,React.createElement(Ke,{attributes:t,setAttributes:r})),React.createElement("figure",null,React.createElement(p.Disabled,null,React.createElement(F.a,{poster:m,src:y,id:v,type:"audio",attributes:t,setAttributes:r,preset:a,branding:n,key:l})))):React.createElement(React.Fragment,null,React.createElement(R,{attributes:t,setAttributes:r,onSelectURL:function(e){r(tt(tt({},t),{},{src:e,title:e,preset:null==c?void 0:c.id})),i(),d({src:e,type:"link"}).catch((function(e){r({src:""}),showNotice(e)})).finally(s)},onSelect:function(e){e&&e.url?e.title?(r({src:e.url,preset:null==c?void 0:c.id,title:e.title,attachment_id:e.id}),i(),d({src:e.url,type:"attachment",attachment_id:e.id}).catch((function(e){r({src:""}),showNotice(e)})).finally(s)):r({src:e.url,title:e.url,preset:null==c?void 0:c.id}):r({src:void 0,id:void 0})}}))}))),ot="presto-player/audio",lt={category:"presto",attributes:(rt={src:{type:"string"},autoplay:{type:Boolean,default:!1},poster:{type:"string"},chapters:{type:"array",default:[]},preload:{type:"string"},title:{type:"string"},tracks:{type:"array",items:{type:"object"},default:[]},preset:{type:Number},id:{type:Number},attachment_id:{type:Number}},Object(a.a)(rt,"src",{type:String}),Object(a.a)(rt,"visibility",{type:String,default:"public"}),rt),title:Object(o.__)("Presto Audio","presto-player"),description:Object(o.__)("A audio player wrapper.","presto-player"),variations:[{name:"public",isDefault:!0,title:Object(o.__)("Presto Audio","presto-player"),description:Object(o.__)("Presto self-hosted audio block.","presto-player"),attributes:{visibility:"public"}}].concat(Object(n.a)(null!==(nt=prestoPlayer)&&void 0!==nt&&nt.isPremium?[{name:"private",title:Object(o.__)("Presto Private Audio","presto-player"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),React.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})),description:Object(o.__)("Private self-hosted audio block.","presto-player"),attributes:{visibility:"private"}}]:[])),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"presto-block-icon"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})),edit:at}},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"getPresets",(function(){return v})),r.d(n,"getAudioPresets",(function(){return f})),r.d(n,"getPreset",(function(){return h})),r.d(n,"getReusableVideos",(function(){return O})),r.d(n,"getReusableVideo",(function(){return g})),r.d(n,"getDefaultPreset",(function(){return j})),r.d(n,"getDefaultAudioPreset",(function(){return w})),r.d(n,"presetsLoading",(function(){return _})),r.d(n,"branding",(function(){return E})),r.d(n,"playerCSS",(function(){return R})),r.d(n,"youtube",(function(){return k})),r.d(n,"proModal",(function(){return P}));var a={};r.r(a),r.d(a,"setPresetLoading",(function(){return x})),r.d(a,"setVideosLoading",(function(){return S})),r.d(a,"setProModal",(function(){return N})),r.d(a,"setVideos",(function(){return T})),r.d(a,"updateVideos",(function(){return D})),r.d(a,"appendVideos",(function(){return B})),r.d(a,"addVideo",(function(){return A})),r.d(a,"setPresets",(function(){return L})),r.d(a,"addPreset",(function(){return I})),r.d(a,"updatePreset",(function(){return F})),r.d(a,"removePreset",(function(){return V})),r.d(a,"setAudioPresets",(function(){return U})),r.d(a,"addAudioPreset",(function(){return M})),r.d(a,"updateAudioPreset",(function(){return z})),r.d(a,"removeAudioPreset",(function(){return W})),r.d(a,"setBranding",(function(){return H})),r.d(a,"updateBranding",(function(){return Y})),r.d(a,"saveOptions",(function(){return G})),r.d(a,"fetchOptions",(function(){return q})),r.d(a,"fetchFromAPI",(function(){return Z})),r.d(a,"fetchFromWPAPI",(function(){return K})),r.d(a,"setYoutube",(function(){return Q})),r.d(a,"updateYoutube",(function(){return X})),r.d(a,"setPresetSettings",(function(){return $})),r.d(a,"setPresetAudioSettings",(function(){return J}));var o=r(5),l=r(8);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=wp.data,p=s.combineReducers,u=s.dispatch,d=wp.apiFetch,b=lodash.pick,m=function(e,t){return e.find((function(e){return e.id===t.id}))?e:[].concat(Object(l.a)(e),[t])},y=p({presetReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRESET":return t.value;case"ADD_PRESET":return[].concat(Object(l.a)(e),[t.value]);case"UPDATE_PRESET":return e.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:i(i({},e),t.value)}));case"REMOVE_PRESET":return e.filter((function(e){return e!==t.value}))}return e},audioPresetReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUDIO_PRESET":case"SET_AUDIO_PRESET":return t.value;case"ADD_AUDIO_PRESET":return[].concat(Object(l.a)(e),[t.value]);case"UPDATE_AUDIO_PRESET":return e.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:i(i({},e),t.value)}));case"REMOVE_AUDIO_PRESET":return e.filter((function(e){return e!==t.value}))}return e},presetLoadingReducer:function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_PRESET_LOADING":return e.value}},videosLoadingReducer:function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_VIDEOS_LOADING":return e.value}},videosReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{total:0,total_pages:0,videos:[],hasResolved:!1,isError:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEOS":return t.value;case"UPDATE_VIDEOS":return i(i({},e),t.value);case"APPEND_VIDEOS":var r=e;return(t.value||[]).forEach((function(e){r.videos=m(r.videos,e)})),r;case"ADD_VIDEO":return i(i({},e),{},{videos:m(e.videos,t.value)});case"UPDATE_VIDEO":return i(i({},e),{},{videos:e.videos.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:i(i({},e),t.value)}))});case"REMOVE_VIDEO":return i(i({},e),{},{videos:e.videos.filter((function(e){return e!==t.value}))})}return e},proModalReducer:function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_PRO_MODAL":return e.value}},brandingReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BRANDING":return t.value;case"UPDATE_BRANDING":return i(i({},e),{},Object(o.a)({},t.name,t.value))}return e},youtubeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_YOUTUBE":return t.value;case"UPDATE_YOUTUBE":return i(i({},e),{},Object(o.a)({},t.name,t.value))}return e},presetSettingsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRESET_SETTINGS":return t.value}return e},optionsApi:function(e,t){switch(t.type){case"FETCH_OPTIONS":return d({path:"/presto-player/v1/settings/"}).then((function(e){u("presto-player/player").setBranding(e.presto_player_branding),u("presto-player/player").setYoutube(e.presto_player_youtube),u("presto-player/player").setPresetSettings(e.presto_player_presets),u("presto-player/player").setPresetAudioSettings(e.presto_player_audio_presets)}));case"SAVE_OPTIONS":var r={presto_player_branding:b(null==t?void 0:t.branding,["logo","color","logo_width","player_css"])};return Object.keys(r).forEach((function(e){return(null==r[e]||!Object.keys((null==r?void 0:r[e])||{}).length)&&delete r[e]})),d({path:"/presto-player/v1/settings",method:"POST",data:r}),r}},audioPresetSettingsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRESET_AUDIO_SETTINGS":return t.value}return e}});function v(e){return(null==e?void 0:e.presetReducer)||[]}function f(e){return(null==e?void 0:e.audioPresetReducer)||[]}function h(e,t){var r;return null!=e&&null!==(r=e.presetReducer)&&void 0!==r&&r.length?null==e?void 0:e.presetReducer.find((function(e){return e.id===t})):[]}function O(e){return(null==e?void 0:e.videosReducer)||[]}function g(e,t){var r,n;return(null==e||null===(r=e.videosReducer)||void 0===r||null===(n=r.videos)||void 0===n?void 0:n.find((function(e){return(null==e?void 0:e.id)===t})))||[]}function j(e){var t,r=null==e||null===(t=e.presetSettingsReducer)||void 0===t?void 0:t.default_player_preset,n=r&&((null==e?void 0:e.presetReducer)||[]).find((function(e){return e.id&&e.id===r}));return n||(n=((null==e?void 0:e.presetReducer)||[]).find((function(e){return"default"==e.slug}))),n||(n=((null==e?void 0:e.presetReducer)||[])[0]),n}function w(e){var t,r=null==e||null===(t=e.audioPresetSettingsReducer)||void 0===t?void 0:t.default_player_preset,n=r&&((null==e?void 0:e.audioPresetReducer)||[]).find((function(e){return e.id&&e.id===r}));return n||(n=((null==e?void 0:e.audioPresetReducer)||[]).find((function(e){return"default"==e.slug}))),n||(n=((null==e?void 0:e.audioPresetReducer)||[])[0]),n}function _(e){return!(null==e||!e.presetLoadingReducer)}function E(e){return null==e?void 0:e.brandingReducer}function R(e){var t;return null==e||null===(t=e.brandingReducer)||void 0===t?void 0:t.player_css}function k(e){return null==e?void 0:e.youtubeReducer}function P(e){return null==e?void 0:e.proModalReducer}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){return{type:"SET_PRESET_LOADING",value:e}}function S(e){return{type:"SET_VIDEOS_LOADING",value:e}}function N(e){return{type:"SET_PRO_MODAL",value:e}}function T(e){return{type:"SET_VIDEOS",value:e}}function D(e){return{type:"UPDATE_VIDEOS",value:e}}function B(e){return{type:"APPEND_VIDEOS",value:e}}function A(e){return{type:"ADD_VIDEO",value:e}}function L(e){return{type:"SET_PRESET",value:e}}function I(e){return{type:"ADD_PRESET",value:e}}function F(e){return{type:"UPDATE_PRESET",value:e}}function V(e){return{type:"REMOVE_PRESET",value:e}}function U(e){return{type:"SET_AUDIO_PRESET",value:e}}function M(e){return{type:"ADD_AUDIO_PRESET",value:e}}function z(e){return{type:"UPDATE_AUDIO_PRESET",value:e}}function W(e){return{type:"REMOVE_AUDIO_PRESET",value:e}}function H(e){return{type:"SET_BRANDING",value:e}}function Y(e,t){return{type:"UPDATE_BRANDING",name:e,value:t}}function G(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({type:"SAVE_OPTIONS"},e)}function q(){return{type:"FETCH_OPTIONS"}}function Z(e){return{type:"FETCH_FROM_API",path:e}}function K(e,t){return{type:"FETCH_FROM_WP_API",path:e,args:t}}function Q(e){return{type:"SET_YOUTUBE",value:e}}function X(e,t){return{type:"UPDATE_YOUTUBE",name:e,value:t}}function $(e){return{type:"SET_PRESET_SETTINGS",value:e}}function J(e){return{type:"SET_PRESET_AUDIO_SETTINGS",value:e}}var ee=r(7),te=r(2),re=r.n(te);function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var oe=wp.apiFetch,le={FETCH_FROM_API:function(e){return oe({url:prestoPlayer.root+prestoPlayer.prestoVersionString+e.path})},FETCH_FROM_WP_API:function(e){return Object(ee.a)(re.a.mark((function t(){var r,n,a,o,l,c,i;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.args,n=e.path,a=void 0===n?"":n,t.next=3,oe(ae(ae(ae({path:wp.url.addQueryArgs("wp/v2/".concat(a),null==r?void 0:r.query)},null!=r&&r.data?{data:r.data}:{}),null==r?void 0:r.options),{},{parse:!1}));case 3:return o=t.sent,t.next=6,o.json();case 6:return l=t.sent,c=o.headers&&o.headers.get("X-WP-Total"),i=o.headers&&o.headers.get("X-WP-TotalPages"),t.abrupt("return",new Promise((function(e,t){e({data:l,total:c,total_pages:i})})));case 10:case"end":return t.stop()}}),t)})))()}},ce={getPresets:re.a.mark((function e(){var t;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z("preset");case 2:return t=e.sent,e.abrupt("return",L(t));case 4:case"end":return e.stop()}}),e)})),getAudioPresets:re.a.mark((function e(){var t;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z("audio-preset");case 2:return t=e.sent,e.abrupt("return",U(t));case 4:case"end":return e.stop()}}),e)})),getReusableVideo:re.a.mark((function e(t){var r,n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="presto-videos/".concat(t),e.next=3,K(r,{});case 3:return n=e.sent,e.abrupt("return",A((null==n?void 0:n.data)||{}));case 5:case"end":return e.stop()}}),e)}))},ie=(0,wp.data.registerStore)("presto-player/player",{reducer:y,selectors:n,actions:a,controls:le,resolvers:ce}),se=r(10),pe=wp.components,ue=pe.Modal,de=pe.Button,be=wp.data,me=be.dispatch,ye=be.useSelect,ve=function(){return ye((function(e){return e("presto-player/player").proModal()}))?React.createElement(ue,{title:"Pro Feature",onRequestClose:function(){me("presto-player/player").setProModal(!1)}},React.createElement("h2",null,"Unlock Presto Player ",React.createElement(se.a,null)),React.createElement("p",null,"Get this feature and more with the Pro version of Presto Player!"),React.createElement(de,{href:"https://prestoplayer.com",target:"_blank",isPrimary:!0},"Learn More")):""},fe=wp.blocks,he=fe.registerBlockType,Oe=fe.unregisterBlockType,ge=wp.plugins,je=ge.registerPlugin,we=ge.unregisterPlugin,_e=wp.data,Ee=_e.select,Re=_e.dispatch,ke=wp.element.render,Pe=function(){return null},Ce=function(e){var t=e.getContext,r=e.register,n=e.unregister,a=e.before,o=void 0===a?Pe:a,l=e.after,c=void 0===l?Pe:l,i={};!function(){o();var e=t(),a=[];e.keys().forEach((function(t){var o=e(t);o!==i[t]&&(i[t]&&n(i[t]),r(o),a.push(o.name),i[t]=o)})),c(a)}()},xe=null;Ce({getContext:function(){return r(59)},register:function(e){var t,r=e.name,n=e.options;null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium?he(r,n):n.premium||he(r,n)},unregister:function(e){var t=e.name;return Oe(t)},before:function(){xe=Ee("core/editor").getSelectedBlockClientId(),Re("core/editor").clearSelectedBlock()},after:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Ee("core/editor").getBlocks().forEach((function(t){var r=t.name,n=t.clientId;e.includes(r)&&Re("core/editor").selectBlock(n)})),xe?Re("core/editor").selectBlock(xe):Re("core/editor").clearSelectedBlock(),xe=null}}),Ce({getContext:function(){return r(68)},register:function(e){var t=e.name,r=e.options;return je(t,r)},unregister:function(e){var t=e.name;return we(t)}}),jQuery("body").append('<div id="presto-plugin-app"></div>'),ke(React.createElement(ve,null),document.getElementById("presto-plugin-app")),Re("presto-player/player").fetchOptions();var Se=!1;wp.data.subscribe((function(){var e=wp.data.select("core/editor").isSavingPost(),t=wp.data.select("core/editor").isAutosavingPost();if(e&&!t){if(Se)return;Se=!0;var r=ie.getState().brandingReducer;Re("presto-player/player").saveOptions({branding:r}).then((function(){Se=!1}))}}))},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return W})),r.d(t,"options",(function(){return H}));var n=r(7),a=r(1),o=r(2),l=r.n(o),c=(r(19),wp.compose.useInstanceId),i=wp.i18n.__,s=wp.components,p=s.VisuallyHidden,u=s.Button,d=s.Icon,b=wp.element.useRef;var m=function e(t){t.className;var r=t.onChange,n=t.value,a=t.placeholder,o=c(e),l=b();return React.createElement("div",{className:"block-editor-inserter__search",style:{padding:0}},React.createElement(p,{as:"label",htmlFor:"block-editor-inserter__search-".concat(o)},a),React.createElement("input",{ref:l,className:"block-editor-inserter__search-input",id:"block-editor-inserter__search-".concat(o),type:"search",placeholder:a,onChange:function(e){return r(e.target.value)},autoComplete:"off",value:n||""}),React.createElement("div",{className:"block-editor-inserter__search-icon"},!!n&&React.createElement(u,{icon:"close-small",label:i("Reset search","presto-player"),onClick:function(){r(""),l.current.focus()}}),!n&&React.createElement(d,{icon:"search"})))},y=r(3),v=r(4);function f(e){return h.apply(this,arguments)}function h(){return(h=Object(n.a)(l.a.mark((function e(t){var r,n,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=document.getElementById("presto-shortcode-input").value,n=t.currentTarget,a=n.textContent,t.currentTarget.textContent=Object(y.__)("Copied!","presto-player"),setTimeout((function(){n.textContent=a}),1500),!navigator.clipboard||!window.isSecureContext){e.next=9;break}return e.abrupt("return",navigator.clipboard.writeText(r));case 9:return(o=document.createElement("textarea")).value=r,o.style.position="fixed",o.style.left="-999999px",o.style.top="-999999px",document.body.appendChild(o),o.focus(),o.select(),e.abrupt("return",new Promise((function(e,t){document.execCommand("copy")?e():t(),o.remove()})));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(){return React.createElement(v.PanelBody,{title:Object(y.__)("Timestamp Shortcode","presto-player")},React.createElement("div",{className:"block-editor-inserter__shortcode-input"},React.createElement("p",null,Object(y.__)("Add convenient links to skip the player to a specific timestamp.","presto-player")),React.createElement("input",{id:"presto-shortcode-input",style:{width:"100%",fontSize:"11px",marginBottom:"10px"},type:"text",readOnly:!0,value:'[pptime time="1:00"]Optional Text[/pptime]'}),React.createElement("button",{type:"button",className:"components-button is-primary",onClick:f},Object(y.__)("Copy to clipboard","presto-player"))))},g=function(e){var t=e.icon,r=e.title,n=e.id,a=e.selectBlock,o=e.i;return React.createElement("button",{type:"button",id:"video-".concat(n),tabIndex:o,onClick:a,role:"option",className:"components-button block-editor-block-types-list__item editor-block-list-item-kadence-spacer"},React.createElement("span",{className:"block-editor-block-types-list__item-icon"},React.createElement("span",{className:"block-editor-block-icon has-colors"},t)),React.createElement("span",{className:"block-editor-block-types-list__item-title"},r))},j=wp.i18n.__,w=wp.components,E=(w.Panel,w.PanelBody),R=w.Button,k=w.Spinner,P=wp.editPost,C=P.PluginSidebar,x=P.PluginSidebarMoreMenuItem,S=wp.element,N=S.Fragment,T=S.useEffect,D=S.useState,B=S.useCallback,A=wp.data,L=A.dispatch,I=A.useSelect,F=wp.blocks,V=F.createBlock,U=F.getBlockType,M=wp.apiFetch,z=wp.blockSerializationDefaultParser.parse;var W="presto-player",H={render:function(){var e,t,r,o=(e=D(0),(t=Object(a.a)(e,2))[0],r=t[1],function(){return r((function(e){return e+1}))}),c=React.createElement("svg",{viewBox:"0 0 35 34",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("g",null,React.createElement("path",{d:"M23.3722 16.9766L33.2059 11.2991L33.2059 22.6541L23.3722 16.9766Z",fillOpacity:"0.7"}),React.createElement("path",{d:"M23.3745 5.6227L33.2082 11.3002L23.3745 16.9776L23.3745 5.6227Z",fillOpacity:"0.75"}),React.createElement("path",{d:"M23.3745 5.62242L23.3745 16.9773L13.5409 11.2999L23.3745 5.62242Z",fillOpacity:"0.8"}),React.createElement("path",{d:"M23.399 5.613L13.5654 11.2905L13.5654 -0.0644536L23.399 5.613Z",fillOpacity:"0.85"}),React.createElement("path",{d:"M13.5699 11.3038L13.5699 22.6587L3.73623 16.9813L13.5699 11.3038Z",fillOpacity:"0.8"}),React.createElement("path",{d:"M13.5699 -0.0245525L13.5699 11.3304L3.73623 5.6529L13.5699 -0.0245525Z",fillOpacity:"0.9"}),React.createElement("path",{d:"M13.5699 22.6451L13.5699 34L3.73623 28.3226L13.5699 22.6451Z",fillOpacity:"0.7"}),React.createElement("path",{d:"M23.3745 16.9774L33.2082 22.6549L23.3745 28.3323L23.3745 16.9774Z",fillOpacity:"0.65"}),React.createElement("path",{d:"M3.73774 16.9774L13.5714 22.6549L3.73774 28.3323L3.73774 16.9774Z",fillOpacity:"0.75"}),React.createElement("path",{d:"M3.73774 5.63149L13.5714 11.3089L3.73774 16.9864L3.73774 5.63149Z",fillOpacity:"0.85"}),React.createElement("path",{d:"M23.3745 16.9772L23.3745 28.3321L13.5409 22.6546L23.3745 16.9772Z",fillOpacity:"0.6"})),React.createElement("defs",null,React.createElement("clipPath",{id:"clip0"},React.createElement("rect",{width:"35",height:"34",fill:"white"})))),i=D(!1),s=Object(a.a)(i,2),p=s[0],u=s[1],d=D(1),b=Object(a.a)(d,2),y=b[0],v=b[1],f=D(!1),h=Object(a.a)(f,2),w=h[0],P=h[1],S=D(""),A=Object(a.a)(S,2),F=A[0],W=A[1],H=B(_.debounce((function(e){K({replace:!0,term:e})}),250),[]);T((function(){H(F)}),[F]),T((function(){P(!0),K({replace:!1})}),[y]);var Y=I((function(e){return e("presto-player/player").getReusableVideos()}),[F,y]),G=Y.videos,q=Y.total_pages,Z=Y.hasResolved,K=function(){var e=Object(n.a)(l.a.mark((function e(t){var r,n,a,c,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.replace,n=t.term,e.next=3,M({path:wp.url.addQueryArgs("wp/v2/presto-videos",{search:n,page:y,per_page:10}),parse:!1});case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,i=a.headers&&parseInt(a.headers.get("X-WP-Total")),s=a.headers&&parseInt(a.headers.get("X-WP-TotalPages")),r?L("presto-player/player").updateVideos({videos:c,hasResolved:!0,total:i,total_pages:s}):(L("presto-player/player").appendVideos(c),L("presto-player/player").updateVideos({hasResolved:!0,total:i,total_pages:s})),o(),P(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();T((function(){u(y<q)}),[y,q]);var Q=function(){var e=y+1;v(e=e>q?q:e)},X=function(e){var t,r,n,a,o=z(null==e||null===(t=e.content)||void 0===t?void 0:t.raw);if(null!=o&&null!==(r=o[0])&&void 0!==r&&null!==(n=r.innerBlocks)&&void 0!==n&&null!==(a=n[0])&&void 0!==a&&a.blockName){var l,c,i,s,p=U(null==o||null===(l=o[0])||void 0===l||null===(c=l.innerBlocks)||void 0===c||null===(i=c[0])||void 0===i?void 0:i.blockName);return null!=p&&null!==(s=p.icon)&&void 0!==s&&s.src?p.icon.src:""}return""};return React.createElement(N,null,React.createElement(x,{target:"presto-player-sidebar",icon:c},j("Presto Player","presto-player")),React.createElement(C,{name:"presto-player-sidebar",title:j("Presto Player","presto-player"),icon:c},React.createElement(O,null),React.createElement(E,{title:j("Media Hub","presto-player")},React.createElement(m,{placeholder:"Search media...",value:F,onChange:function(e){return t=e,v(1),void W(t);var t}}),React.createElement("div",{className:"block-editor-inserter__panel-content"},Z?React.createElement("div",{role:"listbox",className:"block-editor-block-types-list presto-player__panel-grid-list",style:{display:"flex",flexWrap:"wrap"},"aria-label":j("Media Hub","presto-player")},G.length?G.map((function(e,t){var r;return React.createElement(g,{selectBlock:function(t){L("core/editor").insertBlock(V("presto-player/reusable-display",{id:null==e?void 0:e.id}))},icon:X(e),title:(null==e||null===(r=e.title)||void 0===r?void 0:r.raw)||"Untitled",id:null==e?void 0:e.id,i:t,key:null==e?void 0:e.id})})):function(){if(!G.length)return F?React.createElement("p",null,j("No videos found.","presto-player")):React.createElement(R,{href:"post-new.php?post_type=pp_video_block",isSecondary:!0},j("Create A Reusable Video","presto-player"))}(),!F&&p&&G.length?React.createElement("div",{style:{"margin-top":"20px","text-align":"center",display:"flex","justify-content":"center",width:"100%"}},React.createElement(R,{isSecondary:!0,isSmall:!0,onClick:Q,isBusy:w},"Load More")):""):React.createElement(k,null)))))}}},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return ye})),r.d(t,"options",(function(){return ve}));var n=r(8),a=r(5),o=r(1),l=r(18),c=r(20),i=r(21),s=r(19),p=r.n(s),u=r(15),d=(lodash.noop,window.location.href),b=wp.components,m=b.Button,y=(b.Notice,b.Placeholder),v=(b.DropZone,b.withFilters),f=(b.BaseControl,b.ToggleControl,b.FormFileUpload,wp.i18n.__),h=wp.element,O=h.useState,g=h.useEffect,j=wp.data.useSelect,w=(wp.deprecated,wp.editor),_=w.MediaUpload,E=w.MediaUploadCheck,R=w.URLPopover,k=function(e){var t=e.src,r=e.onChange,n=e.onSubmit,a=e.onClose;return React.createElement(R,{onClose:a},React.createElement("form",{className:"block-editor-media-placeholder__url-input-form",onSubmit:n},React.createElement("input",{"data-cy":"url-input",className:"block-editor-media-placeholder__url-input-field",type:"url","aria-label":f("URL","presto-player"),placeholder:f("Paste or type a Youtube, Vimeo or .mp4 video URL","presto-player"),onChange:r,value:t}),React.createElement(m,{"data-cy":"url-submit",className:"block-editor-media-placeholder__url-input-submit-button",icon:"editor-break",label:f("Apply","presto-player"),type:"submit"})))};var P,C=v("editor.MediaPlaceholder")((function(e){var t=e.value,r=void 0===t?{}:t,n=e.allowedTypes,a=void 0===n?[]:n,l=e.className,c=e.icon,i=e.url,s=void 0===i||i,b=e.labels,v=void 0===b?{}:b,h=e.mediaPreview,w=e.notices,R=e.isAppender,P=e.isPrivate,C=e.addToGallery,x=e.onSelect,S=e.onCancel,N=e.onSelectURL,T=e.onDoubleClick,D=e.children,B=e.allowURLs,A=j((function(e){return(0,e("core/block-editor").getSettings)().mediaUpload}),[]),L=O(""),I=Object(o.a)(L,2),F=I[0],V=I[1],U=O(!1),M=Object(o.a)(U,2),z=M[0],W=M[1];g((function(){var e;V(null!==(e=null==r?void 0:r.src)&&void 0!==e?e:"")}),[r]);var H=function(e){V(e.target.value)},Y=function(){W(!0)},G=function(){W(!1)},q=function(e){e.preventDefault(),F&&N&&(N(F),G())},Z=function(e,t){var r=v.instructions,n=v.title;A||N||(r=f("To edit this block, you need permission to upload media.","presto-player"));var a=p()("block-editor-media-placeholder",l,{"is-appender":R});return React.createElement(y,{icon:c,label:n,instructions:r,className:a,notices:w,onClick:t,onDoubleClick:T,preview:h},D,e)},K=function(){return N&&React.createElement("div",{className:"block-editor-media-placeholder__url-input-container"},s&&React.createElement(m,{"data-cy":"video-url",className:"block-editor-media-placeholder__button",onClick:Y,isPressed:z,isTertiary:!0},f("Video URL","presto-player")),z&&React.createElement(k,{src:F,onChange:H,onSubmit:q,onClose:G}))};return React.createElement(E,{fallback:Z(K())},function(){var e=React.createElement(_,{title:f(P?"Select or Upload Private Video":"Select or Upload Video","presto-player"),addToGallery:C,gallery:!1,multiple:!1,onSelect:function(e){u.a.unsetUrlParams(),x(e)},onClose:function(){u.a.unsetUrlParams()},allowedTypes:a,value:Array.isArray(r)?r.map((function(e){return e.id})):r.id,render:function(e){var t=e.open;return React.createElement(m,{"data-cy":"add-video",isPrimary:!0,onClick:function(e){e.stopPropagation(),u.a.unsetUrlParams(),P?u.a.setUrlPrivate(d):u.a.setUrlPublic(d),t()}},f(P?"Add/Select Private Video":"Add/Select Video","presto-player"))}});if(A){var t=React.createElement(React.Fragment,null,e,!!B&&K(),S&&React.createElement(m,{className:"block-editor-media-placeholder__cancel-button",title:f("Cancel","presto-player"),isLink:!0,onClick:S},f("Cancel","presto-player")));return Z(t)}return Z(e)}())})),x=r(10),S=wp.i18n.__,N=wp.components,T=N.withNotices,D=N.BaseControl,B=N.ToggleControl,A=N.Notice,L=wp.data.dispatch,I=["video"],F=T((function(e){var t,r=e.noticeUI,n=e.onSelect,a=e.children,o=e.onSelectURL,l=e.onUploadError,c=e.setAttributes,i=e.attributes,s="private"===i.visibility;return React.createElement("div",null,React.createElement(C,{icon:s?React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),React.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})):React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),labels:{title:S(s?"Presto Private Video":"Presto Video","presto-player"),instructions:S(s?"Upload a video file, or pick one from your media library.":"Upload a video file, pick one from your media library, or add one with a URL.","presto-player")},onSelect:n,onSelectURL:o,switcher:!0,isPrivate:s,allowURLs:!s,accept:"video/*",setAttributes:c,allowedTypes:I,value:i,notices:r,onError:l},React.createElement("div",{style:{width:"100%"}},React.createElement(D,{className:"presto-player__placeholder-control"},React.createElement(B,{label:React.createElement("div",null,S("Make Private","presto-player")," ",!(null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium)&&React.createElement(x.a,null)),help:S(s?"This video is only accessible to those who are logged in.":"This video is currently accessible to everyone.","presto-player"),checked:s,onChange:function(e){var t;null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium?c({visibility:e?"private":"public"}):L("presto-player/player").setProModal(!0)}})),!!a&&React.createElement("div",{style:{width:"100%"}},a),!!s&&React.createElement(A,{status:"warning",isDismissible:!1},React.createElement("div",null,React.createElement("div",null,React.createElement("strong",null,S("Note","presto-player"))),S("Private videos use php to stream your video. Keep in mind this will use up disk space and bandwidth so it may not be an appropriate choice for some hosts.","presto-player"))))))})),V=r(34),U=r(22),M=r(14),z=wp.i18n.__,W=wp.blob,H=W.getBlobByURL,Y=W.isBlobURL,G=wp.components,q=G.Button,Z=G.Disabled,K=G.Toolbar,Q=G.Notice,X=G.withNotices,$=G.Placeholder,J=G.Spinner,ee=wp.editor,te=ee.BlockControls,re=ee.InspectorControls,ne=wp.compose.compose,ae=wp.element,oe=ae.useEffect,le=ae.useState,ce=wp.data.dispatch,ie=wp.blocks.createBlock,se=["video"],pe=ne([Object(i.a)(),Object(c.a)()])(X((function(e){e.noticeUI;var t=e.attributes,r=e.setAttributes,n=(e.isSelected,e.noticeOperations),a=e.branding,c=e.loading,i=e.presetData,s=e.createVideo,p=e.onRemoveSrc,u=e.renderKey,d=e.lockSave,b=e.unlockSave,m=e.clientId,y=e.defaultPreset,v=t.poster,f=t.src,h=t.id,O=t.tracks,g=le(""),j=Object(o.a)(g,2),w=j[0],_=j[1],E=function(e){n.removeAllNotices(),n.createErrorNotice(null==e?void 0:e.message)};return oe((function(){if(!h&&Y(f)){var e=H(f);e&&mediaUpload({filesList:[e],onFileChange:function(e){var t=Object(o.a)(e,1)[0].url;r({src:t})},onError:function(e){n.createErrorNotice(e)},allowedTypes:se})}}),[]),f?c||!h?React.createElement($,{className:"presto-player__placeholder is-loading"},React.createElement(J,null)):React.createElement("div",null,React.createElement(te,null,React.createElement(V.a,{tracks:O,onChange:function(e){r({tracks:e})}}),React.createElement(K,null,React.createElement(q,{onClick:function(){return p()}},z("Replace","presto-player")))),React.createElement(re,null,React.createElement(U.a,{setAttributes:r,attributes:t})),React.createElement("figure",null,React.createElement(Z,null,React.createElement(M.a,{poster:v,src:f,id:h,type:"hosted",attributes:t,setAttributes:r,preset:i,branding:a,key:u})))):React.createElement("div",null,React.createElement(F,{onSelect:function(e){e&&e.url?(r({src:e.url,preset:null==y?void 0:y.id,attachment_id:e.id}),d(),s({src:e.url,type:"attachment",attachment_id:e.id}).catch((function(e){r({src:""}),E(e)})).finally(b)):r({src:void 0,id:void 0})},onSelectURL:function(e){var t;if(r({attachment_id:null}),e&&Object(l.d)(e)&&(null===(t=prestoPlayer)||void 0===t||!t.isPremium))return void _(React.createElement(Q,{status:"info",onRemove:function(){return _("")}},React.createElement("div",null,React.createElement("div",null,React.createElement("strong",null,z("Get HLS Streaming and more with Presto Player Pro!","presto-player"))),z("Stream HLS links and more with Presto Player Pro.","presto-player"),React.createElement("div",{style:{marginTop:"1em"}},React.createElement(q,{isPrimary:!0},z("Upgrade","presto-player"))))));if(e!==f){var n=Object(l.a)(e).type;if("youtube"===n){var a=ie("presto-player/youtube",{src:e});return void ce("core/editor").replaceBlock(m,a)}if("vimeo"===n){var o=ie("presto-player/vimeo",{src:e});return void ce("core/editor").replaceBlock(m,o)}r({src:e,attachmend_id:null}),r({preset:null==y?void 0:y.id}),d(),s({src:e,type:"link"}).catch((function(e){r({src:""}),E(e)})).finally(b)}},setAttributes:r,attributes:t,onError:function(e){n.removeAllNotices(),n.createErrorNotice(e)}},w))}))),ue=r(17);function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var me=wp.i18n.__,ye="presto-player/self-hosted",ve=be(be({},ue.a),{},{title:me("Presto Video","presto-player"),description:me("Presto Self-hosted video block.","presto-player"),variations:[{name:"public",isDefault:!0,title:me("Presto Video","presto-player"),description:me("Presto Self-hosted video block.","presto-player"),attributes:{visibility:"public"}}].concat(Object(n.a)(null!==(P=prestoPlayer)&&void 0!==P&&P.isPremium?[{name:"private",title:me("Presto Private Video","presto-player"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),React.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})),description:me("Private video self-hosted block.","presto-player"),attributes:{visibility:"private"}}]:[])),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),edit:pe})},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return E})),r.d(t,"options",(function(){return R}));var n=r(1),a=wp.i18n.__,o=wp.blockEditor,l=o.InnerBlocks,c=o.useBlockProps,i=wp.editor,s=(i.BlockControls,i.InspectorControls),p=wp.components,u=p.Disabled,d=(p.Toolbar,p.Button),b=p.PanelBody,m=(p.Panel,p.Placeholder),y=p.Spinner,v=wp.data,f=v.useSelect,h=v.dispatch,O=wp.element,g=O.useState,j=O.useEffect,w=wp.blockSerializationDefaultParser.parse,_=wp.blockEditor,E=(_.InnerBlocks,_.useBlockProps,"presto-player/reusable-display"),R={title:"Reusable Block Display",category:"presto",attributes:{id:Number},supports:{align:!0,inserter:!1,reusable:!1,html:!1},icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("circle",{cx:"12",cy:"12",r:"10"}),React.createElement("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),React.createElement("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})),edit:function(e){var t,r=e.attributes,o=e.isSelected,i=e.clientId,p=r.id,v=c(),O=g(!1),_=Object(n.a)(O,2),E=_[0],R=_[1],k=g([]),P=Object(n.a)(k,2),C=P[0],x=P[1],S=g(""),N=Object(n.a)(S,2),T=N[0],D=N[1],B=f((function(e){if(p)return e("presto-player/player").getReusableVideo(p)}));j((function(){wp.data.dispatch("core/block-editor").selectBlock(i)}),[E]);var A=f((function(e){return e("core/editor").getBlocksByClientId(i)[0].innerBlocks}));return A&&null!=B&&B.id&&A.forEach((function(e){h("core/editor").updateBlockAttributes(e.clientId,{selectionOverrideClientId:i})})),j((function(){if(B.id){var e,t,r;R(!0);var n=w(null==B||null===(e=B.content)||void 0===e?void 0:e.raw);x([null==n||null===(t=n[0])||void 0===t?void 0:t.innerBlocks[0].blockName,null==n||null===(r=n[0])||void 0===r?void 0:r.innerBlocks[0].attrs]),D("post.php?post=".concat(B.id,"&action=edit"))}}),[B]),E?C?React.createElement(React.Fragment,null,React.createElement(s,null,React.createElement(b,null,React.createElement("p",null,"This is a reusable video that you can edit once and place anywhere."),React.createElement(d,{isSecondary:!0,href:"edit.php?post_type=pp_video_block"},a("Manage Media Hub","presto-player")))),React.createElement("div",{className:"block-library-block__reusable-block-container"},React.createElement("div",v,o&&React.createElement("div",{className:"reusable-block-edit-panel"},React.createElement("b",{className:"reusable-block-edit-panel__info"},null==B||null===(t=B.title)||void 0===t?void 0:t.raw),React.createElement(d,{isSecondary:!0,href:T,className:"reusable-block-edit-panel__button"},a("Edit Reusable Video","presto-player"))),React.createElement(u,null,React.createElement(l,{template:[C],templateLock:"all",renderAppender:!1}))))):void 0:React.createElement("div",v,React.createElement(m,null,React.createElement(y,null)))},save:function(){return null}}},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return C})),r.d(t,"options",(function(){return x}));var n=r(5),a=r(20),o=r(21),l=r(22),c=r(14),i=r(37),s=r(18),p=r(9),u=wp.components,d=u.Button,b=u.Disabled,m=u.Toolbar,y=u.Placeholder,v=u.Spinner,f=u.withNotices,h=wp.editor,O=h.BlockControls,g=h.InspectorControls,j=wp.element.useEffect,w=wp.i18n.__,_=(0,wp.compose.compose)([Object(o.a)(),Object(a.a)()])(f((function(e){var t=e.attributes,r=e.setAttributes,n=e.branding,a=e.noticeOperations,o=e.loading,u=e.createVideo,f=e.lockSave,h=e.unlockSave,_=e.presetData,E=e.onRemoveSrc,R=e.renderKey,k=t.poster,P=t.src,C=t.id,x=Object(p.f)(P);return j((function(){x&&r({id:0});var e=Object(s.b)(P);r({video_id:e}),f(),u({src:P,external_id:e,type:"vimeo"}).catch((function(e){r({src:""}),function(e){a.removeAllNotices(),a.createErrorNotice(null==e?void 0:e.message)}(e)})).finally(h)}),[P]),P?o||!C?React.createElement(y,{className:"presto-player__placeholder is-loading"},React.createElement(v,null)):React.createElement(React.Fragment,null,React.createElement(O,null,React.createElement(m,null,React.createElement(d,{onClick:function(){return E()}},w("Replace","presto-player")))),React.createElement(g,null,React.createElement(l.a,{setAttributes:r,attributes:t})),React.createElement("figure",null,React.createElement(b,null,React.createElement(c.a,{poster:k,src:P,type:"vimeo",id:C,attributes:t,setAttributes:r,preset:_,branding:n,key:R})))):React.createElement("div",null,React.createElement(i.a,{icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M22.875 10.063c-2.442 5.217-8.337 12.319-12.063 12.319-3.672 0-4.203-7.831-6.208-13.043-.987-2.565-1.624-1.976-3.474-.681l-1.128-1.455c2.698-2.372 5.398-5.127 7.057-5.28 1.868-.179 3.018 1.098 3.448 3.832.568 3.593 1.362 9.17 2.748 9.17 1.08 0 3.741-4.424 3.878-6.006.243-2.316-1.703-2.386-3.392-1.663 2.673-8.754 13.793-7.142 9.134 2.807z"})),label:w("Presto Vimeo Video","presto-player"),instructions:w("Enter Vimeo Video URL","presto-player"),placeholder:w("Vimeo URL","presto-player"),attributes:t,setAttributes:r,onSelectURL:function(e){e!==P&&r({src:e})}}))}))),E=r(17);function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=wp.i18n.__,C="presto-player/vimeo",x=k(k({},E.a),{},{attributes:k(k({},E.a.attributes),{},{video_id:{type:String}}),title:P("Presto Vimeo Video","presto-player"),description:P("A vimeo video wrapped in an awesome player.","presto-player"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M22.875 10.063c-2.442 5.217-8.337 12.319-12.063 12.319-3.672 0-4.203-7.831-6.208-13.043-.987-2.565-1.624-1.976-3.474-.681l-1.128-1.455c2.698-2.372 5.398-5.127 7.057-5.28 1.868-.179 3.018 1.098 3.448 3.832.568 3.593 1.362 9.17 2.748 9.17 1.08 0 3.741-4.424 3.878-6.006.243-2.316-1.703-2.386-3.392-1.663 2.673-8.754 13.793-7.142 9.134 2.807z"})),edit:_})},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return C})),r.d(t,"options",(function(){return x}));var n=r(5),a=r(20),o=r(21),l=r(22),c=r(14),i=r(37),s=r(18),p=r(9),u=wp.components,d=u.Button,b=u.Disabled,m=u.Toolbar,y=u.Placeholder,v=u.Spinner,f=u.withNotices,h=wp.editor,O=h.BlockControls,g=h.InspectorControls,j=wp.element.useEffect,w=wp.i18n.__,_=(0,wp.compose.compose)([Object(o.a)(),Object(a.a)()])(f((function(e){var t=e.attributes,r=e.setAttributes,n=e.noticeOperations,a=e.branding,o=e.createVideo,u=e.loading,f=e.presetData,h=e.onRemoveSrc,_=e.lockSave,E=e.unlockSave,R=e.renderKey,k=t.poster,P=t.src,C=t.id,x=Object(p.f)(P);return j((function(){x&&r({id:0});var e=Object(s.c)(P);r({video_id:e}),_(),o({src:P,external_id:e,type:"youtube"}).catch((function(e){r({src:""}),function(e){n.removeAllNotices(),n.createErrorNotice(null==e?void 0:e.message)}(e)})).finally(E)}),[P]),P?u||!C?React.createElement(y,{className:"presto-player__placeholder is-loading"},React.createElement(v,null)):React.createElement(React.Fragment,null,React.createElement(O,null,React.createElement(m,null,React.createElement(d,{onClick:function(){return h()}},w("Replace","presto-player")))),React.createElement(g,null,React.createElement(l.a,{setAttributes:r,attributes:t})),React.createElement("figure",null,React.createElement(b,null,React.createElement(c.a,{poster:k,src:P,type:"youtube",id:C,attributes:t,setAttributes:r,preset:f,branding:a,key:R})))):React.createElement("div",null,React.createElement(i.a,{icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"}),React.createElement("polygon",{points:"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"})),label:w("Presto Youtube Video","presto-player"),instructions:w("Enter Youtube Video URL","presto-player"),placeholder:w("Youtube URL","presto-player"),attributes:t,setAttributes:r,onSelectURL:function(e){e!==P&&r({src:e})}}))}))),E=r(17);function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=wp.i18n.__,C="presto-player/youtube",x=k(k({},E.a),{},{attributes:k(k({},E.a.attributes),{},{video_id:{type:String}}),title:P("Presto Youtube Video","presto-player"),description:P("A youtube video wrapped in an awesome player.","presto-player"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"}),React.createElement("polygon",{points:"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"})),edit:_})}],[[55,1,2]]]);
//# sourceMappingURL=admin-15afa29d.js.map