!function(n){var s={timeout:3e5,data:{},remove:function(e){delete s.data[e]},exist:function(e){return!!s.data[e]&&(new Date).getTime()-s.data[e]._<s.timeout},get:function(e){return s.data[e].data},set:function(e,t,a){s.remove(e),s.data[e]={_:(new Date).getTime(),data:t},a&&"function"==typeof a&&a(t)}};n.ajaxPrefilter(function(a,e,t){var r,o;"cartflows"===a.author&&(r=e.complete||n.noop,o=e.url,a.beforeSend=function(){if(s.exist(o)){var e=s.get(o);return CartFlowsAPI._api_cached_request(e),!1}return!0},a.complete=function(e,t){e={args:a.args,items:e.responseText?JSON.parse(e.responseText):"",items_count:e.getResponseHeader("x-wp-total")||0,callback:a.callback,status:t,XHR:e};s.set(o,e,r)})}),CartFlowsAPI={_log:function(e,t){CartFlowsImportVars.debug&&("table"===t||(new Date).toLocaleTimeString())},_api_url:CartFlowsImportVars.server_rest_url,_api_cached_request:function(e){CartFlowsAPI._log(s.data,"table"),CartFlowsAPI._log("Current time "+(new Date).getTime()),CartFlowsAPI._log("Cache expired in "+parseInt(s.timeout)/1e3+" seconds."),void 0!==e.args.trigger&&""!==e.args.trigger&&n(document).trigger(e.args.trigger,[e]),e.callback&&"function"==typeof e.callback&&e.callback(e)},_api_request:function(o,s){var a={url:CartFlowsAPI._api_url+o.slug,args:o,callback:s,headers:CartFlowsImportVars.headers,author:"cartflows"};n.ajax(a).done(function(e,t,a){var r;"success"===t&&a.getResponseHeader("x-wp-total")?(r={args:o,items:e,items_count:a.getResponseHeader("x-wp-total")||0,callback:s,status:t,XHR:a},void 0!==o.trigger&&""!==o.trigger&&n(document).trigger(o.trigger,[r])):n(document).trigger("cartflows-api-request-error"),s&&"function"==typeof s&&s(r)}).fail(function(e,t){n(document).trigger("cartflows-api-request-fail",[a,e,t])}).always(function(){n(document).trigger("cartflows-api-request-always")})}}}(jQuery);